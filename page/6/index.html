<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Richard Yang, Java Developer, Senior software engineer" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="Nothing seek, nothing find">
<meta property="og:type" content="website">
<meta property="og:title" content="Richard Yang">
<meta property="og:url" content="https://richyang.me/page/6/index.html">
<meta property="og:site_name" content="Richard Yang">
<meta property="og:description" content="Nothing seek, nothing find">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Richard Yang">
<meta name="twitter:description" content="Nothing seek, nothing find">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    },
    algolia: {
      applicationID: 'X0H1P7HDKY',
      apiKey: 'ddc0af00a6e07c9b1be9f4da4cf5b9d9',
      indexName: 'richyang.me',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>




  <title> Richard Yang </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <!--span class="logo-line-before"><i></i></span-->
      <span class="site-title">Richard Yang</span>
      <!--span class="logo-line-after"><i></i></span-->
    </a>
  </div>
  <p class="site-subtitle">Full-stack software engineer mainly focusing on Java-based technologies and web front-end</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            Home
          </a>
        </li>
        
      
        
        
        <li class="menu-item menu-item-books">
          <a href="https://www.gitbook.com/@richdyang" rel="section">
            
            Books
          </a>
        </li>
        
      
        
        
        <li class="menu-item menu-item-showcase">
          <a href="/showcase" rel="section">
            
            Showcase
          </a>
        </li>
        
      
        
        
        <li class="menu-item menu-item-resume">
          <a href="http://linkedin.com/in/richdyang" rel="section">
            
            Résumé
          </a>
        </li>
        
      
        
        
      
        
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
            About
          </a>
        </li>
        
      
        
        
      
        
        
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
            <i class="menu-item-icon fa fa-search fa-lg"></i>Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>

<div class="social-links" style="float: right; padding-left: 50px; margin-right: 10px">
      
        
          <span class="links-of-author-item">
            <a href="http://linkedin.com/in/richdyang" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-linkedin"></i>
                </span>
                 
              
            </a>
          </span>
        
          <span class="links-of-author-item">
            <a href="http://github.com/richdyang" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-github-alt"></i>
                </span>
                 
              
            </a>
          </span>
        
          <span class="links-of-author-item">
            <a href="http://bitbucket.org/richdyang" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-bitbucket"></i>
                </span>
                 
              
            </a>
          </span>
        
          <span class="links-of-author-item">
            <a href="http://stackoverflow.com/users/4344443/richard" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-stack-overflow"></i>
                </span>
                 
              
            </a>
          </span>
        
          <span class="links-of-author-item">
            <a href="http://twitter.com/richdyang" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-twitter"></i>
                </span>
                 
              
            </a>
          </span>
        
      
  </div>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/03/spring-framework-the-big-picture/" itemprop="url">
                  Spring framework - the big picture
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-03T14:42:08+08:00" content="2015-04-03">
              2015-04-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/03/spring-framework-the-big-picture/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/03/spring-framework-the-big-picture/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Spring is a big beast. I have to sort out its design and modules.</p>
<p><img src="/media/spring-big-pricture.png" alt="spring-big-pricture"></p>
<p><table border="1" summary="Spring Framework Artifacts"></table></p>
<p><thead></thead></p>
<p><tr></tr></p>
<p><th align="left" valign="top">GroupId</th></p>
<p><th align="left" valign="top">ArtifactId</th></p>
<p><th align="left" valign="top">Description</th><br><br></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-aop</td></p>
<p><td align="left" valign="top">Proxy-based AOP support</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-aspects</td></p>
<p><td align="left" valign="top">AspectJ based aspects</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-beans</td></p>
<p><td align="left" valign="top">Beans support, including Groovy</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-context</td></p>
<p><td align="left" valign="top">Application context runtime, including scheduling and remoting abstractions</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-context-support</td></p>
<p><td align="left" valign="top">Support classes for integrating common third-party libraries into a Spring application context</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-core</td></p>
<p><td align="left" valign="top">Core utilities, used by many other Spring modules</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-expression</td></p>
<p><td align="left" valign="top">Spring Expression Language (SpEL)</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-instrument</td></p>
<p><td align="left" valign="top">Instrumentation agent for JVM bootstrapping</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-instrument-tomcat</td></p>
<p><td align="left" valign="top">Instrumentation agent for Tomcat</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-jdbc</td></p>
<p><td align="left" valign="top">JDBC support package, including DataSource setup and JDBC access support</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-jms</td></p>
<p><td align="left" valign="top">JMS support package, including helper classes to send and receive JMS messages</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-messaging</td></p>
<p><td align="left" valign="top">Support for messaging architectures and protocols</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-orm</td></p>
<p><td align="left" valign="top">Object/Relational Mapping, including JPA and Hibernate support</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-oxm</td></p>
<p><td align="left" valign="top">Object/XML Mapping</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-test</td></p>
<p><td align="left" valign="top">Support for unit testing and integration testing Spring components</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-tx</td></p>
<p><td align="left" valign="top">Transaction infrastructure, including DAO support and JCA integration</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-web</td></p>
<p><td align="left" valign="top">Web support packages, including client and web remoting</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-webmvc</td></p>
<p><td align="left" valign="top">REST Web Services and model-view-controller implementation for web applications</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-webmvc-portlet</td></p>
<p><td align="left" valign="top">MVC implementation to be used in a Portlet environment</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">org.springframework</td></p>
<p><td align="left" valign="top">spring-websocket</td></p>
<p><td align="left" valign="top">WebSocket and SockJS implementations, including STOMP suppor</td><br><br><br><br>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/02/subquery-vs-join/" itemprop="url">
                  subquery vs. join
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-02T15:41:53+08:00" content="2015-04-02">
              2015-04-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SQL/" itemprop="url" rel="index">
                    <span itemprop="name">SQL</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/02/subquery-vs-join/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/02/subquery-vs-join/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="what-is-subquery"><a href="#what-is-subquery" class="headerlink" title="what is subquery"></a>what is subquery</h3><p><strong>SubQuery in SQL</strong> is a query inside another query<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function">SELECT name FROM City WHERE pincode <span class="title">IN</span> <span class="params">(SELECT pincode FROM pin WHERE zone=<span class="string">'west'</span>)</span></span></div></pre></td></tr></table></figure></p>
<p>In this SQL, the part in the brackets is called <em><strong>inner query</strong></em>, while the part out of the brackets is called <em><strong>outer query</strong></em>.</p>
<h4 id="non-correlated-subquery"><a href="#non-correlated-subquery" class="headerlink" title="non-correlated subquery"></a>non-correlated subquery</h4><p>In non correlated subquery, <strong>inner query doesn’t depend on outer query</strong> and can run as stand alone query.</p>
<p>NonCorrelated subquery are used along-with =, IN and NOT IN clause. When you use =, the subquery must return only 1 row.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">SELECT COMPANY FROM Stock WHERE LISTED_ON_EXCHANGE = (SELECT RIC FROM Market WHERE COUNTRY=<span class="string">'Japan'</span>);</div></pre></td></tr></table></figure></p>
<p>Here, the inner query is executed before the outer query.</p>
<h4 id="correlated-subquery"><a href="#correlated-subquery" class="headerlink" title="correlated subquery"></a>correlated subquery</h4><p>Correlated subqueries are the one in which inner query or subquery reference outer query.</p>
<p>One of the most common <em>example of correlated subquery</em> is using keywords exits and not exits.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">SELECT m.NAME FROM Market m WHERE m.<span class="function">RIC <span class="title">EXISTS</span> <span class="params">(SELECT s.LISTED_ON_EXCHANGE FROM Stock s WHERE s.LISTED_ON_EXCHANGE=m.RIC)</span></span>;</div></pre></td></tr></table></figure></p>
<p>Here, the outer query is executed without <em>WHERE</em> clause before the inner query.</p>
<h3 id="which-is-preferable-subquery-or-join"><a href="#which-is-preferable-subquery-or-join" class="headerlink" title="which is preferable: subquery or join"></a>which is preferable: subquery or join</h3><p>Now, almost any subquery can be written in join.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">id  name    id  title</div><div class="line">--  ----    --  ----</div><div class="line"><span class="number">1</span>   Kenny   <span class="number">1</span>   Analyst</div><div class="line"><span class="number">1</span>   Rob     <span class="number">2</span>   Sales</div><div class="line"><span class="number">4</span>   Molly   <span class="number">3</span>   Manager</div><div class="line"><span class="number">1</span>   Greg</div><div class="line"><span class="number">2</span>   John</div><div class="line"></div><div class="line">-- non correlated subquery using IN</div><div class="line">-- Returns <span class="number">3</span> records - Kenny, Rob, and Greg</div><div class="line">SELECT  *</div><div class="line">FROM    tableA</div><div class="line">WHERE   tableA.<span class="function">id <span class="title">IN</span> <span class="params">(SELECT tableB.id FROM tableB WHERE title = <span class="string">'Analyst'</span>)</span></span>;</div><div class="line"></div><div class="line">-- correlated subquery using EXISTS</div><div class="line">SELECT  *</div><div class="line"><span class="function">FROM    tableA</span></div><div class="line">WHERE   <span class="title">EXISTS</span> <span class="params">(SELECT <span class="number">1</span> FROM tableB WHERE title = <span class="string">'Analyst'</span> AND tableA.id = tableB.id)</span>;</div><div class="line"></div><div class="line">-- JOIN (INNER is the <span class="keyword">default</span> when only JOIN is specified)</div><div class="line">SELECT  *</div><div class="line">FROM    tableA</div><div class="line">JOIN    tableB</div><div class="line">    ON  tableA.id = tableB.id</div><div class="line">WHERE   tableB.title = <span class="string">'Analyst'</span>;</div></pre></td></tr></table></figure></p>
<p>Basically, there are some differences:</p>
<ul>
<li>Subquery is more intuitive and relatively easy to understand.</li>
<li>In most cases, EXISTS or JOIN will be much more efficient (and faster) than an IN statement.<br>&nbsp;</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/02/inner-join-and-outer-join/" itemprop="url">
                  inner join and outer join
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-02T15:08:31+08:00" content="2015-04-02">
              2015-04-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SQL/" itemprop="url" rel="index">
                    <span itemprop="name">SQL</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/02/inner-join-and-outer-join/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/02/inner-join-and-outer-join/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>In this blog, we use two tables: TableA and TableB</p>
<p><table style="height: 85px;" border="1" width="531"></table></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<p><td>id</td></p>
<p><td>name</td></p>
<p><td>id</td></p>
<p><td>name</td><br></p>
<p><tr></tr></p>
<p><td>–</td></p>
<p><td>—-</td></p>
<p><td>–</td></p>
<p><td>—–</td><br></p>
<p><tr></tr></p>
<p><td>1</td></p>
<p><td>Pirate</td></p>
<p><td>1</td></p>
<p><td>Rutabaga</td><br></p>
<p><tr></tr></p>
<p><td>2</td></p>
<p><td>Monkey</td></p>
<p><td>2</td></p>
<p><td>Pirate</td><br></p>
<p><tr></tr></p>
<p><td>3</td></p>
<p><td><span style="color: #ff0000;">Ninja </span></td></p>
<p><td>3</td></p>
<p><td>Darth Vader</td><br></p>
<p><tr></tr></p>
<p><td>4</td></p>
<p><td>Spaghetti</td></p>
<p><td>4</td></p>
<p><td>Ninja</td><br><br><br></p>
<blockquote>
<p>inner or outer keyword can be omitted.</p>
</blockquote>
<h3 id="inner-join"><a href="#inner-join" class="headerlink" title="inner join"></a>inner join</h3><p><strong>Inner join</strong> produces only the set of records that match in both Table A and Table B.</p>
<blockquote>
<p>The inner keyword can be left out from SQL statements.<br><img src="/media/inner-join-300x197.png" alt="inner-join"><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">SELECT * FROM TableA</div><div class="line">INNER JOIN TableB</div><div class="line">ON TableA.name = TableB.name</div><div class="line"></div><div class="line">id  name       id   name</div><div class="line">--  ----       --   ----</div><div class="line"><span class="number">1</span>   Pirate     <span class="number">2</span>    Pirate</div><div class="line"><span class="number">3</span>   Ninja      <span class="number">4</span>    Ninja</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="outer-join"><a href="#outer-join" class="headerlink" title="outer join"></a>outer join</h3><p>There are 3 kinds of outer join.</p>
<blockquote>
<p>The outer keyword can be left out from SQL statements.</p>
</blockquote>
<h4 id="left-outer-join"><a href="#left-outer-join" class="headerlink" title="left outer join"></a>left outer join</h4><p><strong>Left outer join</strong> produces a complete set of records from Table A, with the matching records (where available) in Table B. If there is no match, the right side will contain null.</p>
<p><img src="/media/left-outer-join-300x197.png" alt="left-outer-join"><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">SELECT * FROM TableA</div><div class="line">LEFT OUTER JOIN TableB</div><div class="line">ON TableA.name = TableB.name</div><div class="line"></div><div class="line">id  name       id    name</div><div class="line">--  ----       --    ----</div><div class="line"><span class="number">1</span>   Pirate     <span class="number">2</span>     Pirate</div><div class="line"><span class="number">2</span>   Monkey     <span class="keyword">null</span>  <span class="keyword">null</span></div><div class="line"><span class="number">3</span>   Ninja      <span class="number">4</span>     Ninja</div><div class="line"><span class="number">4</span>   Spaghetti  <span class="keyword">null</span>  <span class="keyword">null</span></div></pre></td></tr></table></figure></p>
<p>&nbsp;</p>
<h4 id="right-outer-join"><a href="#right-outer-join" class="headerlink" title="right outer join"></a>right outer join</h4><p><strong>Right outer join</strong> produces a complete set of records from Table B, with the matching records (where available) in Table A. If there is no match, the left side will contain null.</p>
<p><img src="/media/right-outer-join-300x197.png" alt="right-outer-join"><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">SELECT * FROM TableA</div><div class="line">RIGHT OUTER JOIN TableB</div><div class="line">ON TableA.name = TableB.name</div><div class="line">WHERE TableB.id IS <span class="keyword">null</span></div><div class="line"></div><div class="line">id  name       id    name</div><div class="line">--  ----       --    ----</div><div class="line"><span class="keyword">null</span> <span class="keyword">null</span>      <span class="number">1</span>     Rutabaga</div><div class="line"><span class="number">1</span>    Pirate    <span class="number">2</span>     Pirate</div><div class="line"><span class="keyword">null</span> <span class="keyword">null</span>      <span class="number">3</span>     Darth Vader</div><div class="line"><span class="number">3</span>    Ninja     <span class="number">4</span>     Ninja</div></pre></td></tr></table></figure></p>
<h4 id="full-outer-join"><a href="#full-outer-join" class="headerlink" title="full outer join"></a>full outer join</h4><p><strong>Full outer join</strong> produces the set of all records in Table A and Table B, with matching records from both sides where available. If there is no match, the missing side will contain null.</p>
<p><img src="/media/full-outer-join-300x197.png" alt="full-outer-join"><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">SELECT * FROM TableA</div><div class="line">FULL OUTER JOIN TableB</div><div class="line">ON TableA.name = TableB.name</div><div class="line"></div><div class="line">id    name       id    name</div><div class="line">--    ----       --    ----</div><div class="line"><span class="number">1</span>     Pirate     <span class="number">2</span>     Pirate</div><div class="line"><span class="number">2</span>     Monkey     <span class="keyword">null</span>  <span class="keyword">null</span></div><div class="line"><span class="number">3</span>     Ninja      <span class="number">4</span>     Ninja</div><div class="line"><span class="number">4</span>     Spaghetti  <span class="keyword">null</span>  <span class="keyword">null</span></div><div class="line"><span class="keyword">null</span>  <span class="keyword">null</span>       <span class="number">1</span>     Rutabaga</div><div class="line"><span class="keyword">null</span>  <span class="keyword">null</span>       <span class="number">3</span>     Darth Vader</div></pre></td></tr></table></figure></p>
<h3 id="cross-join-cartesian-product"><a href="#cross-join-cartesian-product" class="headerlink" title="cross join (cartesian product)"></a><strong>cross join (cartesian product)</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">SELECT * FROM TableA</div><div class="line">CROSS JOIN TableB</div></pre></td></tr></table></figure>
<p>This joins “everything to everything”, resulting in 4 x 4 = 16 rows, far more than we had in the original sets.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/01/a-glimpse-of-jms/" itemprop="url">
                  A glimpse of JMS
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-01T14:59:19+08:00" content="2015-04-01">
              2015-04-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JMS/" itemprop="url" rel="index">
                    <span itemprop="name">JMS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/01/a-glimpse-of-jms/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/01/a-glimpse-of-jms/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="what-messaging-provides"><a href="#what-messaging-provides" class="headerlink" title="what messaging provides?"></a>what messaging provides?</h3><ul>
<li><p><strong>loosely decoupled</strong><br>A component sends a message to a destination, and the recipient can retrieve the message from the destination. However, the sender and the receiver do not have to be available at the same time in order to communicate. In fact, the sender does not need to know anything about the receiver; nor does the receiver need to know anything about the sender. The sender and the receiver need to know only which message format and which destination to use.</p>
</li>
<li><p><strong>asynchronous</strong><br>A JMS provider can deliver messages to a client as they arrive; a client does not have to request messages in order to receive them.</p>
</li>
<li><p><strong>reliable</strong><br>The JMS API can ensure that a message is delivered once and only once. Lower levels of reliability are available for applications that can afford to miss messages or to receive duplicate messages.</p>
</li>
</ul>
<h3 id="JMS-architecture"><a href="#JMS-architecture" class="headerlink" title="JMS architecture"></a>JMS architecture</h3><ul>
<li><strong>JMS provider</strong> - a messaging system implementing JMS specification, like WebSphere MQ, ActiveMQ etc.</li>
<li><strong>JMS clients</strong> - programs or components written in Java which can produce or consume message</li>
<li><strong>messages</strong> - the objects that communicate information between JMS clients.</li>
<li><strong>Administered objects</strong> - preconfigured JMS objects created by an administrator for the use of clients. This objects can be looked up and referenced from JNDI namespace.<br><img src="/media/jms_parts.png" alt="jms\_parts"></li>
</ul>
<h3 id="Messaging-Domains"><a href="#Messaging-Domains" class="headerlink" title="Messaging Domains"></a>Messaging Domains</h3><h4 id="Point-to-Point-Messaging-Domain"><a href="#Point-to-Point-Messaging-Domain" class="headerlink" title="Point-to-Point Messaging Domain"></a>Point-to-Point Messaging Domain</h4><p><img src="/media/ptp-messaging.png" alt="ptp-messaging"></p>
<ul>
<li>Each message has only one consumer.</li>
<li>A sender and a receiver of a message have no timing dependencies. The receiver can fetch the message whether or not it was running when the client sent the message.</li>
<li>The receiver acknowledges the successful processing of a message.</li>
</ul>
<h4 id="Publish-Subscribe-Messaging-Domain"><a href="#Publish-Subscribe-Messaging-Domain" class="headerlink" title="Publish/Subscribe Messaging Domain"></a>Publish/Subscribe Messaging Domain</h4><p><img src="/media/pub-sub-messaging.png" alt="pub-sub-messaging"></p>
<ul>
<li>Each message can have multiple consumers.</li>
<li>Publishers and subscribers have a timing dependency. A client that subscribes to a topic can consume only messages published after the client has created a subscription, and the subscriber must continue to be active in order for it to consume messages.</li>
</ul>
<h3 id="The-JMS-API-Programming-Model"><a href="#The-JMS-API-Programming-Model" class="headerlink" title="The JMS API Programming Model"></a>The JMS API Programming Model</h3><p><img src="/media/jms-programmingModel.gif" alt="jms-programmingModel"></p>
<h4 id="JMS-Administered-Objects"><a href="#JMS-Administered-Objects" class="headerlink" title="JMS Administered Objects"></a>JMS Administered Objects</h4><p>Two parts of a JMS application, destinations and connection factories, are best maintained administratively rather than programmatically.</p>
<p>A <strong>connection factory</strong> is the object a client uses to create a connection to a provider.</p>
<p>In the PTP messaging domain, <strong>destinations</strong> are called queues. In the pub/sub messaging domain, <strong>destinations</strong> are called topics.</p>
<h4 id="JMS-Connections"><a href="#JMS-Connections" class="headerlink" title="JMS Connections"></a>JMS Connections</h4><p>You use a connection to create one or more sessions.</p>
<h4 id="JMS-Sessions"><a href="#JMS-Sessions" class="headerlink" title="JMS Sessions"></a>JMS Sessions</h4><p>A <strong>session</strong> is a single-threaded context for producing and consuming messages. You use sessions to create the following:</p>
<ul>
<li>Message producers</li>
<li>Message consumers</li>
<li>Messages</li>
<li>Queue browsers</li>
<li>Temporary queues and topics<br>Session class implements <em>Runnable</em> interface.</li>
</ul>
<h4 id="JMS-Message-Producers"><a href="#JMS-Message-Producers" class="headerlink" title="JMS Message Producers"></a>JMS Message Producers</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">MessageProducer producer = session.createProducer(dest);</div><div class="line">MessageProducer producer = session.createProducer(queue);</div><div class="line">MessageProducer producer = session.createProducer(topic);</div><div class="line">producer.send(message);</div><div class="line"></div><div class="line">MessageProducer anon_prod = session.createProducer(<span class="keyword">null</span>);</div><div class="line">anon_prod.send(dest, message);</div></pre></td></tr></table></figure>
<h4 id="JMS-Message-Consumers"><a href="#JMS-Message-Consumers" class="headerlink" title="JMS Message Consumers"></a>JMS Message Consumers</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">MessageConsumer consumer = session.createConsumer(dest);</div><div class="line">MessageConsumer consumer = session.createConsumer(queue);</div><div class="line">MessageConsumer consumer = session.createConsumer(topic);</div><div class="line"> </div><div class="line">connection.start();</div><div class="line">Message m = consumer.receive();</div><div class="line">connection.start();</div><div class="line">Message m = consumer.receive(<span class="number">1000</span>); <span class="comment">// time out after a second</span></div></pre></td></tr></table></figure>
<h4 id="JMS-Message-Listeners"><a href="#JMS-Message-Listeners" class="headerlink" title="JMS Message Listeners"></a>JMS Message Listeners</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">Listener myListener = <span class="keyword">new</span> Listener();</div><div class="line">consumer.setMessageListener(myListener);</div></pre></td></tr></table></figure>
<h4 id="JMS-Message-Selectors"><a href="#JMS-Message-Selectors" class="headerlink" title="JMS Message Selectors"></a>JMS Message Selectors</h4><p>This is for message filtering.The syntax of the expression is based on a subset of the SQL92 conditional expression syntax.<br><code>NewsType = ’Sports’ OR NewsType = ’Opinion’</code><br>The message consumer then receives only messages whose headers and properties match the selector.</p>
<h4 id="JMS-Messages"><a href="#JMS-Messages" class="headerlink" title="JMS Messages"></a>JMS Messages</h4><p>JMS message includes 3 parts: header, properties, body, of which only header is required.</p>
<h4 id="MS-Queue-Browsers"><a href="#MS-Queue-Browsers" class="headerlink" title="MS Queue Browsers"></a>MS Queue Browsers</h4><p>This browser can browse the messages in the queue and display the header values for each message.</p>
<h3 id="basic-usage-examples"><a href="#basic-usage-examples" class="headerlink" title="basic usage examples"></a>basic usage examples</h3><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PointToPoint</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> ConnectionFactory factory;</div><div class="line">    <span class="keyword">private</span> Connection connection;</div><div class="line">    <span class="keyword">private</span> Session session;</div><div class="line">    <span class="keyword">private</span> Destination destination;</div><div class="line"></div><div class="line">    <span class="meta">@Before</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        factory = <span class="keyword">new</span> ActiveMQConnectionFactory(ActiveMQConnection.DEFAULT_BROKER_URL);</div><div class="line">        connection = factory.createConnection();</div><div class="line">        connection = factory.createConnection();</div><div class="line">        connection.start();</div><div class="line">        session = connection.createSession(<span class="keyword">false</span>, Session.AUTO_ACKNOWLEDGE);</div><div class="line">        destination = session.createQueue(<span class="string">"myqueue"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSend</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        MessageProducer producer = session.createProducer(destination);</div><div class="line">        TextMessage message = session.createTextMessage();</div><div class="line">        message.setText(<span class="string">"Hello ...This is a sample message..sending from FirstClient"</span>);</div><div class="line">        producer.send(message);</div><div class="line">        System.out.println(<span class="string">"Sent: "</span> + message.getText());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testReceive</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        MessageConsumer consumer = session.createConsumer(destination);</div><div class="line">        Message message = consumer.receive();</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (message <span class="keyword">instanceof</span> TextMessage) &#123;</div><div class="line">            TextMessage text = (TextMessage) message;</div><div class="line">            System.out.println(<span class="string">"Message is : "</span> + text.getText());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="reliability-mechanisms"><a href="#reliability-mechanisms" class="headerlink" title="reliability mechanisms"></a>reliability mechanisms</h3><h4 id="acknowledge"><a href="#acknowledge" class="headerlink" title="acknowledge"></a>acknowledge</h4><h4 id="transaction"><a href="#transaction" class="headerlink" title="transaction"></a>transaction</h4><h4 id="message-persistence"><a href="#message-persistence" class="headerlink" title="message persistence"></a>message persistence</h4><h4 id="message-expiry"><a href="#message-expiry" class="headerlink" title="message expiry"></a>message expiry</h4><h4 id="message-priority-level"><a href="#message-priority-level" class="headerlink" title="message priority level"></a>message priority level</h4><h4 id="durable-subscriber"><a href="#durable-subscriber" class="headerlink" title="durable subscriber"></a>durable subscriber</h4>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/30/servlet-basics/" itemprop="url">
                  servlet basics
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-03-30T15:57:35+08:00" content="2015-03-30">
              2015-03-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Servlet-JSP/" itemprop="url" rel="index">
                    <span itemprop="name">Servlet / JSP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/03/30/servlet-basics/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/03/30/servlet-basics/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Deployment-Descriptor-web-xml"><a href="#Deployment-Descriptor-web-xml" class="headerlink" title="Deployment Descriptor: web.xml"></a>Deployment Descriptor: web.xml</h3><p>The following is a complete Deployment Descriptor.<br><figure class="highlight"><table><tr><td class="code"><pre><div class="line">&amp;lt;?xml version="1.0" encoding="ISO-8859-1"?&amp;gt;</div><div class="line">&amp;lt;web-app xmlns="http://java.sun.com/xml/ns/j2ee"</div><div class="line">         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</div><div class="line">         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</div><div class="line">         version="2.5"&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line">    &amp;lt;!-- General --&amp;gt;</div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Name the application --&amp;gt;</div><div class="line">    &amp;lt;display-name&amp;gt;Example App&amp;lt;/display-name&amp;gt;</div><div class="line">    &amp;lt;description&amp;gt;An example application which is used to play with some of the features of Tomcat&amp;lt;/description&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- This app is cluster-ready --&amp;gt;</div><div class="line">    &amp;lt;distributable /&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Set timeout to 120 minutes --&amp;gt;</div><div class="line">    &amp;lt;session-config&amp;gt;</div><div class="line">        &amp;lt;session-timeout&amp;gt;120&amp;lt;/session-timeout&amp;gt;</div><div class="line">    &amp;lt;/session-config&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line">    &amp;lt;!-- JSP Configuration --&amp;gt;</div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Note that you can only have one &amp;lt;jsp-config&amp;gt; element per web.xml --&amp;gt;</div><div class="line">    &amp;lt;jsp-config&amp;gt;</div><div class="line">        &amp;lt;!-- Taglib declarations are no longer required since JSP 2.0, see Removing taglib from web.xml --&amp;gt;</div><div class="line">        &amp;lt;!-- The &amp;lt;taglib&amp;gt; did not need to be a child of &amp;lt;jsp-config&amp;gt; in earlier versions but is required as of Tomcat 7 --&amp;gt;</div><div class="line">        &amp;lt;taglib&amp;gt;</div><div class="line">            &amp;lt;taglib-uri&amp;gt;mytags&amp;lt;/taglib-uri&amp;gt;</div><div class="line">            &amp;lt;taglib-location&amp;gt;/WEB-INF/jsp/mytaglib.tld&amp;lt;/taglib-location&amp;gt;</div><div class="line">        &amp;lt;/taglib&amp;gt;</div><div class="line">        &amp;lt;jsp-property-group&amp;gt;</div><div class="line">            &amp;lt;url-pattern&amp;gt;*.jsp&amp;lt;/url-pattern&amp;gt;</div><div class="line">            &amp;lt;include-prelude&amp;gt;/WEB-INF/jspf/prelude1.jspf&amp;lt;/include-prelude&amp;gt;</div><div class="line">            &amp;lt;include-coda&amp;gt;/WEB-INF/jspf/coda1.jspf&amp;lt;/include-coda&amp;gt;</div><div class="line">        &amp;lt;/jsp-property-group&amp;gt;</div><div class="line">    &amp;lt;/jsp-config&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line">    &amp;lt;!-- Context Parameters --&amp;gt;</div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;context-param&amp;gt;</div><div class="line">        &amp;lt;description&amp;gt;Enable debugging for the application&amp;lt;/description&amp;gt;</div><div class="line">        &amp;lt;param-name&amp;gt;debug&amp;lt;/param-name&amp;gt;</div><div class="line">        &amp;lt;param-value&amp;gt;true&amp;lt;/param-value&amp;gt;</div><div class="line">    &amp;lt;/context-param&amp;gt;</div><div class="line">    &amp;lt;context-param&amp;gt;</div><div class="line">        &amp;lt;description&amp;gt;The email address of the administrator, used to send error reports.&amp;lt;/description&amp;gt;</div><div class="line">        &amp;lt;param-name&amp;gt;webmaster&amp;lt;/param-name&amp;gt;</div><div class="line">        &amp;lt;param-value&amp;gt;address@somedomain.com&amp;lt;/param-value&amp;gt;</div><div class="line">    &amp;lt;/context-param&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line">    &amp;lt;!-- Servlets --&amp;gt;</div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Simple Servlet, provide a name, class, description and map to URL /servlet/SimpleServlet --&amp;gt;</div><div class="line">    &amp;lt;servlet&amp;gt;</div><div class="line">        &amp;lt;servlet-name&amp;gt;Simple&amp;lt;/servlet-name&amp;gt;</div><div class="line">        &amp;lt;servlet-class&amp;gt;SimpleServlet&amp;lt;/servlet-class&amp;gt;</div><div class="line">        &amp;lt;description&amp;gt;This is a simple Hello World servlet&amp;lt;/description&amp;gt;</div><div class="line">    &amp;lt;/servlet&amp;gt;</div><div class="line">    &amp;lt;servlet-mapping&amp;gt;</div><div class="line">        &amp;lt;servlet-name&amp;gt;Simple&amp;lt;/servlet-name&amp;gt;</div><div class="line">        &amp;lt;url-pattern&amp;gt;/servlet/SimpleServlet&amp;lt;/url-pattern&amp;gt;</div><div class="line">    &amp;lt;/servlet-mapping&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- CMS Servlet, responds to *.cms URL's --&amp;gt;</div><div class="line">    &amp;lt;servlet&amp;gt;</div><div class="line">        &amp;lt;!-- Identification --&amp;gt;</div><div class="line">        &amp;lt;servlet-name&amp;gt;cms&amp;lt;/servlet-name&amp;gt;</div><div class="line">        &amp;lt;servlet-class&amp;gt;com.metawerx.servlets.ContentManagementSystem&amp;lt;/servlet-class&amp;gt;</div><div class="line">        &amp;lt;description&amp;gt;This servlet handles requests for the CMS (it is a controller in an MVC architecture)&amp;lt;/description&amp;gt;</div><div class="line"></div><div class="line">        &amp;lt;!-- This servlet has two parameters --&amp;gt;</div><div class="line">        &amp;lt;init-param&amp;gt;</div><div class="line">            &amp;lt;param-name&amp;gt;debug&amp;lt;/param-name&amp;gt;</div><div class="line">            &amp;lt;param-value&amp;gt;true&amp;lt;/param-value&amp;gt;</div><div class="line">        &amp;lt;/init-param&amp;gt;</div><div class="line">        &amp;lt;init-param&amp;gt;</div><div class="line">            &amp;lt;param-name&amp;gt;detail&amp;lt;/param-name&amp;gt;</div><div class="line">            &amp;lt;param-value&amp;gt;2&amp;lt;/param-value&amp;gt;</div><div class="line">        &amp;lt;/init-param&amp;gt;</div><div class="line"></div><div class="line">        &amp;lt;!-- Load this servlet when the application starts (call the init() method of the servlet) --&amp;gt;</div><div class="line">        &amp;lt;load-on-startup&amp;gt;5&amp;lt;/load-on-startup&amp;gt;</div><div class="line">        &amp;lt;!-- &amp;lt;run-at&amp;gt;0:00, 6:00, 12:00, 18:00&amp;lt;/run-at&amp;gt; This tag is only valid for Resin --&amp;gt;</div><div class="line">    &amp;lt;/servlet&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Map some URLs to the cms servlet (demonstrates *.extension mapping) --&amp;gt;</div><div class="line">    &amp;lt;servlet-mapping&amp;gt;</div><div class="line">        &amp;lt;!-- For any URL ending in .cms, the cms servlet will be called --&amp;gt;</div><div class="line">        &amp;lt;servlet-name&amp;gt;cms&amp;lt;/servlet-name&amp;gt;</div><div class="line">        &amp;lt;url-pattern&amp;gt;*.cms&amp;lt;/url-pattern&amp;gt;</div><div class="line">    &amp;lt;/servlet-mapping&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Rewriter Servlet, responds to /content/* and /admin/RewriterStatistics URL's --&amp;gt;</div><div class="line">    &amp;lt;!-- Define a servlet to respond to /content/* URL's --&amp;gt;</div><div class="line">    &amp;lt;servlet&amp;gt;</div><div class="line">        &amp;lt;servlet-name&amp;gt;rewriter&amp;lt;/servlet-name&amp;gt;</div><div class="line">        &amp;lt;servlet-class&amp;gt;com.metawerx.servlets.URLRewriter&amp;lt;/servlet-class&amp;gt;</div><div class="line">    &amp;lt;/servlet&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Map some URL's to the rewriter servlet (demonstrates /path/* and specific URL mapping) --&amp;gt;</div><div class="line">    &amp;lt;servlet-mapping&amp;gt;</div><div class="line">        &amp;lt;!-- For any URL starting with /content/, the rewriter servlet will be called --&amp;gt;</div><div class="line">        &amp;lt;servlet-name&amp;gt;rewriter&amp;lt;/servlet-name&amp;gt;</div><div class="line">        &amp;lt;url-pattern&amp;gt;/content/*&amp;lt;/url-pattern&amp;gt;</div><div class="line">    &amp;lt;/servlet-mapping&amp;gt;</div><div class="line">    &amp;lt;servlet-mapping&amp;gt;</div><div class="line">        &amp;lt;!-- The rewriter servlet can also be called directly as /admin/RewriterStatistics, to return stats --&amp;gt;</div><div class="line">        &amp;lt;servlet-name&amp;gt;rewriter&amp;lt;/servlet-name&amp;gt;</div><div class="line">        &amp;lt;url-pattern&amp;gt;/admin/RewriterStatistics&amp;lt;/url-pattern&amp;gt;</div><div class="line">    &amp;lt;/servlet-mapping&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- PathJSP Servlet, maps /shop/item/* URL's to a JSP file --&amp;gt;</div><div class="line">    &amp;lt;!-- Define a JSP file to respond to /shop/item/* URL's --&amp;gt;</div><div class="line">    &amp;lt;servlet&amp;gt;</div><div class="line">        &amp;lt;servlet-name&amp;gt;pathjsp&amp;lt;/servlet-name&amp;gt;</div><div class="line">        &amp;lt;jsp-file&amp;gt;pathfinder.jsp&amp;lt;/jsp-file&amp;gt;</div><div class="line">    &amp;lt;/servlet&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Map some URL's to the pathjsp servlet (demonstrates /long/path/* URL mapping) --&amp;gt;</div><div class="line">    &amp;lt;servlet-mapping&amp;gt;</div><div class="line">        &amp;lt;!-- For any URL starting with /shop/item/, the pathjsp servlet will be called --&amp;gt;</div><div class="line">        &amp;lt;servlet-name&amp;gt;pathjsp&amp;lt;/servlet-name&amp;gt;</div><div class="line">        &amp;lt;url-pattern&amp;gt;/shop/item/*&amp;lt;/url-pattern&amp;gt;</div><div class="line">    &amp;lt;/servlet-mapping&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line">    &amp;lt;!-- Filters --&amp;gt;</div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Example filter to set character encoding on each request (from Tomcat servlets-examples context) --&amp;gt;</div><div class="line">    &amp;lt;filter&amp;gt;</div><div class="line">        &amp;lt;filter-name&amp;gt;Set Character Encoding&amp;lt;/filter-name&amp;gt;</div><div class="line">        &amp;lt;filter-class&amp;gt;filters.SetCharacterEncodingFilter&amp;lt;/filter-class&amp;gt;</div><div class="line">        &amp;lt;init-param&amp;gt;</div><div class="line">            &amp;lt;param-name&amp;gt;encoding&amp;lt;/param-name&amp;gt;</div><div class="line">            &amp;lt;param-value&amp;gt;EUC_JP&amp;lt;/param-value&amp;gt;</div><div class="line">        &amp;lt;/init-param&amp;gt;</div><div class="line">    &amp;lt;/filter&amp;gt;</div><div class="line">    &amp;lt;filter-mapping&amp;gt;</div><div class="line">        &amp;lt;filter-name&amp;gt;Set Character Encoding&amp;lt;/filter-name&amp;gt;</div><div class="line">        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;</div><div class="line">    &amp;lt;/filter-mapping&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Example filter to dump the HTTP request at the top of each page (from Tomcat servlets-examples context) --&amp;gt;</div><div class="line">    &amp;lt;filter&amp;gt;</div><div class="line">        &amp;lt;filter-name&amp;gt;Request Dumper Filter&amp;lt;/filter-name&amp;gt;</div><div class="line">        &amp;lt;filter-class&amp;gt;filters.RequestDumperFilter&amp;lt;/filter-class&amp;gt;</div><div class="line">    &amp;lt;/filter&amp;gt;</div><div class="line">    &amp;lt;filter-mapping&amp;gt;</div><div class="line">        &amp;lt;filter-name&amp;gt;Request Dumper Filter&amp;lt;/filter-name&amp;gt;</div><div class="line">        &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;</div><div class="line">    &amp;lt;/filter-mapping&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line">    &amp;lt;!-- Listeners --&amp;gt;</div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Define example application events listeners --&amp;gt;</div><div class="line">    &amp;lt;listener&amp;gt;</div><div class="line">        &amp;lt;listener-class&amp;gt;com.metawerx.listener.ContextListener&amp;lt;/listener-class&amp;gt;</div><div class="line">    &amp;lt;/listener&amp;gt;</div><div class="line">    &amp;lt;listener&amp;gt;</div><div class="line">        &amp;lt;listener-class&amp;gt;com.metawerx.listener.SessionListener&amp;lt;/listener-class&amp;gt;</div><div class="line">    &amp;lt;/listener&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line">    &amp;lt;!-- Security --&amp;gt;</div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Define roles --&amp;gt;</div><div class="line">    &amp;lt;security-role&amp;gt;</div><div class="line">        &amp;lt;role-name&amp;gt;admin&amp;lt;/role-name&amp;gt;</div><div class="line">    &amp;lt;/security-role&amp;gt;</div><div class="line">    &amp;lt;security-role&amp;gt;</div><div class="line">        &amp;lt;role-name&amp;gt;cms_editors&amp;lt;/role-name&amp;gt;</div><div class="line">    &amp;lt;/security-role&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Define a constraint to restrict access to /private/* --&amp;gt;</div><div class="line">    &amp;lt;security-constraint&amp;gt;</div><div class="line"></div><div class="line">        &amp;lt;display-name&amp;gt;Security constraint for the /private folder&amp;lt;/display-name&amp;gt;</div><div class="line"></div><div class="line">        &amp;lt;web-resource-collection&amp;gt;</div><div class="line"></div><div class="line">            &amp;lt;web-resource-name&amp;gt;Protected Area&amp;lt;/web-resource-name&amp;gt;</div><div class="line">            &amp;lt;url-pattern&amp;gt;/private/*&amp;lt;/url-pattern&amp;gt;</div><div class="line"></div><div class="line">            &amp;lt;!-- If you list http methods, only those methods are protected. --&amp;gt;</div><div class="line">            &amp;lt;!-- Leave this commented out to protect all access --&amp;gt;</div><div class="line">            &amp;lt;!--</div><div class="line">            &amp;lt;http-method&amp;gt;DELETE&amp;lt;/http-method&amp;gt;</div><div class="line">            &amp;lt;http-method&amp;gt;GET&amp;lt;/http-method&amp;gt;</div><div class="line">            &amp;lt;http-method&amp;gt;POST&amp;lt;/http-method&amp;gt;</div><div class="line">            &amp;lt;http-method&amp;gt;PUT&amp;lt;/http-method&amp;gt;</div><div class="line">            --&amp;gt;</div><div class="line"></div><div class="line">        &amp;lt;/web-resource-collection&amp;gt;</div><div class="line"></div><div class="line">        &amp;lt;auth-constraint&amp;gt;</div><div class="line">            &amp;lt;!-- Only only administrator and CMS editors to access this area --&amp;gt;</div><div class="line">            &amp;lt;role-name&amp;gt;admin&amp;lt;/role-name&amp;gt;</div><div class="line">            &amp;lt;role-name&amp;gt;cms_editors&amp;lt;/role-name&amp;gt;</div><div class="line">        &amp;lt;/auth-constraint&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;/security-constraint&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- FORM based authentication --&amp;gt;</div><div class="line">    &amp;lt;!-- Leave this commented out, we will use BASIC (HTTP) authentication instead --&amp;gt;</div><div class="line">    &amp;lt;!--</div><div class="line">    &amp;lt;login-config&amp;gt;</div><div class="line">            &amp;lt;auth-method&amp;gt;FORM&amp;lt;/auth-method&amp;gt;</div><div class="line">            &amp;lt;form-login-config&amp;gt;</div><div class="line">                    &amp;lt;form-login-page&amp;gt;/login.jsp&amp;lt;/form-login-page&amp;gt;</div><div class="line">                    &amp;lt;form-error-page&amp;gt;/error.jsp&amp;lt;/form-error-page&amp;gt;</div><div class="line">            &amp;lt;/form-login-config&amp;gt;</div><div class="line">    &amp;lt;/login-config&amp;gt;</div><div class="line">    --&amp;gt;</div><div class="line">    &amp;lt;!-- This application uses BASIC authentication --&amp;gt;</div><div class="line">    &amp;lt;login-config&amp;gt;</div><div class="line">        &amp;lt;auth-method&amp;gt;BASIC&amp;lt;/auth-method&amp;gt;</div><div class="line">        &amp;lt;realm-name&amp;gt;Editor Login&amp;lt;/realm-name&amp;gt;</div><div class="line">    &amp;lt;/login-config&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Define a constraint to force SSL on all pages in the application --&amp;gt;</div><div class="line">    &amp;lt;security-constraint&amp;gt;</div><div class="line"></div><div class="line">        &amp;lt;web-resource-collection&amp;gt;</div><div class="line">            &amp;lt;web-resource-name&amp;gt;Entire Application&amp;lt;/web-resource-name&amp;gt;</div><div class="line">            &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;</div><div class="line">        &amp;lt;/web-resource-collection&amp;gt;</div><div class="line"></div><div class="line">        &amp;lt;user-data-constraint&amp;gt;</div><div class="line">            &amp;lt;transport-guarantee&amp;gt;CONFIDENTIAL&amp;lt;/transport-guarantee&amp;gt;</div><div class="line">        &amp;lt;/user-data-constraint&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;/security-constraint&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line">    &amp;lt;!-- Error Handler --&amp;gt;</div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Define an error handler for 404 pages --&amp;gt;</div><div class="line">    &amp;lt;error-page&amp;gt;</div><div class="line">        &amp;lt;error-code&amp;gt;404&amp;lt;/error-code&amp;gt;</div><div class="line">        &amp;lt;location&amp;gt;/error404.jsp&amp;lt;/location&amp;gt;</div><div class="line">    &amp;lt;/error-page&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Define an error handler for java.lang.Throwable --&amp;gt;</div><div class="line">    &amp;lt;error-page&amp;gt;</div><div class="line">        &amp;lt;exception-type&amp;gt;java.lang.Throwable&amp;lt;/exception-type&amp;gt;</div><div class="line">        &amp;lt;location&amp;gt;/errorThrowable.jsp&amp;lt;/location&amp;gt;</div><div class="line">    &amp;lt;/error-page&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line">    &amp;lt;!-- Extra MIME types --&amp;gt;</div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Set XML mime-mapping so spreadsheets open properly instead of being sent as an octet/stream --&amp;gt;</div><div class="line">    &amp;lt;mime-mapping&amp;gt;</div><div class="line">        &amp;lt;extension&amp;gt;xls&amp;lt;/extension&amp;gt;</div><div class="line">        &amp;lt;mime-type&amp;gt;application/vnd.ms-excel&amp;lt;/mime-type&amp;gt;</div><div class="line">    &amp;lt;/mime-mapping&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line">    &amp;lt;!-- Locale --&amp;gt;</div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Set Locale Encoding --&amp;gt;</div><div class="line">    &amp;lt;locale-encoding-mapping-list&amp;gt;</div><div class="line">        &amp;lt;locale-encoding-mapping&amp;gt;</div><div class="line">            &amp;lt;locale&amp;gt;ja&amp;lt;/locale&amp;gt;</div><div class="line">            &amp;lt;encoding&amp;gt;Shift_JIS&amp;lt;/encoding&amp;gt;</div><div class="line">        &amp;lt;/locale-encoding-mapping&amp;gt;</div><div class="line">    &amp;lt;/locale-encoding-mapping-list&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line">    &amp;lt;!-- Welcome Files --&amp;gt;</div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- Define, in order of preference, which file to show when no filename is defined in the path --&amp;gt;</div><div class="line">    &amp;lt;!-- eg: when user goes to http://yoursite.com/ or http://yoursite.com/somefolder --&amp;gt;</div><div class="line">    &amp;lt;!-- Defaults are provided in the server-wide web.xml file, such as index.jsp, index.htm --&amp;gt;</div><div class="line">    &amp;lt;!-- Note: using this tag overrides the defaults, so don't forget to add them here --&amp;gt;</div><div class="line">    &amp;lt;welcome-file-list&amp;gt;</div><div class="line">        &amp;lt;!-- Use index.swf if present, or splash.jsp, otherwise just look for the normal defaults --&amp;gt;</div><div class="line">        &amp;lt;welcome-file&amp;gt;index.swf&amp;lt;/welcome-file&amp;gt;</div><div class="line">        &amp;lt;welcome-file&amp;gt;splash.jsp&amp;lt;/welcome-file&amp;gt;</div><div class="line">        &amp;lt;welcome-file&amp;gt;index.html&amp;lt;/welcome-file&amp;gt;</div><div class="line">        &amp;lt;welcome-file&amp;gt;index.htm&amp;lt;/welcome-file&amp;gt;</div><div class="line">        &amp;lt;welcome-file&amp;gt;index.jsp&amp;lt;/welcome-file&amp;gt;</div><div class="line">    &amp;lt;/welcome-file-list&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line">    &amp;lt;!-- JNDI Environment Variables --&amp;gt;</div><div class="line">    &amp;lt;!-- ========================================================== --&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;env-entry&amp;gt;</div><div class="line">        &amp;lt;env-entry-name&amp;gt;webmasterName&amp;lt;/env-entry-name&amp;gt;</div><div class="line">        &amp;lt;env-entry-value&amp;gt;Ms. W. Master&amp;lt;/env-entry-value&amp;gt;</div><div class="line">        &amp;lt;env-entry-type&amp;gt;java.lang.String&amp;lt;/env-entry-type&amp;gt;</div><div class="line">    &amp;lt;/env-entry&amp;gt;</div><div class="line">    &amp;lt;env-entry&amp;gt;</div><div class="line">        &amp;lt;env-entry-name&amp;gt;cms/defaultUserSettings/recordsPerPage&amp;lt;/env-entry-name&amp;gt;</div><div class="line">        &amp;lt;env-entry-value&amp;gt;30&amp;lt;/env-entry-value&amp;gt;</div><div class="line">        &amp;lt;env-entry-type&amp;gt;java.lang.Integer&amp;lt;/env-entry-type&amp;gt;</div><div class="line">    &amp;lt;/env-entry&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- ===========Programmer's virtual name for resource=====================--&amp;gt;</div><div class="line">    &amp;lt;resource-ref&amp;gt;</div><div class="line">        &amp;lt;res-ref-name&amp;gt;jdbc/iass_ds&amp;lt;/res-ref-name&amp;gt;</div><div class="line">        &amp;lt;res-type&amp;gt;javax.sql.DataSource&amp;lt;/res-type&amp;gt;</div><div class="line">        &amp;lt;res-auth&amp;gt;Container&amp;lt;/res-auth&amp;gt;</div><div class="line">        &amp;lt;res-sharing-scope&amp;gt;Shareable&amp;lt;/res-sharing-scope&amp;gt;</div><div class="line">    &amp;lt;/resource-ref&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;resource-env-ref&amp;gt;</div><div class="line">        &amp;lt;resource-env-ref-name&amp;gt;jms/StockQueue&amp;lt;/resource-env-ref-name&amp;gt;</div><div class="line">        &amp;lt;resource-env-ref-type&amp;gt;javax.jms.Queue&amp;lt;/resource-env-ref-type&amp;gt;</div><div class="line">    &amp;lt;/resource-env-ref&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;/web-app&amp;gt;</div></pre></td></tr></table></figure></p>
<p>some confusing tags: &lt;resource-ref&gt;   &lt;resource-env-ref&gt;</p>
<h3 id="ServletContext-ServletConfig"><a href="#ServletContext-ServletConfig" class="headerlink" title="ServletContext, ServletConfig"></a>ServletContext, ServletConfig</h3><p>Basically, ServletContext defines a set of methods that a servlet uses to communicate with its servlet container.</p>
<p>There is one context per “web application” per Java Virtual Machine. (A web application” is a collection of servlets and content installed under a specific subset of the server’s URL namespace such as /catalog and possibly installed via a .war file.)</p>
<p>ServletConfig is used to pass parameters to a servlet during initialization.</p>
<p>its methods include:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">getServletName();</div><div class="line">getServletContext();</div><div class="line">getInitParameter(String name);</div><div class="line">getInitParameterNames();</div></pre></td></tr></table></figure></p>
<p>GenericServlet has implemented ServletConfig interface.</p>
<h3 id="thread-safe-consideration"><a href="#thread-safe-consideration" class="headerlink" title="thread safe consideration"></a>thread safe consideration</h3><p><img src="/media/servlet-lifecycle.jpg" alt="servlet-lifecycle"></p>
<p>Generally, a typical servlet lifecyle creates a single instance of a servlet class, but pools multiple threads to handle the service() method.</p>
<p>So the shared resources like instance variables, helpers must be coded in thread-safe manners.</p>
<h3 id="forward-vs-redirect"><a href="#forward-vs-redirect" class="headerlink" title="forward vs. redirect"></a>forward vs. redirect</h3><p>RequestDispatcher.forward(…), Response.sendRedirect(..)</p>
<p><img src="/media/forward_redirect.png" alt="forward_redirect"></p>
<p>As per what is RequestDespatcher include(), now look at the following test:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DispatcherServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,</span></span></div><div class="line">			HttpServletResponse response) <span class="keyword">throws</span> ServletException, IOException &#123;</div><div class="line"></div><div class="line">		PrintWriter out = response.getWriter();</div><div class="line">		out.println(<span class="string">"In dispatcherServlet &amp;lt;BR&amp;gt;"</span>);</div><div class="line"></div><div class="line">		RequestDispatcher rd = request.getRequestDispatcher(<span class="string">"Hello.jsp"</span>);</div><div class="line">		rd.include(request, response);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>&nbsp;<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=ISO-8859-1"</span></div><div class="line">    pageEncoding=<span class="string">"ISO-8859-1"</span>%&amp;gt;</div><div class="line">&amp;lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&amp;gt;</div><div class="line">&amp;lt;html&amp;gt;</div><div class="line">&amp;lt;head&amp;gt;</div><div class="line">&amp;lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=ISO-8859-1"</span>&amp;gt;</div><div class="line">&amp;lt;title&amp;gt;Insert title here&amp;lt;/title&amp;gt;</div><div class="line">&amp;lt;/head&amp;gt;</div><div class="line">&amp;lt;body&amp;gt;</div><div class="line"></div><div class="line">Hello page. </div><div class="line"></div><div class="line">&amp;lt;/body&amp;gt;</div><div class="line">&amp;lt;/html&amp;gt;</div></pre></td></tr></table></figure></p>
<p>Now the output is:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">In dispatcherServlet</div><div class="line">Hello page</div></pre></td></tr></table></figure></p>
<p>Here we are not hard to know its accurate meaning - including and merging the response content of another servlet, JSP or static resources.</p>
<p><img src="/media/RequestDispatcherInclude.jpg" alt="RequestDispatcherInclude"></p>
<h3 id="JNDI-declaration-tags"><a href="#JNDI-declaration-tags" class="headerlink" title="JNDI declaration tags"></a>JNDI declaration tags</h3><p>We usually use &lt;resource-ref&gt; for DataSource declaration, but there’re also other JNDI object declarations which can be used in servlet application.</p>
<h4 id="lt-env-entry-gt-lt-resource-ref-gt-and-lt-resource-env-ref-gt"><a href="#lt-env-entry-gt-lt-resource-ref-gt-and-lt-resource-env-ref-gt" class="headerlink" title="&lt;env-entry&gt;, &lt;resource-ref&gt; and &lt;resource-env-ref&gt;"></a>&lt;env-entry&gt;, &lt;resource-ref&gt; and &lt;resource-env-ref&gt;</h4><div id="post-body-9135694041141534953" class="post-body entry-content"><br><br><em>   <strong>env-entry</strong> - Environment entry, a single-value parameter that can be used to configure how the application will operate. An example <a href="http://www.cs-repository.info/2014/04/bind-and-lookup-wrapper-objects-using.html" target="_blank" rel="external">here</a>
</em>   <strong>resource-ref</strong> - Resource reference, which is typically to an object factory for resources such as a JDBC DataSource, a JavaMail Session, or custom object factories configured into Tomcat. An example <a href="http://www.cs-repository.info/2014/04/using-jndi-lookup-for-datasource-objects.html" target="_blank" rel="external">here</a><br><em>   <em>*resource-env-ref</em></em> - Resource environment reference, a new variation of resource-ref added in Servlet 2.4 that is simpler to configure for resources that do not require authentication information. An example<a href="http://www.cs-repository.info/2014/04/bind-and-lookup-beans-using-resource_1.html" target="_blank" rel="external">here </a>and <a href="http://www.cs-repository.info/2014/04/bind-and-lookup-beans-using-resource.html" target="_blank" rel="external">here</a>.<br></div>

<h4 id="Environment-Entries"><a href="#Environment-Entries" class="headerlink" title="Environment Entries"></a>Environment Entries</h4><p>For parameter values that may need to change during deployment, it’s better to use environment entries instead, as indicated by the <code>&amp;lt;env-entry&amp;gt;</code> tag.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;env-entry&amp;gt;</div><div class="line">    &amp;lt;description&amp;gt;Send pincode by mail&amp;lt;/description&amp;gt;</div><div class="line">    &amp;lt;env-entry-name&amp;gt;mailPincode&amp;lt;/env-entry-name&amp;gt;</div><div class="line">    &amp;lt;env-entry-value&amp;gt;<span class="keyword">false</span>&amp;lt;/env-entry-value&amp;gt;</div><div class="line">    &amp;lt;env-entry-type&amp;gt;java.lang.Boolean&amp;lt;/env-entry-type&amp;gt;</div><div class="line">&amp;lt;/env-entry&amp;gt;</div></pre></td></tr></table></figure></p>
<p>This is a good way for environment-specific application variables. The type may be a <code>String</code>, <code>Byte</code>, <code>Short</code>, <code>Integer</code>, <code>Long</code>, <code>Boolean</code>, <code>Double</code>, or <code>Float</code> (all with their full <code>java.lang</code> qualification).</p>
<p>Java code can retrieve the <code>&amp;lt;env-entry&amp;gt;</code> values using JNDI:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">Context initCtx = <span class="keyword">new</span> InitialContext( );</div><div class="line">Boolean mailPincode = (Boolean) initCtx.lookup(<span class="string">"java:comp/env/mailPincode"</span>);</div></pre></td></tr></table></figure></p>
<p>Now you could change the variable value in deployment time:</p>
<p><img src="/media/env-entry.png" alt="env-entry"></p>
<h4 id="References-to-External-Resource-Manager-Connection-Factories"><a href="#References-to-External-Resource-Manager-Connection-Factories" class="headerlink" title="References to External Resource Manager Connection Factories"></a>References to External Resource Manager Connection Factories</h4><p>When the environment entry is a resource factory, there’s a <code>&amp;lt;resource-ref&amp;gt;</code> tag to use. A factory is an object that creates other objects on demand. A resource factory creates resource objects, such as database connections or message queues.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;!-- <span class="function">JDBC <span class="title">DataSources</span> <span class="params">(java:comp/env/jdbc)</span> --&amp;gt</span>;</div><div class="line">&amp;lt;resource-ref&amp;gt;</div><div class="line">    &amp;lt;description&amp;gt;The <span class="keyword">default</span> DS&amp;lt;/description&amp;gt;</div><div class="line">    &amp;lt;res-ref-name&amp;gt;jdbc/DefaultDS&amp;lt;/res-ref-name&amp;gt;</div><div class="line">    &amp;lt;res-type&amp;gt;javax.sql.DataSource&amp;lt;/res-type&amp;gt;</div><div class="line">    &amp;lt;res-auth&amp;gt;Container&amp;lt;/res-auth&amp;gt;</div><div class="line">&amp;lt;/resource-ref&amp;gt;</div><div class="line">&amp;lt;!-- <span class="function">JavaMail Connection <span class="title">Factories</span> <span class="params">(java:comp/env/mail)</span> --&amp;gt</span>;</div><div class="line">&amp;lt;resource-ref&amp;gt;</div><div class="line">    &amp;lt;description&amp;gt;Default Mail&amp;lt;/description&amp;gt;</div><div class="line">    &amp;lt;res-ref-name&amp;gt;mail/DefaultMail&amp;lt;/res-ref-name&amp;gt;</div><div class="line">    &amp;lt;res-type&amp;gt;javax.mail.Session&amp;lt;/res-type&amp;gt;</div><div class="line">    &amp;lt;res-auth&amp;gt;Container&amp;lt;/res-auth&amp;gt;</div><div class="line">&amp;lt;/resource-ref&amp;gt;</div><div class="line">&amp;lt;!-- <span class="function">JMS Connection <span class="title">Factories</span> <span class="params">(java:comp/env/jms)</span> --&amp;gt</span>;</div><div class="line">&amp;lt;resource-ref&amp;gt;</div><div class="line">    &amp;lt;description&amp;gt;Default QueueFactory&amp;lt;/description&amp;gt;</div><div class="line">    &amp;lt;res-ref-name&amp;gt;jms/QueueFactory&amp;lt;/res-ref-name&amp;gt;</div><div class="line">    &amp;lt;res-type&amp;gt;javax.jms.QueueConnectionFactory&amp;lt;/res-type&amp;gt;</div><div class="line">    &amp;lt;res-auth&amp;gt;Container&amp;lt;/res-auth&amp;gt;</div><div class="line">&amp;lt;/resource-ref&amp;gt;</div></pre></td></tr></table></figure></p>
<p>It can have two values: <code>CONTAINER</code> or <code>SERVLET</code>. If <code>CONTAINER</code> is specified, the servlet container (the J2EE server) handles authentication before binding the factory to JNDI, using credentials provided by the deployer. If <code>SERVLET</code> is specified, the servlet must handle authentication duties programmatically.</p>
<p>It’s recommended but not required to place the resource factories under a subcontext that describes the resource type:</p>
<ul>
<li><code>jdbc/</code> for a JDBC <code>javax.sql.DataSource</code> factory</li>
<li><code>jms/</code> for a JMS <code>javax.jms.QueueConnectionFactory</code> or <code>javax.jms.TopicConnectionFactory</code></li>
<li><code>mail/</code> for a JavaMail <code>javax.mail.Session</code> factory</li>
<li><code>url/</code> for a <code>java.net.URL</code> factory</li>
</ul>
<h4 id="References-to-Administered-Objects"><a href="#References-to-Administered-Objects" class="headerlink" title="References to Administered Objects"></a>References to Administered Objects</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;resource-env-ref&amp;gt;</div><div class="line">    &amp;lt;description&amp;gt;This is a reference to a JMS queue&amp;lt;/description&amp;gt;</div><div class="line">    &amp;lt;resource-env-ref-name&amp;gt;jms/myqueue&amp;lt;/resource-env-ref-name&amp;gt;</div><div class="line">    &amp;lt;resource-env-ref-type&amp;gt;javax.jms.Queue&amp;lt;/resource-env-ref-type&amp;gt;</div><div class="line">&amp;lt;/resource-env-ref&amp;gt;</div></pre></td></tr></table></figure>
<h4 id="References-to-EJB-Components"><a href="#References-to-EJB-Components" class="headerlink" title="References to EJB Components"></a>References to EJB Components</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;ejb-ref&amp;gt;</div><div class="line">  &amp;lt;description&amp;gt;Cruise ship cabin&amp;lt;/description&amp;gt;</div><div class="line">  &amp;lt;ejb-ref-name&amp;gt;ejb/CabinHome&amp;lt;/ejb-ref-name&amp;gt;</div><div class="line">  &amp;lt;ejb-ref-type&amp;gt;Entity&amp;lt;/ejb-ref-type&amp;gt;</div><div class="line">  &amp;lt;home&amp;gt;com.titan.cabin.CabinHome&amp;lt;/home&amp;gt;</div><div class="line">  &amp;lt;remote&amp;gt;com.titan.cabin.Cabin&amp;lt;/remote&amp;gt;</div><div class="line">&amp;lt;/ejb-ref&amp;gt;</div></pre></td></tr></table></figure>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/30/gof-creational-patterns-singleton-factory-factory-method-abstract-factory/" itemprop="url">
                  GoF Creational Patterns: Singleton, Factory, Factory Method, Abstract Factory
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-03-30T11:13:33+08:00" content="2015-03-30">
              2015-03-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Design-Patterns/" itemprop="url" rel="index">
                    <span itemprop="name">Design Patterns</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/03/30/gof-creational-patterns-singleton-factory-factory-method-abstract-factory/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/03/30/gof-creational-patterns-singleton-factory-factory-method-abstract-factory/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Now, ultimately we start discussing design patterns - really buzzwords.</p>
<h3 id="Singleton"><a href="#Singleton" class="headerlink" title="Singleton"></a>Singleton</h3><p>Singleton pattern is to ensure the unique instance of some class in a JVM.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LazySingleton instance;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</div><div class="line">            instance = <span class="keyword">new</span> LazySingleton();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"doSomething(): Singleton does something!"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// DCL for thread safe</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoubleCheckedLockingLazySingleton</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DoubleCheckedLockingLazySingleton instance;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">DoubleCheckedLockingLazySingleton</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Singleton(): Initializing Instance"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DoubleCheckedLockingLazySingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">synchronized</span> (DoubleCheckedLockingLazySingleton.class) &#123;</div><div class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</div><div class="line">                    System.out.println(<span class="string">"getInstance(): First time getInstance was invoked!"</span>);</div><div class="line">                    instance = <span class="keyword">new</span> DoubleCheckedLockingLazySingleton();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"doSomething(): Singleton does something!"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">EagerSingleton</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> EagerSingleton instance = <span class="keyword">new</span> EagerSingleton();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">EagerSingleton</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Singleton(): Initializing Instance"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> EagerSingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"doSomething(): Singleton does something!"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>You can see there is a DCL(Double-checked-Locking) implementation for lazy initialization. But this clever-seeming may not work. Please refer to <a href="http://www.javaworld.com/article/2074979/java-concurrency/double-checked-locking--clever--but-broken.html" target="_blank" rel="external">Double-checked locking: Clever, but broken</a></p>
<h3 id="Factory"><a href="#Factory" class="headerlink" title="Factory"></a>Factory</h3><p>Factory pattern is very easy to understand.</p>
<h4 id="classic-factory"><a href="#classic-factory" class="headerlink" title="classic factory"></a>classic factory</h4><h4 id=""><a href="#" class="headerlink" title=""></a><img src="https://www.oodesign.com/media/stories/factory%20implementation.gif" alt="Factory Implementation - UML Class Diagram"></h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Product</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProduct</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleFactory</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Product <span class="title">createProduct</span><span class="params">()</span> </span>&#123;</div><div class="line">        Product product = <span class="keyword">new</span> ConcreteProduct();</div><div class="line">        <span class="comment">// do other tasks for initialization</span></div><div class="line">        <span class="keyword">return</span> product;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="conditional-switch-factory"><a href="#conditional-switch-factory" class="headerlink" title="conditional switch factory"></a>conditional switch factory</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnotherConcreteProduct</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConditionalFactory</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Product <span class="title">createProduct</span><span class="params">(String productId)</span> </span>&#123;</div><div class="line">        Product product = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">if</span> (<span class="string">"concreteProduct"</span>.equals(productId)) &#123;</div><div class="line">            product = <span class="keyword">new</span> ConcreteProduct();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (<span class="string">"anotherConcreteProduct"</span>.equals(productId)) &#123;</div><div class="line">            product = <span class="keyword">new</span> AnotherConcreteProduct();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// do other tasks for initialization</span></div><div class="line">        <span class="keyword">return</span> product;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="class-registry-factory"><a href="#class-registry-factory" class="headerlink" title="class registry factory"></a>class registry factory</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductClassRegistryFactory</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> HashMap&amp;lt;String, Class&amp;lt;Product&amp;gt;&amp;gt; registry = <span class="keyword">new</span> HashMap();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerProduct</span><span class="params">(String productID, Class productClass)</span> </span>&#123;</div><div class="line">        registry.put(productID, productClass);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">createProduct</span><span class="params">(String productID)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        Class clazz = (Class) registry.get(productID);</div><div class="line">        Constructor productConstructor = clazz.getDeclaredConstructor(<span class="keyword">new</span> Class[]&#123;String.class&#125;);</div><div class="line">        <span class="keyword">return</span> (Product) productConstructor.newInstance(<span class="keyword">new</span> Object[]&#123;&#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="instance-registry-factory"><a href="#instance-registry-factory" class="headerlink" title="instance registry factory"></a>instance registry factory</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// For registeration on its own</span></div><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">SelfRegisterableProduct</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Product <span class="title">createProduct</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">OneProduct</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> &#123;</div><div class="line">        <span class="keyword">new</span> ProductRegistryFactory().registerProduct(<span class="string">"ID1"</span>, <span class="keyword">new</span> OneProduct());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> OneProduct <span class="title">createProduct</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> OneProduct();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductRegistryFactory</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> HashMap&amp;lt;String, Product&amp;gt; registry = <span class="keyword">new</span> HashMap();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerProduct</span><span class="params">(String productID, Product p)</span> </span>&#123;</div><div class="line">        registry.put(productID, p);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">createProduct</span><span class="params">(String productID)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> ((SelfRegisterableProduct) registry.get(productID)).createProduct();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Factory-Method"><a href="#Factory-Method" class="headerlink" title="Factory Method"></a>Factory Method</h3><p>Factory method is really no difference as a variant of factory pattern. It makes the factory as abstract class instead of implementing the creation logic in itself.</p>
<p><img src="https://www.oodesign.com/media/stories/factory%20method%20implementation%20-%20uml%20class%20diagram.gif" alt="Factory Method Implementation - UML Class Diagram"></p>
<p>A concrete factory is responsible for a kind of concrete product.</p>
<h3 id="Abstract-Factory"><a href="#Abstract-Factory" class="headerlink" title="Abstract Factory"></a>Abstract Factory</h3><p>Simply speaking, abstract factory is responsible for the creation of a family of products. So it provides multiple methods to create several related products of different types.</p>
<p><img src="https://www.oodesign.com/media/creational/abstract-factory-pattern.png" alt="Abstract Factory Implementation - UML Class Diagram"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/24/generics-revisit/" itemprop="url">
                  Generics revisit
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-03-24T14:15:50+08:00" content="2015-03-24">
              2015-03-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Generics/" itemprop="url" rel="index">
                    <span itemprop="name">Generics</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/03/24/generics-revisit/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/03/24/generics-revisit/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Generics is an important feature since JDK 1.5</p>
<h3 id="subtyping-and-wildcards"><a href="#subtyping-and-wildcards" class="headerlink" title="subtyping and wildcards"></a>subtyping and wildcards</h3><p><table style="height: 152px;" width="393"></table></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<p><td>Integer</td></p>
<p><td>is a subtype of</td></p>
<p><td>Number</td><br></p>
<p><tr></tr></p>
<p><td>Double</td></p>
<p><td>is a subtype of</td></p>
<p><td>Number</td><br></p>
<p><tr></tr></p>
<p><td>ArrayList&lt;E&gt;</td></p>
<p><td>is a subtype of</td></p>
<p><td>List&lt;E&gt;</td><br></p>
<p><tr></tr></p>
<p><td>List&lt;E&gt;</td></p>
<p><td>is a subtype of</td></p>
<p><td>Collection&lt;E&gt;</td><br></p>
<p><tr></tr></p>
<p><td>Collection&lt;E&gt;</td></p>
<p><td>is a subtype of</td></p>
<p><td>Iterable&lt;E&gt;</td><br></p>
<p><tr></tr></p>
<p><td>Long[]</td></p>
<p><td>is a subtype of</td></p>
<p><td>Number[]</td><br></p>
<p><tr></tr></p>
<p><td>List&lt;Integer&gt;</td></p>
<p><td>is <strong>NOT</strong> a subtype of</td></p>
<p><td>List&lt;Number&gt;</td><br><br><br><br>In Java, array subtyping is <strong><em>covariant</em></strong>, meaning that type S[] is considered to be a subtype of T[] whenever S is a subtype of T.</p>
<p>In contrast, the subtyping relation for generics is <strong><em>invariant</em></strong>, meaning that type List&lt;S&gt; is _not _considered to be a subtype of List&lt;T&gt;, except in the trivial case where S and T are identical.</p>
<p>So now it’s what the wildcards for.</p>
<ul>
<li>Wildcards reintroduce <strong>covariant</strong> subtyping for generics, in that type List&lt;S&gt; _is _considered to be a subtype of List&lt;? extends T&gt; when S is a subtype of T.</li>
<li>Wildcards also introduce _<strong>contravariant</strong> _subtyping for generics, in that type List&lt;S&gt; is considered to be a _subtype _of List&lt;? super T&gt; when S is a _supertype _of T.<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">List&amp;lt;? extends Number&amp;gt; list = <span class="keyword">new</span> ArrayList&amp;lt;Integer&amp;gt;;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>The question mark is called a <em>wildcard</em>, since it stands for some type that is a subtype of E.</p>
<p>&nbsp;</p>
<p>You can always consider the generic class with wildcard as a family of generic classes.</p>
<p>For example,</p>
<p>Collection&lt;? extends Fruit&gt; is a family of generic classes: Collection&lt;Fruit&gt;, Collection&lt;Apple&gt;, Collection&lt;Orange&gt;…</p>
<p>Collection&lt;? super Apple&gt; is a family of generic classes: Collection&lt;Apple&gt;, Collection&lt;Fruit&gt;, Collection&lt;Plant&gt;…</p>
<h4 id="Get-and-Put-principal"><a href="#Get-and-Put-principal" class="headerlink" title="Get and Put principal"></a>Get and Put principal</h4><p>Some tutorals said:</p>
<blockquote>
<p><em>The Get and Put Principle</em>: use an extends wildcard when you only _get _values out of a structure, use a super wildcard when you only _put _values into a structure, and don’t use a wildcard when you _both _get and put.<br>I think this has a little flaw. Actually, get and put is just a too vague expression. For instance, the remove() method of List interface is get or set?</p>
</blockquote>
<p>So more general means is by using reasoning.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericClass</span>&amp;<span class="title">lt</span></span>;T&amp;gt; &#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">foo</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bar</span><span class="params">(T a)</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        GenericClass&amp;lt;? extends Fruit&amp;gt; g1 = <span class="keyword">new</span> GenericClass&amp;lt;Fruit&amp;gt;();</div><div class="line">        Fruit fruit = g1.foo();</div><div class="line">        Plant plant = g1.foo();</div><div class="line">        Creature creature = g1.foo();</div><div class="line"></div><div class="line">        GenericClass&amp;lt;? <span class="keyword">super</span> Fruit&amp;gt; g2 = <span class="keyword">new</span> GenericClass&amp;lt;Fruit&amp;gt;();</div><div class="line">        g2.bar(<span class="keyword">new</span> Fruit());</div><div class="line">        g2.bar(<span class="keyword">new</span> Apple());</div><div class="line">        g2.bar(<span class="keyword">new</span> RoyalGala());</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Creature</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Plant</span> <span class="keyword">extends</span> <span class="title">Creature</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fruit</span> <span class="keyword">extends</span> <span class="title">Plant</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Apple</span> <span class="keyword">extends</span> <span class="title">Fruit</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RoyalGala</span> <span class="keyword">extends</span> <span class="title">Apple</span> </span>&#123;&#125;</div></pre></td></tr></table></figure></p>
<p>In the above code, we have a deep hierarchy. But all the rule is based on this:</p>
<ul>
<li>&lt;? extend Fruit&gt; means it is some fruit sub type, maybe Fruit, Apple or RoyalGala.</li>
<li>&lt;? super Fruit&gt; means it is some fruit super type, maybe Fruit, Plant or Creature.<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;? extends Fruit&amp;gt; a = ...;</div><div class="line">Apple aa = a; <span class="comment">// wrong, if a is really a fruit? downcast failed</span></div><div class="line">RoyalGala aaa = a; <span class="comment">// wrong, if a is really a apple? downcast failed</span></div><div class="line">Fruit aa = a; <span class="comment">// ok, whatever a is fruit, apple or royal gala.</span></div><div class="line">Plant aaa = a; <span class="comment">// ok, whatever a is fruit, apple or royal gala.</span></div><div class="line">Creature aaaa = a; <span class="comment">// ok, whatever a is fruit, apple or royal gala.</span></div><div class="line"></div><div class="line">&amp;lt;? <span class="keyword">super</span> Fruit&amp;gt; b = ...;</div><div class="line">b = <span class="keyword">new</span> Plant(); <span class="comment">// wrong, if b is really a fruit? downcast failed</span></div><div class="line">b = <span class="keyword">new</span> Creature(); <span class="comment">// wrong, if b is really a plant? downcast failed</span></div><div class="line">b = <span class="keyword">new</span> Fruit(); <span class="comment">// ok, whatever b is fruit, plant or royal gala.</span></div><div class="line">b = <span class="keyword">new</span> Apple(); <span class="comment">// ok, whatever b is fruit, plant or royal gala.</span></div><div class="line">b = <span class="keyword">new</span> RoyalGala(); <span class="comment">// ok, whatever b is fruit, apple or royal gala.</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>From the above pseudo code, we know how the compiler do reasoning. As per uncertain things the compiler cannot ensure, the compilation will fail naturally.</p>
<p>So for g1.foo(), compiler infer to return &lt;? extends Fruit&gt; type, but this is just a parameterize type, which cannot exist standalone. But the compiler can ensure the assignment to Fruit/Plant/Creature variable is safe.</p>
<p>That’s it!</p>
<h4 id="wildcard-capture"><a href="#wildcard-capture" class="headerlink" title="wildcard capture"></a>wildcard capture</h4><p>//todo</p>
<h4 id="constraints-on-wildcards"><a href="#constraints-on-wildcards" class="headerlink" title="constraints on wildcards"></a>constraints on wildcards</h4><ul>
<li>instance creation<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">List&amp;lt;?&amp;gt; list = <span class="keyword">new</span> ArrayList&amp;lt;?&amp;gt;(); <span class="comment">// compile-time error</span></div><div class="line">Map&amp;lt;String, ? extends Number&amp;gt; map = <span class="keyword">new</span> HashMap&amp;lt;String, ? extends Number&amp;gt;(); <span class="comment">// compile-time error</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>&nbsp;</p>
<ul>
<li>generic method calls<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">List&amp;lt;?&amp;gt; list = Lists.&amp;lt;?&amp;gt;factory(); <span class="comment">// compile-time error</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="bounds"><a href="#bounds" class="headerlink" title="bounds"></a>bounds</h3><p>&nbsp;</p>
<h3 id="bridge-method"><a href="#bridge-method" class="headerlink" title="bridge method"></a>bridge method</h3>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/24/widen-cast-vs-narrow-cast/" itemprop="url">
                  widen cast vs. narrow cast
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-03-23T20:37:24+08:00" content="2015-03-23">
              2015-03-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Basics/" itemprop="url" rel="index">
                    <span itemprop="name">Basics</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/03/24/widen-cast-vs-narrow-cast/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/03/24/widen-cast-vs-narrow-cast/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/24/string-class-text-formatting/" itemprop="url">
                  String class, text formatting
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-03-23T20:28:12+08:00" content="2015-03-23">
              2015-03-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Basics/" itemprop="url" rel="index">
                    <span itemprop="name">Basics</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/03/24/string-class-text-formatting/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/03/24/string-class-text-formatting/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="working-with-String-class"><a href="#working-with-String-class" class="headerlink" title="working with String class"></a>working with String class</h3><p>String is most frequently used class in Java.</p>
<h4 id="immutable-and-flyweight-design"><a href="#immutable-and-flyweight-design" class="headerlink" title="immutable and flyweight design"></a>immutable and flyweight design</h4><p>String is immutable</p>
<p>String is designed with the Flyweight design pattern. A pool of Strings is maintained by the String class.</p>
<h5 id="pool-of-Strings-and-intern"><a href="#pool-of-Strings-and-intern" class="headerlink" title="pool of Strings and intern()"></a>pool of Strings and intern()</h5><p>You can always get the string in the pool by invoking <em><strong>intern()</strong>.</em></p>
<p>For any two Strings s1 &amp; s2, <em>s1.intern( ) </em>== _s2.intern( ) _only if _s1.equals(s2) _is true.</p>
<p>All literal strings and string-valued constant expressions are interned.</p>
<p><img src="/media/string-intern.png" alt="string-intern"></p>
<p>For more details about intern(), please refer to <a href="http://java-performance.info/string-intern-in-java-6-7-8/" target="_blank" rel="external">http://java-performance.info/string-intern-in-java-6-7-8/</a></p>
<h4 id="stings-concatenation"><a href="#stings-concatenation" class="headerlink" title="stings concatenation"></a>stings concatenation</h4><ul>
<li>Use plus (“+”) operator for concatenating constants.</li>
<li>Use _concat( ) _method for concatenating 2 string variables.</li>
<li>Use _StringBuilder _or _StringBuffer _for concatenating a number of _String _variables, and most importantly in loops.</li>
<li>Prefer _StringBuilder _to _StringBuffer _unless multiple threads can have access to it.<br>Notice:  Plus operator is more efficient than the other two as the JVM optimizes constants.</li>
</ul>
<h3 id="Text-formatting"><a href="#Text-formatting" class="headerlink" title="Text formatting"></a>Text formatting</h3><p>In Java, it’s convenient to format something as text representations.</p>
<h4 id="printf-style-formatting"><a href="#printf-style-formatting" class="headerlink" title="printf-style formatting"></a>printf-style formatting</h4><p>This is supported by java.util.Formatter class.</p>
<p>Some class uses this Formatter indirectly:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">System.out.printf(String, Object...)</div><div class="line">String.format(String, Object...)</div></pre></td></tr></table></figure></p>
<h4 id="java-text-Format-family"><a href="#java-text-Format-family" class="headerlink" title="java.text.Format family"></a>java.text.Format family</h4><p>Format</p>
<p>|— NumberFormat</p>
<p>|— ChoiceFormat</p>
<p>|— DecimalFormat</p>
<p>|— DateFormat</p>
<p>|— SimpleDateFormat</p>
<p>|— MessageFormat</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/24/cloning-objects/" itemprop="url">
                  cloning objects
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-03-23T20:26:14+08:00" content="2015-03-23">
              2015-03-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Basics/" itemprop="url" rel="index">
                    <span itemprop="name">Basics</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/03/24/cloning-objects/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/03/24/cloning-objects/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Java has built-in support for shadow copy by Object.clone() and Cloneable interface.</p>
<h3 id="shadow-copy"><a href="#shadow-copy" class="headerlink" title="shadow copy"></a>shadow copy</h3><p><strong>This is default implementation in java</strong>.</p>
<p>Object class has a method named clone(), but if we’d like to succeed with this built-in cloning capability, we need to use Cloneable marker interface.</p>
<p>The method performs a specific cloning operation. If the class of this object does not implement the interface, then a CloneNotSupportedException is thrown.</p>
<p>Note that all arrays are considered to implement the interface Cloneable.</p>
<p><strong>By default, java cloning is ‘field by field copy’</strong> i.e. as the <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html" title="Object class" target="_blank" rel="external">Object</a> class does not have idea about the structure of class on which <a href="http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#clone%28%29" title="clone method in object class" target="_blank" rel="external">clone()</a> method will be invoked. So, JVM when called for cloning, do following things:</p>
<p><strong>1)</strong> If the class has <strong>only primitive data type members</strong> then a completely new copy of the object will be created and the reference to the <strong>new object copy will be returned</strong>.</p>
<p><strong>2)</strong> If the class contains <strong>members of any class type</strong> then only the object references to those members are copied and hence the <strong>member references in both the original object as well as the cloned object refer to the same object</strong>.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> basics;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Clones</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testClone</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        Employee emp = <span class="keyword">new</span> Employee(<span class="number">1</span>, <span class="string">"Jack"</span>, <span class="keyword">new</span> Department(<span class="number">2</span>, <span class="string">"HR"</span>));</div><div class="line">        Employee clone = (Employee)emp.clone();</div><div class="line"></div><div class="line">        assertTrue(emp.empoyeeId == clone.empoyeeId); <span class="comment">// true</span></div><div class="line">        assertTrue(emp.employeeName == clone.employeeName); <span class="comment">// true</span></div><div class="line">        assertTrue(emp.department == clone.department); <span class="comment">// true</span></div><div class="line"></div><div class="line">        Department dept = <span class="keyword">new</span> Department(<span class="number">1</span>, <span class="string">"IT"</span>);</div><div class="line">        <span class="comment">// throw CloneNotSupportedException, as Department hasn't implement Cloneable</span></div><div class="line">        Department deptClone = (Department)dept.clone();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">implements</span> <span class="title">Cloneable</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> empoyeeId;</div><div class="line">    <span class="keyword">protected</span> String employeeName;</div><div class="line">    <span class="keyword">protected</span> Department department;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(<span class="keyword">int</span> id, String name, Department dept)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">this</span>.empoyeeId = id;</div><div class="line">        <span class="keyword">this</span>.employeeName = name;</div><div class="line">        <span class="keyword">this</span>.department = dept;</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.clone();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//Accessor/mutators methods will go there</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Department</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> id;</div><div class="line">    <span class="keyword">protected</span> String name;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Department</span><span class="params">(<span class="keyword">int</span> id, String name)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">this</span>.id = id;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//Accessor/mutators methods will go there</span></div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.clone();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="deep-copy"><a href="#deep-copy" class="headerlink" title="deep copy"></a>deep copy</h3><p>In most of time, default clone mechanism is enough for us. But in some special case, we need real deep copy.</p>
<p>There are several method you can achieve this aim.</p>
<h4 id="overriding-clone-method-and-write-your-own"><a href="#overriding-clone-method-and-write-your-own" class="headerlink" title="overriding clone() method and write your own"></a>overriding clone() method and write your own</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">//Modified clone() method in Employee class</span></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</div><div class="line">    Employee cloned = (Employee)<span class="keyword">super</span>.clone();</div><div class="line">    cloned.setDepartment((Department)cloned.getDepartment().clone());</div><div class="line">    <span class="keyword">return</span> cloned;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="in-memory-serialization"><a href="#in-memory-serialization" class="headerlink" title="in-memory serialization"></a>in-memory serialization</h4><p>This method is for Serializable object.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span>  T <span class="title">cloneThroughSerialize</span><span class="params">(T t)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">   ByteArrayOutputStream bos = <span class="keyword">new</span> ByteArrayOutputStream();</div><div class="line">   serializeToOutputStream(t, bos);</div><div class="line">   <span class="keyword">byte</span>[] bytes = bos.toByteArray();</div><div class="line">   ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> ByteArrayInputStream(bytes));</div><div class="line">   <span class="keyword">return</span> (T)ois.readObject();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">serializeToOutputStream</span><span class="params">(Serializable ser, OutputStream os)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">   ObjectOutputStream oos = <span class="keyword">null</span>;</div><div class="line">   <span class="keyword">try</span> &#123;</div><div class="line">      oos = <span class="keyword">new</span> ObjectOutputStream(os);</div><div class="line">      oos.writeObject(ser);</div><div class="line">      oos.flush();</div><div class="line">   &#125; <span class="keyword">finally</span> &#123;</div><div class="line">      oos.close();</div><div class="line">   &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// using our custom method</span></div><div class="line">Object cloned = cloneThroughSerialize (someObject);</div><div class="line"></div><div class="line"><span class="comment">// or with Apache Commons</span></div><div class="line">cloned = org.apache.commons.lang. SerializationUtils.clone(someObject);</div></pre></td></tr></table></figure></p>
<h4 id="options-for-non-Serializable-object"><a href="#options-for-non-Serializable-object" class="headerlink" title="options for non Serializable object"></a>options for non Serializable object</h4><p>But what if the class we want to clone isn’t Serializable and we have no control over the source code or can’t make it Serializable?</p>
<p><strong>Option 1 – Java Deep Cloning Library</strong></p>
<p>There’s a nice little library which can deep clone virtually any Java Object – <a href="http://code.google.com/p/cloning/" title="Java Deep Cloning library" target="_blank" rel="external">cloning</a>. It takes advantage of Java’s excellent reflection capabilities to provide optimized deep-cloned versions of objects.</p>
<div id="highlighter_808936" class="syntaxhighlighter "><br><div class="bar"><br><div class="toolbar"><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">Cloner cloner=<span class="keyword">new</span> Cloner();</div><div class="line">Object cloned = cloner.deepClone(someObject);</div></pre></td></tr></table></figure><br><br><strong>Option 2 – JSON Cloning</strong><br><br>This is very useful and straightforward, especially now JDK 7 has the out-of-the-box JSON library support - Java API for JSON Processing (<a href="http://jcp.org/en/jsr/detail?id=353" target="_blank" rel="external">JSR 353</a>) .<br><br>&nbsp;<br><br></div><br></div><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/23/java-modifiers-revist/" itemprop="url">
                  java modifiers revisit
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-03-23T12:31:07+08:00" content="2015-03-23">
              2015-03-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Basics/" itemprop="url" rel="index">
                    <span itemprop="name">Basics</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/03/23/java-modifiers-revist/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/03/23/java-modifiers-revist/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="acess-control-modifiers"><a href="#acess-control-modifiers" class="headerlink" title="acess control modifiers"></a>acess control modifiers</h3><p>In Java, there are four different types of access modifiers for fields and methods:</p>
<ul>
<li>public: every class can access the element</li>
<li>protected: only subclasses and classes in the same package can access the element</li>
<li>default: only classes in the same package can access the element</li>
<li>private: only this class can access the element</li>
</ul>
<h4 id="what-does-accessing-mean"><a href="#what-does-accessing-mean" class="headerlink" title="what does accessing mean?"></a>what does accessing mean?</h4><p>Accessing means you can refer. As in java only class can be the top-level element, thus top-level class access just use its name without a prefix. But for other enclosed elements like fields(instance or class), methods(instance or class), inner classes(member, local or anonymous class), nested classes/interfaces, you must access them with a prefix(class name or instance name) explicitly or implicitly if possible.</p>
<h4 id="where-does-accessing-happen"><a href="#where-does-accessing-happen" class="headerlink" title="where does accessing happen?"></a>where does accessing happen?</h4><p>Many places are where accessing happen, including instance field assignments, intialization blocks, static field assignments, static intialization blocks, instance methods, static methods(class methods), inner class definition body, nested class definition body…<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> accessing.somepackage;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> private_instance_field = <span class="number">1</span>;</div><div class="line">    <span class="keyword">long</span> package_instance_field = <span class="number">2l</span>;</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">double</span> protected_instance_field = <span class="number">2.0</span>;</div><div class="line">    <span class="keyword">public</span> String public_instance_field = <span class="string">"d"</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">private_instance_method</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">package_instance_method</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">protected_instance_method</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">public_instance_method</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> private_class_field = <span class="number">1</span>;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">long</span> package_class_field = <span class="number">2l</span>;</div><div class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">double</span> protected_class_field = <span class="number">3.0</span>;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String public_class_field = <span class="string">"h"</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">private_class_method</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">package_class_method</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">protected_class_method</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">public_class_method</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Private_instance_inner_class_A</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Package_instance_inner_class_B</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="keyword">protected</span> <span class="class"><span class="keyword">class</span> <span class="title">Protected_instance_inner_class_C</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Public_instance_inner_class_D</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Private_class_nested_class_A</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Package_class_nested_class_B</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Protected_class_nested_class_C</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Public_class_nested_class_D</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAccessInInstanceMethod</span><span class="params">()</span> </span>&#123;</div><div class="line">        Object o = <span class="keyword">null</span>;</div><div class="line">        o = BaseClass.private_class_field;</div><div class="line">        o = BaseClass.package_class_field;</div><div class="line">        o = BaseClass.protected_class_field;</div><div class="line">        o = BaseClass.public_class_field;</div><div class="line">        BaseClass.private_class_method();</div><div class="line">        BaseClass.package_class_method();</div><div class="line">        BaseClass.protected_class_method();</div><div class="line">        BaseClass.public_class_method();</div><div class="line"></div><div class="line">        Private_instance_inner_class_A a = <span class="keyword">null</span>;</div><div class="line">        Package_instance_inner_class_B b = <span class="keyword">null</span>;</div><div class="line">        Protected_instance_inner_class_C c = <span class="keyword">null</span>;</div><div class="line">        Public_instance_inner_class_D d = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        Package_class_nested_class_B aa = <span class="keyword">null</span>;</div><div class="line">        Package_class_nested_class_B bb = <span class="keyword">null</span>;</div><div class="line">        Protected_class_nested_class_C cc = <span class="keyword">null</span>;</div><div class="line">        Public_class_nested_class_D dd = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        <span class="comment">//////////////////////////////////////////</span></div><div class="line">        BaseClass base = <span class="keyword">new</span> BaseClass();</div><div class="line">        o = base.private_instance_field;</div><div class="line">        o = base.package_instance_field;</div><div class="line">        o = base.protected_instance_field;</div><div class="line">        o = base.public_instance_field;</div><div class="line">        base.private_instance_method();</div><div class="line">        base.package_instance_method();</div><div class="line">        base.protected_instance_method();</div><div class="line">        base.public_instance_method();</div><div class="line"></div><div class="line">        o = base.private_class_field;</div><div class="line">        o = base.package_class_field;</div><div class="line">        o = base.protected_class_field;</div><div class="line">        o = base.public_class_field;</div><div class="line">        base.private_class_method();</div><div class="line">        base.package_class_method();</div><div class="line">        base.protected_class_method();</div><div class="line">        base.public_class_method();</div><div class="line"></div><div class="line">        <span class="comment">///////////////////////////////</span></div><div class="line">        o = <span class="keyword">this</span>.private_instance_field;</div><div class="line">        o = <span class="keyword">this</span>.package_instance_field;</div><div class="line">        o = <span class="keyword">this</span>.protected_instance_field;</div><div class="line">        o = <span class="keyword">this</span>.public_instance_field;</div><div class="line">        <span class="keyword">this</span>.private_instance_method();</div><div class="line">        <span class="keyword">this</span>.package_instance_method();</div><div class="line">        <span class="keyword">this</span>.protected_instance_method();</div><div class="line">        <span class="keyword">this</span>.public_instance_method();</div><div class="line"></div><div class="line">        o = <span class="keyword">this</span>.private_class_field;</div><div class="line">        o = <span class="keyword">this</span>.package_class_field;</div><div class="line">        o = <span class="keyword">this</span>.protected_class_field;</div><div class="line">        o = <span class="keyword">this</span>.public_class_field;</div><div class="line">        <span class="keyword">this</span>.private_class_method();</div><div class="line">        <span class="keyword">this</span>.package_class_method();</div><div class="line">        <span class="keyword">this</span>.protected_class_method();</div><div class="line">        <span class="keyword">this</span>.public_class_method();</div><div class="line"></div><div class="line">        Private_instance_inner_class_A aaa = <span class="keyword">null</span>;</div><div class="line">        Package_instance_inner_class_B bbb = <span class="keyword">null</span>;</div><div class="line">        Protected_instance_inner_class_C ccc = <span class="keyword">null</span>;</div><div class="line">        Public_instance_inner_class_D ddd = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        Private_class_nested_class_A aaaa = <span class="keyword">null</span>;</div><div class="line">        Package_class_nested_class_B bbbb = <span class="keyword">null</span>;</div><div class="line">        Protected_class_nested_class_C cccc = <span class="keyword">null</span>;</div><div class="line">        Public_class_nested_class_D dddd = <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testAccessInClassMethod</span><span class="params">()</span> </span>&#123;</div><div class="line">        Object o = <span class="keyword">null</span>;</div><div class="line">        o = BaseClass.private_class_field;</div><div class="line">        o = BaseClass.package_class_field;</div><div class="line">        o = BaseClass.protected_class_field;</div><div class="line">        o = BaseClass.public_class_field;</div><div class="line">        BaseClass.private_class_method();</div><div class="line">        BaseClass.package_class_method();</div><div class="line">        BaseClass.protected_class_method();</div><div class="line">        BaseClass.public_class_method();</div><div class="line"></div><div class="line">        Private_instance_inner_class_A a = <span class="keyword">null</span>;</div><div class="line">        Package_instance_inner_class_B b = <span class="keyword">null</span>;</div><div class="line">        Protected_instance_inner_class_C c = <span class="keyword">null</span>;</div><div class="line">        Public_instance_inner_class_D d = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        Package_class_nested_class_B aa = <span class="keyword">null</span>;</div><div class="line">        Package_class_nested_class_B bb = <span class="keyword">null</span>;</div><div class="line">        Protected_class_nested_class_C cc = <span class="keyword">null</span>;</div><div class="line">        Public_class_nested_class_D dd = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        <span class="comment">//////////////////////////////////////////</span></div><div class="line">        BaseClass base = <span class="keyword">new</span> BaseClass();</div><div class="line">        o = base.private_instance_field;</div><div class="line">        o = base.package_instance_field;</div><div class="line">        o = base.protected_instance_field;</div><div class="line">        o = base.public_instance_field;</div><div class="line">        base.private_instance_method();</div><div class="line">        base.package_instance_method();</div><div class="line">        base.protected_instance_method();</div><div class="line">        base.public_instance_method();</div><div class="line"></div><div class="line">        o = base.private_class_field;</div><div class="line">        o = base.package_class_field;</div><div class="line">        o = base.protected_class_field;</div><div class="line">        o = base.public_class_field;</div><div class="line">        base.private_class_method();</div><div class="line">        base.package_class_method();</div><div class="line">        base.protected_class_method();</div><div class="line">        base.public_class_method();</div><div class="line"></div><div class="line">        <span class="comment">//////////////////////////////////////////</span></div><div class="line">        o = private_class_field;</div><div class="line">        o = package_class_field;</div><div class="line">        o = protected_class_field;</div><div class="line">        o = public_class_field;</div><div class="line">        private_class_method();</div><div class="line">        package_class_method();</div><div class="line">        protected_class_method();</div><div class="line">        public_class_method();</div><div class="line"></div><div class="line">        Private_instance_inner_class_A aaa = <span class="keyword">null</span>;</div><div class="line">        Package_instance_inner_class_B bbb = <span class="keyword">null</span>;</div><div class="line">        Protected_instance_inner_class_C ccc = <span class="keyword">null</span>;</div><div class="line">        Public_instance_inner_class_D ddd = <span class="keyword">null</span>;</div><div class="line">        Private_class_nested_class_A aaaa = <span class="keyword">null</span>;</div><div class="line">        Package_class_nested_class_B bbbb = <span class="keyword">null</span>;</div><div class="line">        Protected_class_nested_class_C cccc = <span class="keyword">null</span>;</div><div class="line">        Public_class_nested_class_D dddd = <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>&nbsp;<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> accessing.somepackage;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PackageClass</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAccessInInstanceMethod</span><span class="params">()</span> </span>&#123;</div><div class="line">        Object o = <span class="keyword">null</span>;</div><div class="line">        o = BaseClass.package_class_field;</div><div class="line">        o = BaseClass.protected_class_field;</div><div class="line">        o = BaseClass.public_class_field;</div><div class="line">        BaseClass.package_class_method();</div><div class="line">        BaseClass.protected_class_method();</div><div class="line">        BaseClass.public_class_method();</div><div class="line"></div><div class="line">        BaseClass.Package_instance_inner_class_B b = <span class="keyword">null</span>;</div><div class="line">        BaseClass.Protected_instance_inner_class_C c = <span class="keyword">null</span>;</div><div class="line">        BaseClass.Public_instance_inner_class_D d = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        BaseClass.Package_class_nested_class_B bb = <span class="keyword">null</span>;</div><div class="line">        BaseClass.Protected_class_nested_class_C cc = <span class="keyword">null</span>;</div><div class="line">        BaseClass.Public_class_nested_class_D dd = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        <span class="comment">//////////////////////////////////////////</span></div><div class="line">        BaseClass base = <span class="keyword">new</span> BaseClass();</div><div class="line">        o = base.package_instance_field;</div><div class="line">        o = base.protected_instance_field;</div><div class="line">        o = base.public_instance_field;</div><div class="line">        base.package_instance_method();</div><div class="line">        base.protected_instance_method();</div><div class="line">        base.public_instance_method();</div><div class="line"></div><div class="line">        o = base.package_class_field;</div><div class="line">        o = base.protected_class_field;</div><div class="line">        o = base.public_class_field;</div><div class="line">        base.package_class_method();</div><div class="line">        base.protected_class_method();</div><div class="line">        base.public_class_method();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testAccessInClassMethod</span><span class="params">()</span> </span>&#123;</div><div class="line">        Object o = <span class="keyword">null</span>;</div><div class="line">        o = BaseClass.package_class_field;</div><div class="line">        o = BaseClass.protected_class_field;</div><div class="line">        o = BaseClass.public_class_field;</div><div class="line">        BaseClass.package_class_method();</div><div class="line">        BaseClass.protected_class_method();</div><div class="line">        BaseClass.public_class_method();</div><div class="line"></div><div class="line">        BaseClass.Package_instance_inner_class_B b = <span class="keyword">null</span>;</div><div class="line">        BaseClass.Protected_instance_inner_class_C c = <span class="keyword">null</span>;</div><div class="line">        BaseClass.Public_instance_inner_class_D d = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        BaseClass.Package_class_nested_class_B bb = <span class="keyword">null</span>;</div><div class="line">        BaseClass.Protected_class_nested_class_C cc = <span class="keyword">null</span>;</div><div class="line">        BaseClass.Public_class_nested_class_D dd = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        <span class="comment">//////////////////////////////////////////</span></div><div class="line">        BaseClass base = <span class="keyword">new</span> BaseClass();</div><div class="line">        o = base.package_instance_field;</div><div class="line">        o = base.protected_instance_field;</div><div class="line">        o = base.public_instance_field;</div><div class="line">        base.package_instance_method();</div><div class="line">        base.protected_instance_method();</div><div class="line">        base.public_instance_method();</div><div class="line"></div><div class="line">        o = base.package_class_field;</div><div class="line">        o = base.protected_class_field;</div><div class="line">        o = base.public_class_field;</div><div class="line">        base.package_class_method();</div><div class="line">        base.protected_class_method();</div><div class="line">        base.public_class_method();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>&nbsp;<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> accessing;</div><div class="line"></div><div class="line"><span class="keyword">import</span> accessing.somepackage.BaseClass;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InheritedClass</span> <span class="keyword">extends</span> <span class="title">BaseClass</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAccessInInstanceMethod</span><span class="params">()</span> </span>&#123;</div><div class="line">        Object o = <span class="keyword">null</span>;</div><div class="line">        o = BaseClass.protected_class_field;</div><div class="line">        o = BaseClass.public_class_field;</div><div class="line">        BaseClass.protected_class_method();</div><div class="line">        BaseClass.public_class_method();</div><div class="line"></div><div class="line">        Protected_instance_inner_class_C c = <span class="keyword">null</span>;</div><div class="line">        Public_instance_inner_class_D d = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        Protected_class_nested_class_C cc = <span class="keyword">null</span>;</div><div class="line">        Public_class_nested_class_D dd = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        <span class="comment">//////////////////////////////////////////</span></div><div class="line">        BaseClass base = <span class="keyword">new</span> BaseClass();</div><div class="line"><span class="comment">//        o = base.protected_instance_field;</span></div><div class="line">        o = base.public_instance_field;</div><div class="line"><span class="comment">//        base.protected_instance_method();</span></div><div class="line">        base.public_instance_method();</div><div class="line"></div><div class="line">        o = base.protected_class_field;</div><div class="line">        o = base.public_class_field;</div><div class="line">        base.protected_class_method();</div><div class="line">        base.public_class_method();</div><div class="line"></div><div class="line">        <span class="comment">//////////////////////////////////////////</span></div><div class="line">        o = <span class="keyword">this</span>.protected_instance_field;</div><div class="line">        o = <span class="keyword">this</span>.public_instance_field;</div><div class="line">        <span class="keyword">this</span>.protected_instance_method();</div><div class="line">        <span class="keyword">this</span>.public_instance_method();</div><div class="line"></div><div class="line">        o = <span class="keyword">this</span>.protected_class_field;</div><div class="line">        o = <span class="keyword">this</span>.public_class_field;</div><div class="line">        <span class="keyword">this</span>.protected_class_method();</div><div class="line">        <span class="keyword">this</span>.public_class_method();</div><div class="line"></div><div class="line">        Protected_instance_inner_class_C ccc = <span class="keyword">null</span>;</div><div class="line">        Public_instance_inner_class_D ddd = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        Protected_class_nested_class_C cccc = <span class="keyword">null</span>;</div><div class="line">        Public_class_nested_class_D dddd = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testAccessInClassMethod</span><span class="params">()</span> </span>&#123;</div><div class="line">        Object o = <span class="keyword">null</span>;</div><div class="line">        o = BaseClass.protected_class_field;</div><div class="line">        o = BaseClass.public_class_field;</div><div class="line"></div><div class="line">        BaseClass.protected_class_method();</div><div class="line">        BaseClass.public_class_method();</div><div class="line"></div><div class="line">        Protected_instance_inner_class_C c = <span class="keyword">null</span>;</div><div class="line">        Public_instance_inner_class_D d = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        Protected_class_nested_class_C cc = <span class="keyword">null</span>;</div><div class="line">        Public_class_nested_class_D dd = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        <span class="comment">//////////////////////////////////////////</span></div><div class="line">        BaseClass base = <span class="keyword">new</span> BaseClass();</div><div class="line"><span class="comment">//        o = base.protected_instance_field;</span></div><div class="line">        o = base.public_instance_field;</div><div class="line"><span class="comment">//        base.protected_instance_method();</span></div><div class="line">        base.public_instance_method();</div><div class="line"></div><div class="line">        o = base.protected_class_field;</div><div class="line">        o = base.public_class_field;</div><div class="line">        base.protected_class_method();</div><div class="line">        base.public_class_method();</div><div class="line"></div><div class="line">        <span class="comment">//////////////////////////////////////////</span></div><div class="line">        o = protected_class_field;</div><div class="line">        o = public_class_field;</div><div class="line">        protected_class_method();</div><div class="line">        public_class_method();</div><div class="line"></div><div class="line">        Protected_instance_inner_class_C ccc = <span class="keyword">null</span>;</div><div class="line">        Public_instance_inner_class_D ddd = <span class="keyword">null</span>;</div><div class="line">        Protected_class_nested_class_C cccc = <span class="keyword">null</span>;</div><div class="line">        Public_class_nested_class_D dddd = <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>&nbsp;<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> accessing;</div><div class="line"></div><div class="line"><span class="keyword">import</span> basics.accessing.somepackage.BaseClass;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnyClass</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAccessInInstanceMethod</span><span class="params">()</span> </span>&#123;</div><div class="line">        Object o = <span class="keyword">null</span>;</div><div class="line">        o = BaseClass.public_class_field;</div><div class="line">        BaseClass.public_class_method();</div><div class="line"></div><div class="line">        BaseClass.Public_instance_inner_class_D d = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        BaseClass.Public_class_nested_class_D dd = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        <span class="comment">//////////////////////////////////////////</span></div><div class="line">        BaseClass base = <span class="keyword">new</span> BaseClass();</div><div class="line">        o = base.public_instance_field;</div><div class="line">        base.public_instance_method();</div><div class="line"></div><div class="line">        o = base.public_class_field;</div><div class="line">        base.public_class_method();</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testAccessInClassMethod</span><span class="params">()</span> </span>&#123;</div><div class="line">        Object o = <span class="keyword">null</span>;</div><div class="line">        o = BaseClass.public_class_field;</div><div class="line"></div><div class="line">        BaseClass.public_class_method();</div><div class="line"></div><div class="line">        BaseClass.Public_instance_inner_class_D d = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        BaseClass.Public_class_nested_class_D dd = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        <span class="comment">//////////////////////////////////////////</span></div><div class="line">        BaseClass base = <span class="keyword">new</span> BaseClass();</div><div class="line">        o = base.public_instance_field;</div><div class="line">        base.public_instance_method();</div><div class="line"></div><div class="line">        o = base.public_class_field;</div><div class="line">        base.public_class_method();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="a-pitfall-for-protected-access"><a href="#a-pitfall-for-protected-access" class="headerlink" title="a pitfall for protected access"></a>a pitfall for protected access</h4><p>A point that is worth noticing is the Line 21, 23, 66 and 68 of InheritedClass.</p>
<p>But why?</p>
<p>As always, this is covered in the JLS, 6.6.2:</p>
<blockquote>
<p>A protected member or constructor of an object may be accessed from outside the package in which it is declared only by code that is <strong>responsible for the implementation of that object</strong>.<br>That means you can only access the protected member by using _<strong>this</strong> <em>or </em><strong>super</strong>_.</p>
</blockquote>
<h3 id="static-modifier"><a href="#static-modifier" class="headerlink" title="static modifier"></a>static modifier</h3><p>We can use static for non top-level class (inner classes or nested class), class methods, class variables.</p>
<h3 id="abstract-final-modifiers"><a href="#abstract-final-modifiers" class="headerlink" title="abstract / final modifiers"></a>abstract / final modifiers</h3><p>abstract / final is mutually exclusive. This means we cannot use them at the same time.</p>
<table style="height: 234px;" border="1" width="837"><br><tbody><br><tr><br><td></td><br><td><em>class</em></td><br><td><em>method</em></td><br><td><em>variable</em></td><br></tr><br><tr><br><td><em>abstract</em></td><br><td><br><br><em>   intend to inherit it, overriding implemented methods or completing the unimplemented methods
</em>   include &gt;=0 abstract methods<br><em>   cannot be initialized<br></em></td><br><td>

   declare an unimplemented method without body<br>*   the class it defines in must be also abstract<br></td><br><td>n/a</td><br></tr><br><tr><br><td><em>final</em></td><br><td>intend to not inherit it</td><br><td>intend to not override it</td><br><td>cannot be changed after initialization</td><br></tr><br></tbody><br></table>

<h3 id="other-modifiers-synchronized-volatile-transient"><a href="#other-modifiers-synchronized-volatile-transient" class="headerlink" title="other modifiers: synchronized, __volatile, transient"></a>other modifiers: <em>synchronized, __volatile, transient</em></h3><ul>
<li>synchronized can be used before instance/class methods or blocks for synchronization semantics.</li>
<li>volatile can be used before instance/class variables for atomicity and visibility purpose.</li>
<li>transient can be used before instance variables for marking the fields as non-serialization ones.</li>
</ul>
<h3 id="combination-of-modifiers"><a href="#combination-of-modifiers" class="headerlink" title="combination of modifiers"></a>combination of modifiers</h3><p>&nbsp;</p>
<p><table style="height: 588px; font-size: 0.9em;" border="1" width="808"></table></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<p><td></td></p>
<p><td></td></p>
<p><td style="text-align: left;"><em><strong> abstract</strong></em></td></p>
<p><td><em><strong>final</strong></em></td><br></p>
<p><tr></tr></p>
<p><td><em><strong>top level class</strong></em></td></p>
<p><td>public/package</td></p>
<p><td style="text-align: left;">public/package abstract</td></p>
<p><td>public/package final</td><br></p>
<p><tr></tr></p>
<p><td><em><strong>instance method</strong></em></td></p>
<p><td>public/protected/package/private</td></p>
<p><td style="text-align: left;"><span style="color: #0000ff;">public/protected/package </span>abstract</td></p>
<p><td>public/protected/package/private final</td><br></p>
<p><tr style="background-color: #ccc;"></tr></p>
<p><td><em><strong>class method</strong></em></td></p>
<p><td>public/protected/package/private static</td></p>
<p><td></td></p>
<p><td>public/protected/package/private static final</td><br></p>
<p><tr></tr></p>
<p><td><em><strong>instance variable</strong></em></td></p>
<p><td>public/protected/package/private</td></p>
<p><td style="text-align: left;"></td></p>
<p><td>public/protected/package/private final</td><br></p>
<p><tr style="background-color: #ccc;"></tr></p>
<p><td><em><strong>class variable</strong></em></td></p>
<p><td>public/protected/package/private static</td></p>
<p><td></td></p>
<p><td>public/protected/package/private static final</td><br></p>
<p><tr></tr></p>
<p><td><em><strong>local variable</strong></em></td></p>
<p><td></td></p>
<p><td style="text-align: left;"></td></p>
<p><td>final</td><br></p>
<p><tr></tr></p>
<p><td><em><strong>inner class</strong></em></td></p>
<p><td>public/protected/package/private</td></p>
<p><td style="text-align: left;">public/protected/package/private abstract</td></p>
<p><td>public/protected/package/private final</td><br></p>
<p><tr></tr></p>
<p><td><em><strong>local class</strong></em></td></p>
<p><td></td></p>
<p><td style="text-align: left;">abstract</td></p>
<p><td>final</td><br></p>
<p><tr></tr></p>
<p><td><em><strong>anonymous &lt;local&gt; class</strong></em></td></p>
<p><td></td></p>
<p><td style="text-align: left;"></td></p>
<p><td></td><br></p>
<p><tr style="background-color: #ccc;"></tr></p>
<p><td><em><strong>nested class</strong></em></td></p>
<p><td>public/protected/package/private static</td></p>
<p><td>public/protected/package/private static abstract</td></p>
<p><td>public/protected/package/private static final</td><br></p>
<p><tr></tr></p>
<p><td><em><strong>interface</strong></em></td></p>
<p><td>public/package</td></p>
<p><td style="text-align: left;">public/package &lt;abstract&gt;</td></p>
<p><td></td><br></p>
<p><tr style="background-color: #ccc;"></tr></p>
<p><td><em><strong>nested interface</strong></em></td></p>
<p><td>public/protected/package/private</td></p>
<p><td>public/protected/package/private &lt;static&gt; &lt;abstract&gt;</td></p>
<p><td></td><br><br><br></p>
<blockquote>
<p>NOTICE: &lt;…&gt; represents this is default modifier implicitly.</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/23/wordpress-ssh-update-not-working/" itemprop="url">
                  wordpress ssh update not working
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-03-23T11:19:52+08:00" content="2015-03-23">
              2015-03-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/PHP/" itemprop="url" rel="index">
                    <span itemprop="name">PHP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/03/23/wordpress-ssh-update-not-working/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/03/23/wordpress-ssh-update-not-working/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>chown -R www-data:www-data *</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/22/overriding-vs-hidingaka-shadowing/" itemprop="url">
                  Overriding vs. hiding(aka. shadowing)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-03-22T18:40:28+08:00" content="2015-03-22">
              2015-03-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/OOP/" itemprop="url" rel="index">
                    <span itemprop="name">OOP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/03/22/overriding-vs-hidingaka-shadowing/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/03/22/overriding-vs-hidingaka-shadowing/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Simply speaking, overriding is for member methods, while hiding is for fields and static methods.</p>
<h3 id="Override"><a href="#Override" class="headerlink" title="Override"></a>Override</h3><p>Override is the feature of dynamic binding or run-time polymorphism.</p>
<p>It’s necessary for overriding that the method of subclasses has the same method signature as that of its super class.</p>
<p>“Same” means the number and types of the method argument list must be the same. But the return type is not necessary the same. You can use the more concrete type as the return type, like its sub types.</p>
<p>As per the access modifier, you can use the less restrictive access (stronger) modifier — (increase visibility).</p>
<blockquote>
<p><strong>stronger-&gt; weaker</strong>:  public &gt; protected &gt; package-default &gt; private<br>For more access modifier details, refer to <a href="http://richdyang.com/java-modifiers-review" target="_blank" rel="external">java modifiers review</a></p>
</blockquote>
<p>For instance:</p>
<ul>
<li>if the to-be-overridden method is <strong>package</strong>, you can make it package/<strong>protected/public</strong> accessible in the sub classes.</li>
<li>if the to-be-overridden method is <strong>protected</strong>, you can make it <strong>protected/public</strong> accessible in the sub classes.</li>
<li>if the to-be-overridden method is <strong>public</strong>, you can only make it <strong>public</strong> accessible in the sub classes.<br><table style="height: 160px;" border="1" width="564"><br><tbody><br><tr><br><td width="295">Access modifier in super class method</td><br><td width="295">Allowed access modifier for overriding</td><br></tr><br><tr><br><td width="295">private</td><br><td width="295">private, package, protected, public</td><br></tr><br><tr><br><td width="295">package</td><br><td width="295">package, protected, public</td><br></tr><br><tr><br><td width="295">protected</td><br><td width="295">protected, public</td><br></tr><br><tr><br><td width="295">public</td><br><td width="295">public</td><br></tr><br></tbody><br></table><br>As per the exception throwing, you can <strong>reduce the checked exceptions throwings</strong>, but no matter the runtime exceptions.</li>
</ul>
<p>All the rules concerning the access modifier and exception throwing, it’s easy to understand because you must maintain the contract given by the parent class.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">drink</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">protected</span> Number <span class="title">eat</span><span class="params">(Food food)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Horse</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">drink</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> Integer <span class="title">eat</span><span class="params">(Food food)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">2</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">protected</span> Number <span class="title">eat</span><span class="params">(Grass food)</span> </span>&#123; <span class="comment">// override failed</span></div><div class="line">        <span class="keyword">return</span> <span class="number">2</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Food</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grass</span> <span class="keyword">extends</span> <span class="title">Food</span> </span>&#123;&#125;</div></pre></td></tr></table></figure></p>
<p>For more complicated overriding example, refer to <a href="http://richdyang.com/override-a-pitfall" target="_blank" rel="external">override - a pitfall</a></p>
<h3 id="Hiding"><a href="#Hiding" class="headerlink" title="Hiding"></a>Hiding</h3><p>Hiding/shadowing is another type of static binding or compile-time polymophism.</p>
<h4 id="variable-shadowing"><a href="#variable-shadowing" class="headerlink" title="variable shadowing"></a>variable shadowing</h4><p>When both a parent class and its sub class have a field with the same name, this technique is called variable shadowing.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hiding</span> </span>&#123;</div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testVariableShadowing</span><span class="params">()</span> </span>&#123;</div><div class="line">        Animal animal = <span class="keyword">new</span> Cat();</div><div class="line">        Cat cat = <span class="keyword">new</span> Cat();</div><div class="line"></div><div class="line">        System.out.println(animal.name);</div><div class="line">        System.out.println(cat.name);</div><div class="line">        System.out.println(((Cat)animal).name);</div><div class="line">        System.out.println(((Animal)cat).name);</div><div class="line"></div><div class="line">        System.out.println(animal.getName());</div><div class="line">        System.out.println(cat.getName());</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    String name = <span class="string">"animal"</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    String name = <span class="string">"Cat"</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Output:<br>animal<br>Cat<br>Cat<br>animal<br>Cat<br>Cat</p>
<p>Static variable is similar as per hiding.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OverridingHiding</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testStaticVariableHiding</span><span class="params">()</span> </span>&#123;</div><div class="line">        Animal animal = <span class="keyword">new</span> Cat();</div><div class="line">        Cat cat = <span class="keyword">new</span> Cat();</div><div class="line"></div><div class="line">        System.out.println(animal.name);</div><div class="line">        System.out.println(cat.name);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> String name = <span class="string">"Animal"</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> String name = <span class="string">"Cat"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Output:<br>Animal<br>Cat</p>
<h4 id="static-method-hiding"><a href="#static-method-hiding" class="headerlink" title="static method hiding"></a>static method hiding</h4><p>When both a parent class and its sub class have a static method with the same signature, this technique is called static method hiding.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hiding</span> </span>&#123;</div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testStaticMethodHiding</span><span class="params">()</span> </span>&#123;</div><div class="line">        Animal animal = <span class="keyword">new</span> Cat();</div><div class="line">        Cat cat = <span class="keyword">new</span> Cat();</div><div class="line"></div><div class="line">        System.out.println(animal.who());</div><div class="line">        System.out.println(cat.who());</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">static</span> String <span class="title">who</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Animal"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">static</span> String <span class="title">who</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Cat"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Output:<br>Animal<br>Cat</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/20/finalize/" itemprop="url">
                  finalize()
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-03-20T15:29:39+08:00" content="2015-03-20">
              2015-03-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Basics/" itemprop="url" rel="index">
                    <span itemprop="name">Basics</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/03/20/finalize/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/03/20/finalize/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>finalize() method is a protected method of Object class. It’s intended to be invoked by GC thread before GC reclaim the memory allocated to the object.</p>
<p>Misguidingly it’s regarded as a place for doing some cleaning works, like releasing resources.</p>
<p><em><strong>But this is NOT recommended!!</strong></em></p>
<p>As we cannot know when GC do the thing, so we do some cleaning work becomes <strong>not guaranteed</strong> at all and <strong>uncertain</strong>.</p>
<p>Other drawbacks:</p>
<p>1) <strong>exceptions</strong> thrown in the finalize() method will <strong>be ignored by the GC thread</strong> and will not be propagated further. This is pretty bad, we cannot know what happened and no log left for error handling.</p>
<p>2) Not like the constructor invoking the constructor of its super classes implicitly, you should invoke <strong>super class</strong>‘s finalize() <strong>explicitly</strong>.</p>
<p>Runtime has some methods to make best efforts to do something.</p>
<ul>
<li>System.gc()   — this is a shortcut of Runtime.getRuntime().gc()</li>
<li>Runtime.getRuntime().runFinalization()</li>
<li><del>Runtime.runFinalizersOnExit(true)  </del>   this method is deprecated because of being unsafe<br><strong>“This method is inherently unsafe. It may result in finalizers being called on live objects while other threads are concurrently manipulating those objects, resulting in erratic behavior or deadlock.”</strong><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ObjectWithFinalizer</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalized</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            System.out.println(<span class="string">"finalize() invoked"</span>);</div><div class="line">            <span class="keyword">int</span> i = <span class="number">1</span> / <span class="number">0</span>; <span class="comment">// expect to throw ArithmeticException</span></div><div class="line">        &#125; <span class="keyword">finally</span> &#123;</div><div class="line">            <span class="keyword">super</span>.finalize();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        ObjectWithFinalizer o = <span class="keyword">new</span> ObjectWithFinalizer();</div><div class="line">        o = <span class="keyword">null</span>; <span class="comment">// wish GC to reclaim the memory</span></div><div class="line"><span class="comment">//        System.gc();</span></div><div class="line">        Runtime.runFinalizersOnExit(<span class="keyword">true</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>After running the above code, we cannot see the expected result.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/20/what-is-the-exact-answer-when-interviewer-ask-architecture-of-the-project/" itemprop="url">
                  What is the exact answer, When interviewer ask Architecture of the project.
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-03-20T14:24:21+08:00" content="2015-03-20">
              2015-03-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Uncategorized/" itemprop="url" rel="index">
                    <span itemprop="name">Uncategorized</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/03/20/what-is-the-exact-answer-when-interviewer-ask-architecture-of-the-project/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/03/20/what-is-the-exact-answer-when-interviewer-ask-architecture-of-the-project/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Some good answers from linkedin:</p>
<p><a href="http://www.linkedin.com/groups/What-is-exact-answer-When-3983267.S.5966845246716264451?view=&amp;gid=3983267&amp;item=5966845246716264451&amp;type=member&amp;commentID=discussion%3A5966845246716264451%3Agroup%3A3983267&amp;trk=hb_ntf_COMMENTED_ON_GROUP_DISCUSSION_YOU_COMMENTED_ON#commentID_discussion%3A5966845246716264451%3Agroup%3A3983267" target="_blank" rel="external">What-is-exact-answer-When-</a></p>
<p>@<a href="http://www.linkedin.com/groups?viewMemberFeed=&amp;gid=3983267&amp;memberID=34975735" title="See this member" target="_blank" rel="external">Rick Ryker</a></p>
<p>Your (technical) interviewer is looking for the following:</p>
<p>1) Can you communicate confidently and effectively about the subject?</p>
<p>2) Can you communicate the high level relationships between different parts of the system? Or are you just throwing buzz words around? Buzz words impress recruiters but not technical interviewers. They want to know if you understand the buzz words, so they might ask you to explain your answers.</p>
<p>3) Does your communication reveal experience in modifying, configuring, deploying the technologies that you have shown on your resume? Or are/were you just a user of the technology stack? If so, that’s ok; most of us are. Exactly where is your experience? Do you understand what those other parts of the technology stack do for the application and the system? How do they impact how you write your code?</p>
<p>4) Does your answer allow the interviewer to ask deeper questions pertaining to your experience that is pertinent to the position(s) that you are being interviewed for? And/or for potential future work?</p>
<p>Before I get into the technical questions, I like to ask my interviewees to write a simple for loop and explain it to me as they write it and then make changes to it as instructed.<br>You would be amazed at how hard that is for java programmers with self-reported 4-6 years experience for whom it should be second nature.</p>
<p>If you cannot communicate to me how you do your work during the interview,<br>how am I going to communicate with you while we do the actual work?</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://qph.is.quoracdn.net/main-thumb-27403014-200-azcnfpakpayhgojvmueqcfjeyufbjpcx.jpeg"
               alt="Richard Yang" />
          <p class="site-author-name" itemprop="name">Richard Yang</p>
          <p class="site-description motion-element" itemprop="description">Nothing seek, nothing find</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">133</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">48</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://linkedin.com/in/richdyang" target="_blank" title="Linkedin">
                  
                    <i class="fa fa-fw fa-linkedin"></i>
                  
                  Linkedin
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://github.com/richdyang" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-github-alt"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://bitbucket.org/richdyang" target="_blank" title="Bitbucket">
                  
                    <i class="fa fa-fw fa-bitbucket"></i>
                  
                  Bitbucket
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://stackoverflow.com/users/4344443/richard" target="_blank" title="Stackoverflow">
                  
                    <i class="fa fa-fw fa-stack-overflow"></i>
                  
                  Stackoverflow
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://twitter.com/richdyang" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Richard Yang</span>
</div>

<!--div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div-->

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'richyang';
      var disqus_identifier = 'page/6/index.html';
      var disqus_title = '';

      function run_disqus_script(disqus_script) {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');

      

    </script>
  




  
  

  

  

  
  

  
  
  
  <link rel="stylesheet" href="/vendors/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/vendors/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.0"></script>



</body>
</html>
