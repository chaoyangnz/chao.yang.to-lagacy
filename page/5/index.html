<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Richard Yang, Java Developer, Senior software engineer" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="Nothing seek, nothing find">
<meta property="og:type" content="website">
<meta property="og:title" content="Richard Yang">
<meta property="og:url" content="https://richyang.me/page/5/index.html">
<meta property="og:site_name" content="Richard Yang">
<meta property="og:description" content="Nothing seek, nothing find">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Richard Yang">
<meta name="twitter:description" content="Nothing seek, nothing find">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    },
    algolia: {
      applicationID: 'X0H1P7HDKY',
      apiKey: 'ddc0af00a6e07c9b1be9f4da4cf5b9d9',
      indexName: 'richyang.me',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>




  <title> Richard Yang </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <!--span class="logo-line-before"><i></i></span-->
      <span class="site-title">Richard Yang</span>
      <!--span class="logo-line-after"><i></i></span-->
    </a>
  </div>
  <p class="site-subtitle">Full-stack software engineer mainly focusing on Java-based technologies and web front-end</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            Home
          </a>
        </li>
        
      
        
        
        <li class="menu-item menu-item-books">
          <a href="https://www.gitbook.com/@richdyang" rel="section">
            
            Books
          </a>
        </li>
        
      
        
        
        <li class="menu-item menu-item-showcase">
          <a href="/showcase" rel="section">
            
            Showcase
          </a>
        </li>
        
      
        
        
        <li class="menu-item menu-item-resume">
          <a href="http://linkedin.com/in/richdyang" rel="section">
            
            Résumé
          </a>
        </li>
        
      
        
        
      
        
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
            About
          </a>
        </li>
        
      
        
        
      
        
        
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
            <i class="menu-item-icon fa fa-search fa-lg"></i>Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>

<div class="social-links" style="float: right; padding-left: 50px; margin-right: 10px">
      
        
          <span class="links-of-author-item">
            <a href="http://linkedin.com/in/richdyang" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-linkedin"></i>
                </span>
                 
              
            </a>
          </span>
        
          <span class="links-of-author-item">
            <a href="http://github.com/richdyang" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-github-alt"></i>
                </span>
                 
              
            </a>
          </span>
        
          <span class="links-of-author-item">
            <a href="http://bitbucket.org/richdyang" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-bitbucket"></i>
                </span>
                 
              
            </a>
          </span>
        
          <span class="links-of-author-item">
            <a href="http://stackoverflow.com/users/4344443/richard" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-stack-overflow"></i>
                </span>
                 
              
            </a>
          </span>
        
          <span class="links-of-author-item">
            <a href="http://twitter.com/richdyang" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-twitter"></i>
                </span>
                 
              
            </a>
          </span>
        
      
  </div>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/23/what-does-0-0-0-0-mean/" itemprop="url">
                  what does 0.0.0.0 mean?
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-22T22:46:26+08:00" content="2015-04-22">
              2015-04-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Q-A/" itemprop="url" rel="index">
                    <span itemprop="name">Q/A</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/23/what-does-0-0-0-0-mean/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/23/what-does-0-0-0-0-mean/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>0.0.0.0, in server context, means “<strong>all IP addresses on the local machine</strong>“ (in fact probably, “all IPv4 addresses on the local machine”). So, if your webserver machine has two ip addresses, 192.168.1.1 and 10.1.2.1, and you allow a webserver daemon like apache to listen on 0.0.0.0, it will be reachable at both of those IPs. But only to what can contact those IPs and the web port(s).</p>
<p>The only thing is that you cannot say “<strong><del>all addresses should have acces<em>s</em></del></strong>“ – that’s done in your firewall(s) and/or the server software and/or other security layers like tcpwrappers.</p>
<p>&nbsp;</p>
<p>Note that, in a different context (routing) 0.0.0.0 usually means the default route (the route to “the rest of” the internet, aside from routes in your local network etc.).</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/22/algorithm-training-from-codility/" itemprop="url">
                  algorithm training from codility
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-22T15:00:22+08:00" content="2015-04-22">
              2015-04-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/22/algorithm-training-from-codility/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/22/algorithm-training-from-codility/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="TRAINING"><a href="#TRAINING" class="headerlink" title="TRAINING"></a>TRAINING</h3><h4 id="counting-elements"><a href="#counting-elements" class="headerlink" title="counting elements"></a>counting elements</h4><p>When every value of the element in a numeric array is in range. We can get a counter array of which the index of every element is the value and the value is the counter.</p>
<p><img src="/media/counter-array.png" alt="counter-array"></p>
<h4 id="Prefix-Sums"><a href="#Prefix-Sums" class="headerlink" title="Prefix Sums"></a>Prefix Sums</h4><p>Prefix sums array defines as:</p>
<p><img src="/media/prefix-sums-array.png" alt="prefix-sums-array"></p>
<p>So prefix sums array is very useful to compute the sum of any array slice (contiguous segments of array).</p>
<p>For example:</p>
<p>sum(a<sub>2</sub>…a<sub>5</sub>) = p<sub>6</sub> - p<sub>2</sub></p>
<ul>
<li><p><strong>minimum sum of slice</strong><br>sort the prefix sum, and find the minimum difference between neighbor elements.</p>
</li>
<li><p><strong>maximum sum of slice</strong><br>the difference between the max and min of the prefix sum.</p>
</li>
</ul>
<h4 id="leader"><a href="#leader" class="headerlink" title="leader"></a>leader</h4><p>The leader of this sequence is the element whose value occurs more than n/2 times.The array can have zero or only one leader.</p>
<p><img src="/media/leader.png" alt="leader"></p>
<p>A property is:</p>
<p>After removing a pair of elements of different values, the leader remain the same.</p>
<p>Let’s validate it:</p>
<ul>
<li>if the two elements contain one leader, then the original leader occurs &gt; n/2 - 1 = (n-2)/2 in the left (n-2) elements, so it’s still the leader of the rest.</li>
<li>if the two elements contain no leader, then the original leader occurs &gt; n/2 = (n-2)/2 +1 &gt; (n-2)/2 in the left elements, so it’s still the leader of the rest.<br><img src="/media/leader-1.png" alt="leader-1">           or    <img src="/media/leader-2.png" alt="leader-2"></li>
</ul>
<p>So we loop the array, and every time we remove a pair of elements, if the two equals, we reserve; if not, we remove safely.</p>
<p>The left elements MUST be all the same. But they are just candidate. We need to validate in the original elements.</p>
<p>This algorithm is O(n).</p>
<p><img src="/media/leader-3.png" alt="leader-3"><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Leader</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">leader</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> N = a.length;</div><div class="line">        <span class="keyword">int</span> size = <span class="number">0</span>; <span class="comment">// stack size</span></div><div class="line">        <span class="keyword">int</span> top = -<span class="number">1</span>; <span class="comment">// top value</span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(size == <span class="number">0</span>) &#123;</div><div class="line">                size += <span class="number">1</span>;</div><div class="line">                top = a[i];</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">if</span>(top != a[i]) &#123;</div><div class="line">                    size -= <span class="number">1</span>;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    size += <span class="number">1</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> cadidate = top;</div><div class="line"></div><div class="line">        <span class="comment">// validation</span></div><div class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(a[i] == cadidate) &#123;</div><div class="line">                count++;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> (count &amp;gt; N/<span class="number">2</span>) ? cadidate : -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] a = &#123;<span class="number">4</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">5</span>&#125;;</div><div class="line"></div><div class="line">        System.out.println(leader(a));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="prime-and-composite-numbers"><a href="#prime-and-composite-numbers" class="headerlink" title="prime and composite numbers"></a>prime and composite numbers</h4><p>This kind of algorithm is based on one divisor, we can find the <span style="text-decoration: underline;"><strong>symmetric</strong></span> divisor.</p>
<h5 id="counting-divisors"><a href="#counting-divisors" class="headerlink" title="counting divisors"></a>counting divisors</h5><p><img src="/media/counting-divisors.png" alt="counting-divisors"></p>
<p>for 1 to<span style="font-family: 'comic sans ms', sans-serif;"> √n<span style="font-family: arial, helvetica, sans-serif;">, divide and count it.</span></span></p>
<h5 id="Primality-test"><a href="#Primality-test" class="headerlink" title="Primality test"></a>Primality test</h5><p>for 2 to <span style="font-family: 'comic sans ms', sans-serif;">√n</span>, divide and check it.</p>
<h5 id="Sieve-of-Eratosthenes"><a href="#Sieve-of-Eratosthenes" class="headerlink" title="Sieve of Eratosthenes"></a>Sieve of Eratosthenes</h5><h4 id="Caterpillar-method"><a href="#Caterpillar-method" class="headerlink" title="Caterpillar method"></a>Caterpillar method</h4><p><img src="/media/caterpillar.png" alt="caterpillar">   <img src="/media/caterpillar-image.png" alt="caterpillar-image"></p>
<p>This idea is a reminiscent of movements of a caterpillar (毛虫).</p>
<ul>
<li>if we can, we move the right end (front) forward and increase the size of the caterpillar;</li>
<li>otherwise, we move the left end (back) forward and decrease the size of the caterpillar.</li>
</ul>
<h4 id="Greedy-algorithms"><a href="#Greedy-algorithms" class="headerlink" title="Greedy algorithms"></a>Greedy algorithms</h4><p>Greedy programming is a method by which a solution is determined based on making the locally optimal choice at any given moment.</p>
<p>The greedy method of solving a task may or may not be the best approach</p>
<h3 id="PROBLEM-SET"><a href="#PROBLEM-SET" class="headerlink" title="PROBLEM SET"></a>PROBLEM SET</h3><p><a href="http://www.martinkysel.com/codility-solutions/" target="_blank" rel="external">http://www.martinkysel.com/codility-solutions/</a></p>
<h4 id="Time-Complexity"><a href="#Time-Complexity" class="headerlink" title="Time Complexity"></a>Time Complexity</h4><h5 id="TapeEquilibrium"><a href="#TapeEquilibrium" class="headerlink" title="TapeEquilibrium"></a><a href="https://codility.com/demo/take-sample-test/tape_equilibrium" target="_blank" rel="external">TapeEquilibrium</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Minimize the value |(A[0] + … + A[P-1]) – (A[P] + … + A[N-1])|.</p>
<p><strong>Complexity</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>In the first run I compute the left part up to the point i and the overall sum <em>last</em>. Then I compute the minimal difference between 0..i and i+1..n.</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> TapeEquilibrium;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A non-empty zero-indexed array A consisting of N integers is given. Array A represents numbers on a tape.</div><div class="line"></div><div class="line">Any integer P, such that 0 &amp;lt; P &amp;lt; N, splits this tape into two non-empty parts: A[0], A[1], ..., A[P − 1] and A[P], A[P + 1], ..., A[N − 1].</div><div class="line"></div><div class="line">The difference between the two parts is the value of: |(A[0] + A[1] + ... + A[P − 1]) − (A[P] + A[P + 1] + ... + A[N − 1])|</div><div class="line"></div><div class="line">In other words, it is the absolute difference between the sum of the first part and the sum of the second part.</div><div class="line"></div><div class="line">For example, consider array A such that:</div><div class="line"></div><div class="line">  A[0] = 3</div><div class="line">  A[1] = 1</div><div class="line">  A[2] = 2</div><div class="line">  A[3] = 4</div><div class="line">  A[4] = 3</div><div class="line">We can split this tape in four places:</div><div class="line"></div><div class="line">P = 1, difference = |3 − 10| = 7</div><div class="line">P = 2, difference = |4 − 9| = 5</div><div class="line">P = 3, difference = |6 − 7| = 1</div><div class="line">P = 4, difference = |10 − 3| = 7</div><div class="line">Write a function:</div><div class="line"></div><div class="line">class Solution &#123; public int solution(int[] A); &#125;</div><div class="line"></div><div class="line">that, given a non-empty zero-indexed array A of N integers, returns the minimal difference that can be achieved.</div><div class="line"></div><div class="line">For example, given:</div><div class="line"></div><div class="line">  A[0] = 3</div><div class="line">  A[1] = 1</div><div class="line">  A[2] = 2</div><div class="line">  A[3] = 4</div><div class="line">  A[4] = 3</div><div class="line">the function should return 1, as explained above.</div><div class="line"></div><div class="line">Assume that:</div><div class="line"></div><div class="line">N is an integer within the range [2..100,000];</div><div class="line">each element of array A is an integer within the range [−1,000..1,000].</div><div class="line">Complexity:</div><div class="line"></div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(N), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.*;</div><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">int</span> N = A.length;</div><div class="line">        <span class="keyword">long</span> sum = <span class="number">0L</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            sum += A[i];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">long</span> diff = Long.MAX_VALUE;</div><div class="line"></div><div class="line">        <span class="keyword">long</span>[] p = <span class="keyword">new</span> <span class="keyword">long</span>[N];</div><div class="line">        p[<span class="number">0</span>] = <span class="number">0L</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            p[i] = p[i-<span class="number">1</span>] + A[i-<span class="number">1</span>];</div><div class="line"></div><div class="line">            <span class="comment">//System.out.println(p[i]);</span></div><div class="line"></div><div class="line">            diff = min(diff, abs(<span class="number">2</span>*p[i] - sum));</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)diff;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-------------------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>&#125;;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> result = solution(A);</div><div class="line">        assertEquals(<span class="number">1</span>, result);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="FrogJmp"><a href="#FrogJmp" class="headerlink" title="FrogJmp"></a><a href="https://codility.com/demo/take-sample-test/frog_jmp" target="_blank" rel="external">FrogJmp</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count minimal number of jumps from position X to Y.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(1);</li>
<li>expected worst-case space complexity is O(1).<br><strong>Execution:</strong></li>
</ul>
<p>Do not use float division if possible!</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> FrogJmp;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A small frog wants to get to the other side of the road. The frog is currently located at position X and wants to get to a position greater than or equal to Y. The small frog always jumps a fixed distance, D.</div><div class="line">Count the minimal number of jumps that the small frog must perform to reach its target.</div><div class="line">Write a function:</div><div class="line">class Solution &#123; public int solution(int X, int Y, int D); &#125;</div><div class="line">that, given three integers X, Y and D, returns the minimal number of jumps from position X to a position equal to or greater than Y.</div><div class="line">For example, given:</div><div class="line">  X = 10</div><div class="line">  Y = 85</div><div class="line">  D = 30</div><div class="line">the function should return 3, because the frog will be positioned as follows:</div><div class="line">after the first jump, at position 10 + 30 = 40</div><div class="line">after the second jump, at position 10 + 30 + 30 = 70</div><div class="line">after the third jump, at position 10 + 30 + 30 + 30 = 100</div><div class="line">Assume that:</div><div class="line">X, Y and D are integers within the range [1..1,000,000,000];</div><div class="line">X ≤ Y.</div><div class="line">Complexity:</div><div class="line">expected worst-case time complexity is O(1);</div><div class="line">expected worst-case space complexity is O(1).</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.InputStreamReader;</div><div class="line"><span class="keyword">import</span> java.util.Random;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> X, <span class="keyword">int</span> Y, <span class="keyword">int</span> D)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">int</span> count = (Y-X) / D;</div><div class="line">        <span class="keyword">int</span> left = (Y-X) % D;</div><div class="line">        <span class="keyword">return</span> left == <span class="number">0</span> ? count : count+<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-------------------------------------------------</span></div><div class="line"></div><div class="line">    <span class="keyword">private</span> Random rdm = <span class="keyword">new</span> Random();</div><div class="line">    <span class="keyword">private</span> BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</div><div class="line"></div><div class="line">    <span class="comment">// [from, to)</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">random</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> rdm.nextInt(to - from) + from;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// A[0]...A[n-1]</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">random</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> index = random(<span class="number">0</span>, A.length);</div><div class="line">        <span class="keyword">return</span> A[index];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> X = <span class="number">0</span>, Y = <span class="number">20</span>, D = <span class="number">19</span>;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">2</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(X, Y, D);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> X = <span class="number">0</span>, Y = <span class="number">20</span>, D = <span class="number">20</span>;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(X, Y, D);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> X = <span class="number">0</span>, Y = <span class="number">20</span>, D = <span class="number">21</span>;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(X, Y, D);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> X = <span class="number">10</span>, Y = <span class="number">85</span>, D = <span class="number">30</span>;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">3</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(X, Y, D);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="PermMissingElem"><a href="#PermMissingElem" class="headerlink" title="PermMissingElem"></a><a href="https://codility.com/demo/take-sample-test/perm_missing_elem" target="_blank" rel="external">PermMissingElem</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the missing element in a given permutation.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Sum all elements that should be in the list and sum all elements that actually are in the list. The sum is 0 based, so +1 is required. The first solution using the + operator can cause int overflow in not-python languages. Therefore the use of a binary XOR is adequate.</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> PermMissingElem;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A zero-indexed array A consisting of N different integers is given. The array contains integers in the range [1..(N + 1)], which means that exactly one element is missing.</div><div class="line">Your goal is to find that missing element.</div><div class="line">Write a function:</div><div class="line">class Solution &#123; public int solution(int[] A); &#125;</div><div class="line">that, given a zero-indexed array A, returns the value of the missing element.</div><div class="line">For example, given array A such that:</div><div class="line">  A[0] = 2</div><div class="line">  A[1] = 3</div><div class="line">  A[2] = 1</div><div class="line">  A[3] = 5</div><div class="line">the function should return 4, as it is the missing element.</div><div class="line">Assume that:</div><div class="line">N is an integer within the range [0..100,000];</div><div class="line">the elements of A are all distinct;</div><div class="line">each element of array A is an integer within the range [1..(N + 1)].</div><div class="line">Complexity:</div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(1), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.InputStreamReader;</div><div class="line"><span class="keyword">import</span> java.util.Random;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">long</span> N = A.length;</div><div class="line">        <span class="keyword">long</span> sum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            sum += A[i];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">long</span> missing = (<span class="number">1</span>+(N+<span class="number">1</span>)) * (N+<span class="number">1</span>) /<span class="number">2</span> - sum;</div><div class="line"></div><div class="line">        <span class="keyword">return</span>  (<span class="keyword">int</span>) missing;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------test------------------------------------------------</span></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> N = <span class="number">100001</span>;</div><div class="line">        <span class="keyword">int</span> a = (<span class="number">1</span>+(N+<span class="number">1</span>)) * (N+<span class="number">1</span>) /<span class="number">2</span>;</div><div class="line">        System.out.println(a);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">100000</span>];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; <span class="number">100000</span>; ++i) &#123;</div><div class="line">            A[i] = i+<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        A[<span class="number">0</span>] = <span class="number">100001</span>;</div><div class="line">        System.out.println(A[<span class="number">100000</span>-<span class="number">1</span>]);</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line">        System.out.println(actual);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="Counting-Elements"><a href="#Counting-Elements" class="headerlink" title="Counting Elements"></a>Counting Elements</h4><h5 id="PermCheck"><a href="#PermCheck" class="headerlink" title="PermCheck"></a><a href="https://codility.com/demo/take-sample-test/perm_check" target="_blank" rel="external">PermCheck</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Check whether array N is a permutation.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Mark elements as seen in a boolean array. Elements seen twice or out of bounds of the size indicate that the list is no permutation. The check if the boolean array only contains true elements is not required. This solution only works with permutations starting from 1.</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> PermCheck;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A non-empty zero-indexed array A consisting of N integers is given.</div><div class="line">A permutation is a sequence containing each element from 1 to N once, and only once.</div><div class="line">For example, array A such that:</div><div class="line">    A[0] = 4</div><div class="line">    A[1] = 1</div><div class="line">    A[2] = 3</div><div class="line">    A[3] = 2</div><div class="line">is a permutation, but array A such that:</div><div class="line">    A[0] = 4</div><div class="line">    A[1] = 1</div><div class="line">    A[2] = 3</div><div class="line">is not a permutation, because value 2 is missing.</div><div class="line">The goal is to check whether array A is a permutation.</div><div class="line">Write a function:</div><div class="line">class Solution &#123; public int solution(int[] A); &#125;</div><div class="line">that, given a zero-indexed array A, returns 1 if array A is a permutation and 0 if it is not.</div><div class="line">For example, given array A such that:</div><div class="line">    A[0] = 4</div><div class="line">    A[1] = 1</div><div class="line">    A[2] = 3</div><div class="line">    A[3] = 2</div><div class="line">the function should return 1.</div><div class="line">Given array A such that:</div><div class="line">    A[0] = 4</div><div class="line">    A[1] = 1</div><div class="line">    A[2] = 3</div><div class="line">the function should return 0.</div><div class="line">Assume that:</div><div class="line">N is an integer within the range [1..100,000];</div><div class="line">each element of array A is an integer within the range [1..1,000,000,000].</div><div class="line">Complexity:</div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(N), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.InputStreamReader;</div><div class="line"><span class="keyword">import</span> java.util.Random;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> N = A.length;</div><div class="line">        <span class="keyword">int</span>[] seen = <span class="keyword">new</span> <span class="keyword">int</span>[N + <span class="number">1</span>];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ;i &amp;lt; N; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(A[i] &amp;gt; N) <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// exceeding the range</span></div><div class="line">            seen[A[i]]++;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &amp;lt; N+<span class="number">1</span>; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(seen[i] != <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// seen many times</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------------------test------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">0</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="FrogRiverOne"><a href="#FrogRiverOne" class="headerlink" title="FrogRiverOne"></a><a href="https://codility.com/demo/take-sample-test/frog_river_one" target="_blank" rel="external">FrogRiverOne</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the earliest time when a frog can jump to the other side of a river.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(X)<br><strong>Execution:</strong></li>
</ul>
<p>Mark seen elements as such in a boolean array. I do not like the idea of returning the first second as 0. But specifications are specifications</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> FrogRiverOne;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A small frog wants to get to the other side of a river. The frog is currently located at position 0, and wants to get to position X. Leaves fall from a tree onto the surface of the river.</div><div class="line"></div><div class="line">You are given a non-empty zero-indexed array A consisting of N integers representing the falling leaves. A[K] represents the position where one leaf falls at time K, measured in minutes.</div><div class="line"></div><div class="line">The goal is to find the earliest time when the frog can jump to the other side of the river. The frog can cross only when leaves appear at every position across the river from 1 to X.</div><div class="line"></div><div class="line">For example, you are given integer X = 5 and array A such that:</div><div class="line"></div><div class="line">  A[0] = 1</div><div class="line">  A[1] = 3</div><div class="line">  A[2] = 1</div><div class="line">  A[3] = 4</div><div class="line">  A[4] = 2</div><div class="line">  A[5] = 3</div><div class="line">  A[6] = 5</div><div class="line">  A[7] = 4</div><div class="line">In minute 6, a leaf falls into position 5\. This is the earliest time when leaves appear in every position across the river.</div><div class="line"></div><div class="line">Write a function:</div><div class="line"></div><div class="line">class Solution &#123; public int solution(int X, int[] A); &#125;</div><div class="line"></div><div class="line">that, given a non-empty zero-indexed array A consisting of N integers and integer X, returns the earliest time when the frog can jump to the other side of the river.</div><div class="line"></div><div class="line">If the frog is never able to jump to the other side of the river, the function should return −1.</div><div class="line"></div><div class="line">For example, given X = 5 and array A such that:</div><div class="line"></div><div class="line">  A[0] = 1</div><div class="line">  A[1] = 3</div><div class="line">  A[2] = 1</div><div class="line">  A[3] = 4</div><div class="line">  A[4] = 2</div><div class="line">  A[5] = 3</div><div class="line">  A[6] = 5</div><div class="line">  A[7] = 4</div><div class="line">the function should return 6, as explained above.</div><div class="line"></div><div class="line">Assume that:</div><div class="line"></div><div class="line">N and X are integers within the range [1..100,000];</div><div class="line">each element of array A is an integer within the range [1..X].</div><div class="line">Complexity:</div><div class="line"></div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(X), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Arrays;</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> X, <span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> N = A.length;</div><div class="line">        <span class="keyword">boolean</span>[] seen = <span class="keyword">new</span> <span class="keyword">boolean</span>[X+<span class="number">1</span>]; <span class="comment">// [0] ignore</span></div><div class="line">        Arrays.fill(seen, <span class="keyword">false</span>);</div><div class="line">        <span class="keyword">int</span> has_seen = <span class="number">0</span>;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(seen[A[i]] == <span class="keyword">false</span>) &#123;</div><div class="line">                seen[A[i]] = <span class="keyword">true</span>;</div><div class="line">                has_seen++;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">if</span>(has_seen == X) <span class="keyword">return</span> i;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------------------test------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> X = <span class="number">5</span>;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">6</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(X, A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> X = <span class="number">5</span>;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">7</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(X, A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="MaxCounters"><a href="#MaxCounters" class="headerlink" title="MaxCounters"></a><a href="https://codility.com/demo/take-sample-test/max_counters" target="_blank" rel="external">MaxCounters</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Calculate the values of counters after applying all alternating operations: increase counter by 1; set value of all counters to current maximum.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N+M);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>The idea is to perform the specified operation as stated. It is not required to iterate over the whole array if a new value is set for all the values. Just save the value and check it when an increase on that position is performed.</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> MaxCounters;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">You are given N counters, initially set to 0, and you have two possible operations on them:</div><div class="line">increase(X) − counter X is increased by 1,</div><div class="line">max counter − all counters are set to the maximum value of any counter.</div><div class="line">A non-empty zero-indexed array A of M integers is given. This array represents consecutive operations:</div><div class="line">if A[K] = X, such that 1 ≤ X ≤ N, then operation K is increase(X),</div><div class="line">if A[K] = N + 1 then operation K is max counter.</div><div class="line">For example, given integer N = 5 and array A such that:</div><div class="line">    A[0] = 3</div><div class="line">    A[1] = 4</div><div class="line">    A[2] = 4</div><div class="line">    A[3] = 6</div><div class="line">    A[4] = 1</div><div class="line">    A[5] = 4</div><div class="line">    A[6] = 4</div><div class="line">the values of the counters after each consecutive operation will be:</div><div class="line">    (0, 0, 1, 0, 0)</div><div class="line">    (0, 0, 1, 1, 0)</div><div class="line">    (0, 0, 1, 2, 0)</div><div class="line">    (2, 2, 2, 2, 2)</div><div class="line">    (3, 2, 2, 2, 2)</div><div class="line">    (3, 2, 2, 3, 2)</div><div class="line">    (3, 2, 2, 4, 2)</div><div class="line">The goal is to calculate the value of every counter after all operations.</div><div class="line">Write a function:</div><div class="line">class Solution &#123; public int[] solution(int N, int[] A); &#125;</div><div class="line">that, given an integer N and a non-empty zero-indexed array A consisting of M integers, returns a sequence of integers representing the values of the counters.</div><div class="line">The sequence should be returned as:</div><div class="line">a structure Results (in C), or</div><div class="line">a vector of integers (in C++), or</div><div class="line">a record Results (in Pascal), or</div><div class="line">an array of integers (in any other programming language).</div><div class="line">For example, given:</div><div class="line">    A[0] = 3</div><div class="line">    A[1] = 4</div><div class="line">    A[2] = 4</div><div class="line">    A[3] = 6</div><div class="line">    A[4] = 1</div><div class="line">    A[5] = 4</div><div class="line">    A[6] = 4</div><div class="line">the function should return [3, 2, 2, 4, 2], as explained above.</div><div class="line">Assume that:</div><div class="line">N and M are integers within the range [1..100,000];</div><div class="line">each element of array A is an integer within the range [1..N + 1].</div><div class="line">Complexity:</div><div class="line">expected worst-case time complexity is O(N+M);</div><div class="line">expected worst-case space complexity is O(N), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] solution(<span class="keyword">int</span> N, <span class="keyword">int</span>[] A) &#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> M = A.length;</div><div class="line"></div><div class="line">        <span class="keyword">int</span>[] counters = <span class="keyword">new</span> <span class="keyword">int</span>[N];</div><div class="line">        <span class="keyword">int</span> current_max = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> baseline = <span class="number">0</span>; <span class="comment">// new starting point</span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &amp;lt; M; ++k) &#123;</div><div class="line">            <span class="keyword">if</span>(A[k] &amp;lt;= N) &#123;</div><div class="line">                counters[A[k]-<span class="number">1</span>] = Math.max(counters[A[k]-<span class="number">1</span>], baseline);</div><div class="line">                counters[A[k]-<span class="number">1</span>]++;</div><div class="line">                current_max = Math.max(counters[A[k]-<span class="number">1</span>], current_max);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                baseline = current_max;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            counters[i] = Math.max(counters[i], baseline);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> counters;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------------------test------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> N = <span class="number">5</span>;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">4</span>&#125;;</div><div class="line">        <span class="keyword">int</span>[] expected = &#123;<span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>&#125;;</div><div class="line"></div><div class="line">        <span class="keyword">int</span>[] actual = solution(N, A);</div><div class="line"></div><div class="line">        assertArrayEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="MissingInteger"><a href="#MissingInteger" class="headerlink" title="MissingInteger"></a><a href="https://codility.com/demo/take-sample-test/missing_integer" target="_blank" rel="external">MissingInteger</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the minimal positive integer not occurring in a given sequence.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>You only need to consider the first (N) positive integers. In this specification 0 does not count as a valid candidate! Any value that is below 1 or above N can be ignored.</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> MissingInteger;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">Write a function:</div><div class="line">class Solution &#123; public int solution(int[] A); &#125;</div><div class="line">that, given a non-empty zero-indexed array A of N integers, returns the minimal positive integer that does not occur in A.</div><div class="line">For example, given:</div><div class="line">  A[0] = 1</div><div class="line">  A[1] = 3</div><div class="line">  A[2] = 6</div><div class="line">  A[3] = 4</div><div class="line">  A[4] = 1</div><div class="line">  A[5] = 2</div><div class="line">the function should return 5.</div><div class="line">Assume that:</div><div class="line">N is an integer within the range [1..100,000];</div><div class="line">each element of array A is an integer within the range [−2,147,483,648..2,147,483,647].</div><div class="line">Complexity:</div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(N), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> N = A.length;</div><div class="line">        <span class="keyword">boolean</span>[] seen = <span class="keyword">new</span> <span class="keyword">boolean</span>[N+<span class="number">1</span>]; <span class="comment">// [0] ignored</span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i= <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(A[i] &amp;gt; <span class="number">0</span> &amp;amp;&amp;amp; A[i] &amp;lt;= N) &#123;</div><div class="line">                seen[A[i]] = <span class="keyword">true</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &amp;lt; N+<span class="number">1</span>; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(seen[i] == <span class="keyword">false</span>) <span class="keyword">return</span> i;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> N+<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------------------test------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">5</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;-<span class="number">2</span>, <span class="number">29</span>, -<span class="number">9</span>, <span class="number">0</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="Prefix-Sums-1"><a href="#Prefix-Sums-1" class="headerlink" title="Prefix Sums"></a>Prefix Sums</h4><h5 id="PassingCars"><a href="#PassingCars" class="headerlink" title="PassingCars"></a><a href="https://codility.com/demo/take-sample-test/passing_cars" target="_blank" rel="external">PassingCars</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count the number of passing cars on the road.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Count all cars heading in one direction (west). Each car heading the other direction (east) passes all cars that went west so far. Note that east cars at the beginning of the list pass no cars! Also do not forget the upper limit!</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> PassingCars;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A non-empty zero-indexed array A consisting of N integers is given. The consecutive elements of array A represent consecutive cars on a road.</div><div class="line"></div><div class="line">Array A contains only 0s and/or 1s:</div><div class="line"></div><div class="line">0 represents a car traveling east,</div><div class="line">1 represents a car traveling west.</div><div class="line">The goal is to count passing cars. We say that a pair of cars (P, Q), where 0 ≤ P &amp;lt; Q &amp;lt; N, is passing when P is traveling to the east and Q is traveling to the west.</div><div class="line"></div><div class="line">For example, consider array A such that:</div><div class="line"></div><div class="line">  A[0] = 0</div><div class="line">  A[1] = 1</div><div class="line">  A[2] = 0</div><div class="line">  A[3] = 1</div><div class="line">  A[4] = 1</div><div class="line">We have five pairs of passing cars: (0, 1), (0, 3), (0, 4), (2, 3), (2, 4).</div><div class="line"></div><div class="line">Write a function:</div><div class="line"></div><div class="line">class Solution &#123; public int solution(int[] A); &#125;</div><div class="line"></div><div class="line">that, given a non-empty zero-indexed array A of N integers, returns the number of pairs of passing cars.</div><div class="line"></div><div class="line">The function should return −1 if the number of pairs of passing cars exceeds 1,000,000,000.</div><div class="line"></div><div class="line">For example, given:</div><div class="line"></div><div class="line">  A[0] = 0</div><div class="line">  A[1] = 1</div><div class="line">  A[2] = 0</div><div class="line">  A[3] = 1</div><div class="line">  A[4] = 1</div><div class="line">the function should return 5, as explained above.</div><div class="line"></div><div class="line">Assume that:</div><div class="line"></div><div class="line">N is an integer within the range [1..100,000];</div><div class="line">each element of array A is an integer that can have one of the following values: 0, 1.</div><div class="line">Complexity:</div><div class="line"></div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(1), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> N = A.length;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> east_cars = <span class="number">0</span>; <span class="comment">//before current, how many cars head east?</span></div><div class="line">        <span class="keyword">int</span> cnt_passing = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(A[i] == <span class="number">0</span>) &#123;</div><div class="line">                east_cars++;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                cnt_passing += east_cars;</div><div class="line">                <span class="keyword">if</span>(cnt_passing &amp;gt; <span class="number">1000000000</span>) <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> cnt_passing;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------------------test------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">5</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="GenomicRangeQuery"><a href="#GenomicRangeQuery" class="headerlink" title="GenomicRangeQuery"></a><a href="https://codility.com/demo/take-sample-test/genomic_range_query" target="_blank" rel="external">GenomicRangeQuery</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the minimal nucleotide from a range of sequence DNA.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N+M);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Remember the last position on which was the genome (A, C, G, T) was seen. If the distance between Q and P is lower than the distance to the last seen genome, we have found the right candidate.</p>
<p><strong>Solution:</strong></p>
<h5 id="MinAvgTwoSlice"><a href="#MinAvgTwoSlice" class="headerlink" title="MinAvgTwoSlice"></a><a href="https://codility.com/demo/take-sample-test/min_avg_two_slice" target="_blank" rel="external">MinAvgTwoSlice</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the minimal average of any slice containing at least two elements.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Every slice must be of size two or three. Slices of bigger sizes are created from such smaller slices. Therefore should any bigger slice have an optimal value, all sub-slices must be the same, for this case to hold true. Should this not be true, one of the sub-slices must be the optimal slice. The others being bigger. Therefore we check all possible slices of size 2/3 and return the smallest one. The first such slice is the correct one, do not use &lt;=!</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> MinAvgTwoSlice;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A non-empty zero-indexed array A consisting of N integers is given. A pair of integers (P, Q), such that 0 ≤ P &amp;lt; Q &amp;lt; N, is called a slice of array A (notice that the slice contains at least two elements). The average of a slice (P, Q) is the sum of A[P] + A[P + 1] + ... + A[Q] divided by the length of the slice. To be precise, the average equals (A[P] + A[P + 1] + ... + A[Q]) / (Q − P + 1).</div><div class="line">For example, array A such that:</div><div class="line">    A[0] = 4</div><div class="line">    A[1] = 2</div><div class="line">    A[2] = 2</div><div class="line">    A[3] = 5</div><div class="line">    A[4] = 1</div><div class="line">    A[5] = 5</div><div class="line">    A[6] = 8</div><div class="line">contains the following example slices:</div><div class="line">slice (1, 2), whose average is (2 + 2) / 2 = 2;</div><div class="line">slice (3, 4), whose average is (5 + 1) / 2 = 3;</div><div class="line">slice (1, 4), whose average is (2 + 2 + 5 + 1) / 4 = 2.5.</div><div class="line">The goal is to find the starting position of a slice whose average is minimal.</div><div class="line">Write a function:</div><div class="line">class Solution &#123; public int solution(int[] A); &#125;</div><div class="line">that, given a non-empty zero-indexed array A consisting of N integers, returns the starting position of the slice with the minimal average. If there is more than one slice with a minimal average, you should return the smallest starting position of such a slice.</div><div class="line">For example, given array A such that:</div><div class="line">    A[0] = 4</div><div class="line">    A[1] = 2</div><div class="line">    A[2] = 2</div><div class="line">    A[3] = 5</div><div class="line">    A[4] = 1</div><div class="line">    A[5] = 5</div><div class="line">    A[6] = 8</div><div class="line">the function should return 1, as explained above.</div><div class="line">Assume that:</div><div class="line">N is an integer within the range [2..100,000];</div><div class="line">each element of array A is an integer within the range [−10,000..10,000].</div><div class="line">Complexity:</div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(N), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> N = A.length;</div><div class="line">        <span class="keyword">int</span> min_start_index = <span class="number">0</span>;</div><div class="line">        <span class="keyword">double</span> min_average = Integer.MAX_VALUE;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N-<span class="number">1</span>; ++i) &#123;</div><div class="line">            <span class="keyword">double</span> avg = (A[i] + A[i+<span class="number">1</span>]) / <span class="number">2.0</span>;</div><div class="line">            <span class="keyword">if</span>(avg &amp;lt; min_average) &#123;</div><div class="line">                min_start_index = i;</div><div class="line">                min_average = avg;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(i+<span class="number">2</span> &amp;lt; N) &#123;</div><div class="line">                avg = (A[i] + A[i+<span class="number">1</span>] + A[i+<span class="number">2</span>]) / <span class="number">3.0</span>;</div><div class="line">                <span class="keyword">if</span>(avg &amp;lt; min_average) &#123;</div><div class="line">                    min_start_index = i;</div><div class="line">                    min_average = avg;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> min_start_index;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------------------test------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">4</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">8</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>&nbsp;</p>
<h5 id="CountDiv"><a href="#CountDiv" class="headerlink" title="CountDiv"></a><a href="https://codility.com/demo/take-sample-test/count_div" target="_blank" rel="external">CountDiv</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Compute number of integers divisible by k in range [a..b].</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(1);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>This little check required a bit of experimentation. One needs to start from the first valid value that is bigger than A and a multiply of K.</p>
<p><strong>Solution:</strong></p>
<h4 id="Sorting"><a href="#Sorting" class="headerlink" title="Sorting"></a>Sorting</h4><h5 id="Triangle"><a href="#Triangle" class="headerlink" title="Triangle"></a><a href="https://codility.com/demo/take-sample-test/triangle" target="_blank" rel="external">Triangle</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Determine whether a triangle can be built from a given set of edges.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N));</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>By sorting the array, we have guaranteed that P+R &lt; Q and Q+R &lt; P (because R is always the biggest). Now what remains, is the proof that P+Q &gt; R, that can be found out by traversing the array. The chance to find such a combination is with three adjacent values as they provide the highest P and Q.</p>
<p><strong>Solution:</strong></p>
<h5 id="Distinct"><a href="#Distinct" class="headerlink" title="Distinct "></a><a href="https://codility.com/demo/take-sample-test/distinct" target="_blank" rel="external">Distinct </a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Compute number of distinct values in an array.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N * log(N));</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Sorting in both C++ and Python takes N log N time. We know that for this particular problem sorting the array will be the dominant runtime complexity. This is the case for the second python solution. What about the other ones?</p>
<p>The first solution is a neat pythonic way of solving a distinct entries problem. The set is implemented as a hash table so it is possible that it will degrade to a linked list. Therefore the actual worst case would be N^2.</p>
<p>This is not the case with C++ (as code 3 shows). The std set is a Red-Black Tree and therefore has insertion complexity of log N. (overall N log N)</p>
<p><strong>Solution:</strong></p>
<h5 id="MaxProductOfThree"><a href="#MaxProductOfThree" class="headerlink" title="MaxProductOfThree"></a><a href="https://codility.com/demo/take-sample-test/max_product_of_three" target="_blank" rel="external">MaxProductOfThree</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Maximize A[P] <em> A[Q] </em> A[R] for any triplet (P, Q, R).</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N));</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>After sorting the largest product can be found as a combination of the last three elements. Additionally, two negative numbers add to a positive, so by multiplying the two largest negatives with the largest positive, we get another candidate. If all numbers are negative, the three largest (closest to 0) still get the largest element!</p>
<p><strong>Solution:</strong></p>
<h5 id="NumberOfDiscIntersections"><a href="#NumberOfDiscIntersections" class="headerlink" title="NumberOfDiscIntersections"></a>NumberOfDiscIntersections</h5><h4 id="Stacks-and-Queues"><a href="#Stacks-and-Queues" class="headerlink" title="Stacks and Queues"></a>Stacks and Queues</h4><h5 id="Brackets"><a href="#Brackets" class="headerlink" title="Brackets"></a><a href="https://codility.com/demo/take-sample-test/brackets" target="_blank" rel="external">Brackets</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Determine whether a given string of parentheses is properly nested.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Put every opening bracket on a stack. If a closing bracket is not the same as the top stack bracket, the string is not properly nested.</p>
<p><strong>Solution:</strong></p>
<h5 id="Nesting"><a href="#Nesting" class="headerlink" title="Nesting"></a><span style="text-decoration: underline;">Nesting</span></h5><p><strong>Short Problem Definition:</strong></p>
<p>Determine whether given string of parentheses is properly nested.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Because there is only one type of brackets, the problem is easier than <a href="http://www.martinkysel.com/codility-brackets-solution/" title="Codility ‘Brackets’ Solution" target="_blank" rel="external">Brackets</a>. Just check if there is always a opening bracket before a closing one.</p>
<h5 id="StoneWall"><a href="#StoneWall" class="headerlink" title="StoneWall"></a><a href="https://codility.com/demo/take-sample-test/stone_wall" target="_blank" rel="external">StoneWall</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Cover “Manhattan skyline” using the minimum number of rectangles.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>The explanation to this challenge has been posted on the Codility web, you can read it <a href="http://blog.codility.com/2012/06/sigma-2012-codility-programming.html" target="_blank" rel="external">here</a>.</p>
<p><strong>Solution:</strong></p>
<h5 id="Fish"><a href="#Fish" class="headerlink" title="Fish"></a><a href="https://codility.com/demo/take-sample-test/fish" target="_blank" rel="external">Fish</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>N voracious fish are moving along a river. Calculate how many fish are alive.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Put all downstream swimming fishes on a stack. Any upstream swimming fish has to fight(eat) all fishes on the stack. If there is no fish on the stack, the fish survives. If the stack has some downstream fishes at the end, they also survive.</p>
<p><strong>Solution:</strong></p>
<h4 id="Leader"><a href="#Leader" class="headerlink" title="Leader"></a>Leader</h4><h5 id="Dominator"><a href="#Dominator" class="headerlink" title="Dominator"></a><a href="https://codility.com/demo/take-sample-test/dominator" target="_blank" rel="external">Dominator</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find an index of an array such that its value occurs at more than half of indices in the array.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>As explained in the training material…</p>
<p><strong>Solution:</strong></p>
<h5 id="EquiLeader"><a href="#EquiLeader" class="headerlink" title="EquiLeader"></a><a href="https://codility.com/demo/take-sample-test/equi_leader" target="_blank" rel="external">EquiLeader</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the index S such that the leaders of the sequences A[0], A[1], …, A[S] and A[S + 1], A[S + 2], …, A[N – 1] are the same.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Get the leader as in the training material. Afterwards check every position if both sides have enough leader occurrences.</p>
<p><strong>Solution:</strong></p>
<h4 id="Maximum-Slice-Problem"><a href="#Maximum-Slice-Problem" class="headerlink" title="Maximum Slice Problem"></a>Maximum Slice Problem</h4><h5 id="MaxProfit"><a href="#MaxProfit" class="headerlink" title="MaxProfit"></a><a href="https://codility.com/demo/take-sample-test/max_profit" target="_blank" rel="external">MaxProfit</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Given a log of stock prices compute the maximum possible earning.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Keep the minimal value up to day. The profit on day i is_ profit[i] – min<em>profit</em>.</p>
<p><strong>Solution:</strong></p>
<h5 id="MaxSliceSum"><a href="#MaxSliceSum" class="headerlink" title="MaxSliceSum"></a><a href="https://codility.com/demo/take-sample-test/max_slice_sum" target="_blank" rel="external">MaxSliceSum</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find a maximum sum of a compact subsequence of array elements.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>The only difference to the example given by Codility is the minimal slice length, which is 1.</p>
<p><strong>Solution:</strong></p>
<h5 id="MaxDoubleSliceSum"><a href="#MaxDoubleSliceSum" class="headerlink" title="MaxDoubleSliceSum"></a><a href="https://codility.com/demo/take-sample-test/max_double_slice_sum" target="_blank" rel="external">MaxDoubleSliceSum</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the maximal sum of any double slice.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>To solve this task, you need to keep track of two slice arrays. The optimal double slice can be found at an index that has the maximal sum of those two arrays. It can not be the 0th or the last index.</p>
<p><strong>Solution:</strong></p>
<h4 id="Prime-and-composite-numbers"><a href="#Prime-and-composite-numbers" class="headerlink" title="Prime and composite numbers"></a>Prime and composite numbers</h4><h5 id="MinPerimeterRectangle"><a href="#MinPerimeterRectangle" class="headerlink" title="MinPerimeterRectangle"></a><a href="https://codility.com/demo/take-sample-test/min_perimeter_rectangle" target="_blank" rel="external">MinPerimeterRectangle</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the minimal perimeter of any rectangle whose area equals N.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(sqrt(N));</li>
<li>expected worst-case space complexity is O(1).<br><strong>Execution:</strong></li>
</ul>
<p>Trivial search for the largest prime.</p>
<h5 id="CountFactors"><a href="#CountFactors" class="headerlink" title="CountFactors"></a><a href="https://codility.com/demo/take-sample-test/count_factors" target="_blank" rel="external">CountFactors</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count factors of given number N.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(sqrt(N));</li>
<li>expected worst-case space complexity is O(1).<br><strong>Execution:</strong></li>
</ul>
<p>This example can be found in the lesson document.</p>
<h5 id="Peaks"><a href="#Peaks" class="headerlink" title="Peaks"></a><a href="https://codility.com/demo/take-sample-test/peaks" target="_blank" rel="external">Peaks</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>A non-empty zero-indexed array A consisting of N integers is given. A peak is an array element which is larger than its neighbors.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(log(N)));</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>I first compute all peaks. Because each block must contain a peak I start from the end and try to find a integral divisor sized block. If each block contains a peak I return the size.</p>
<p><strong>Solution:</strong></p>
<h5 id="Flags"><a href="#Flags" class="headerlink" title="Flags"></a><span style="text-decoration: underline;">Flags</span></h5><h4 id="Sieve-or-Eratosthenes"><a href="#Sieve-or-Eratosthenes" class="headerlink" title="Sieve or Eratosthenes"></a>Sieve or Eratosthenes</h4><h5 id="CountSemiprimes"><a href="#CountSemiprimes" class="headerlink" title="CountSemiprimes"></a><a href="https://codility.com/demo/take-sample-test/count_semiprimes" target="_blank" rel="external">CountSemiprimes</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count the semiprime numbers in the given range [a..b]</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(log(N))+M);</li>
<li>expected worst-case space complexity is O(N+M)<br><strong>Execution:</strong></li>
</ul>
<p>First get all semiprimes from an adaptation of the Sieve of Eratosthenes. Because we will be computing the difference many times a prefix sum is adequate. Get the number of semiprimes up to the point. The index P is decreased by 1 because we want to know all primes that start from P.</p>
<p><strong>Solution:</strong></p>
<h5 id="CountNonDivisible"><a href="#CountNonDivisible" class="headerlink" title="CountNonDivisible"></a><a href="https://codility.com/demo/take-sample-test/count_non_divisible" target="_blank" rel="external">CountNonDivisible</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Calculate the number of elements of an array that are not divisors of each element.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N));</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Using the Sieve of Eratosthenes, you generate divisors for all input elements of A. If a given number x is a divisor of element <em>(x*N == element)</em>, then N also is a divisor. <em>(N = element//x).</em> After all divisors are computed, we simply subtract those (multiplied by their counts or 0) from the total number of elements in A.</p>
<p><strong>Solution:</strong></p>
<h4 id="Euclidean-Algorithm"><a href="#Euclidean-Algorithm" class="headerlink" title="Euclidean Algorithm"></a>Euclidean Algorithm</h4><h5 id="ChocolatesByNumbers"><a href="#ChocolatesByNumbers" class="headerlink" title="ChocolatesByNumbers"></a><a href="https://codility.com/demo/take-sample-test/chocolates_by_numbers" target="_blank" rel="external">ChocolatesByNumbers</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>There are N chocolates in a circle. Count the number of chocolates you will eat.</p>
<p>&nbsp;</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(log(N+M));</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>N and M meet at their least common multiply. Dividing this LCM by M gets the number of steps(chocolates) that can be eaten.</p>
<p><strong>Solution:</strong></p>
<h5 id="CommonPrimeDivisors"><a href="#CommonPrimeDivisors" class="headerlink" title="CommonPrimeDivisors"></a><a href="https://codility.com/demo/take-sample-test/common_prime_divisors" target="_blank" rel="external">CommonPrimeDivisors</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Check whether two numbers have the same prime divisors.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(Z*log(max(A)+max(B))<sup>2</sup>);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>I will post an explaining image soon!</p>
<p><strong>Solution:</strong></p>
<h4 id="Fibonacci-Numbers"><a href="#Fibonacci-Numbers" class="headerlink" title="Fibonacci Numbers"></a>Fibonacci Numbers</h4><h5 id="FibFrog"><a href="#FibFrog" class="headerlink" title="FibFrog"></a><a href="https://codility.com/demo/take-sample-test/fib_frog" target="_blank" rel="external">FibFrog</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count the minimum number of jumps required for a frog to get to the other side of a river.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N))</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>This problem can be solved by in a Dynamic Programming way. You need to know the optimal count of jumps that can reach a given leaf. You get those by either reaching the leaf from the first shore or by reaching it from another leaf.</p>
<p>The N*log(N) time complexity is given by the fact, that there are approximately log(N) Fibonacci numbers up to N and you visit each position once.</p>
<p>As for the sequence hack: there are 26 Fibonacci numbers smaller than 100k, so I just preallocate an array of this size.</p>
<p><strong>Solution:</strong></p>
<h5 id="Ladder"><a href="#Ladder" class="headerlink" title="Ladder"></a><a href="https://codility.com/demo/take-sample-test/ladder" target="_blank" rel="external">Ladder</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count the number of different ways of climbing to the top of a ladder.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(L)</li>
<li>expected worst-case space complexity is O(L)<br><strong>Execution:</strong></li>
</ul>
<p>We first compute the Fibonacci sequence for the first L+2 numbers. The first two numbers are used only as fillers, so we have to index the sequence as A[idx]+1 instead of A[idx]-1. The second step is to replace the modulo operation by removing all but the n lowest bits. A discussion can be found on <a href="http://stackoverflow.com/a/6670766" title="Mod of power 2" target="_blank" rel="external">Stack Overflow</a>.</p>
<p><strong>Solution:</strong></p>
<h4 id="Binary-Search"><a href="#Binary-Search" class="headerlink" title="Binary Search"></a>Binary Search</h4><h5 id="MinMaxDivision"><a href="#MinMaxDivision" class="headerlink" title="MinMaxDivision"></a><a href="https://codility.com/demo/take-sample-test/min_max_division" target="_blank" rel="external">MinMaxDivision</a></h5><h5 id="Short-Problem-Definition"><a href="#Short-Problem-Definition" class="headerlink" title="Short Problem Definition:"></a>Short Problem Definition:</h5><p>Divide array A into K blocks and minimize the largest sum of any block.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N+M));</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Binary search for the minimal size of a block. A valid block can be checked in a boolean fashion. Two special cases can be sped up (courtesy to <a href="http://codesays.com/2014/solution-to-min-max-division-by-codility/" target="_blank" rel="external">CodeSays</a>). At the time of writing (19.9.2014) do not use the variable passed to the solution function as M! It is NOT the maximum element in the test cases! The specification says, that no element is larger than M, yet there is not guarantee that M == max(A).</p>
<p><strong>Solution:</strong></p>
<h5 id="NailingPlanks"><a href="#NailingPlanks" class="headerlink" title="NailingPlanks"></a><a href="https://codility.com/demo/take-sample-test/nailing_planks" target="_blank" rel="external">NailingPlanks</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count the minimum number of nails that allow a series of planks to be nailed..</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O((N+M)*log(M));</li>
<li>expected worst-case space complexity is O(M)<br><strong>Execution:</strong></li>
</ul>
<p>The solution gets 100/100, but I am skeptical. The runtime is rather O(N <em> (log(M)+M)) than O((N+M)</em>log(M)).  Maybe it can be proven that the execution of the linear scan will never have to scan all possible positions. I also violate the space complexity by creating a copy of A+B.</p>
<p><strong>Solution:</strong></p>
<h4 id="Caterpillar-method-1"><a href="#Caterpillar-method-1" class="headerlink" title="Caterpillar method"></a>Caterpillar method</h4><h5 id="AbsDistinct"><a href="#AbsDistinct" class="headerlink" title="AbsDistinct"></a><a href="https://codility.com/demo/take-sample-test/abs_distinct" target="_blank" rel="external">AbsDistinct</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Compute number of distinct absolute values of sorted array elements.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Additional storage is allowed. Therefore a simple python solution will suffice.</p>
<p><strong>Solution:</strong></p>
<h5 id="CountDistinctSlices"><a href="#CountDistinctSlices" class="headerlink" title="CountDistinctSlices"></a><a href="https://codility.com/demo/take-sample-test/count_distinct_slices" target="_blank" rel="external">CountDistinctSlices</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count the number of distinct slices (containing only unique numbers).</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(M)<br><strong>Execution:</strong></li>
</ul>
<p>Using the caterpillar method I expand the caterpillar to the right as long as a duplicate element is found. The right side has to retract as long as this duplicate element has been eliminated from the next slice. An observation showed that the number of sub-slices is equal to front-back+1.</p>
<p><strong>Solution:</strong></p>
<h5 id="CountTriangles"><a href="#CountTriangles" class="headerlink" title="CountTriangles"></a><a href="https://codility.com/demo/take-sample-test/count_triangles" target="_blank" rel="external">CountTriangles</a></h5><p><strong>Short Problem Definition:</strong></p>
<p><span class="task-synopsis">Count the number of triangles that can be built from a given set of edges.</span></p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N<sup>2</sup>);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Apply the caterpillar method. We know that in a sorted array every position between Q and R will be bigger than Q and therefore P+Q will be bigger than R. I therefore either increment Q if P+Q is not larger than R or increment R as far as possible.</p>
<p><strong>Solution:</strong></p>
<h5 id="MinAbsSumOfTwo"><a href="#MinAbsSumOfTwo" class="headerlink" title="MinAbsSumOfTwo"></a><a href="https://codility.com/demo/take-sample-test/min_abs_sum_of_two" target="_blank" rel="external">MinAbsSumOfTwo</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the minimal absolute value of a sum of two elements.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N));</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Using the caterpillar method on a sorted list.</p>
<p><strong>Solution:</strong></p>
<h4 id="Greedy-algorithms-1"><a href="#Greedy-algorithms-1" class="headerlink" title="Greedy algorithms"></a>Greedy algorithms</h4><h5 id="TieRopes"><a href="#TieRopes" class="headerlink" title="TieRopes"></a><a href="https://codility.com/demo/take-sample-test/tie_ropes" target="_blank" rel="external">TieRopes</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Tie adjacent ropes to achieve the maximum number of ropes of length &gt;= K.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>I am a bit skeptical about the correctness of my solution. It gets 100/100 through…</p>
<p><strong>Solution:</strong></p>
<h5 id="MaxNonoverlappingSegments"><a href="#MaxNonoverlappingSegments" class="headerlink" title="MaxNonoverlappingSegments"></a><a href="https://codility.com/demo/take-sample-test/max_nonoverlapping_segments" target="_blank" rel="external">MaxNonoverlappingSegments</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find a maximal set of non((-))overlapping segments.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N)</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>This can be solved by using greedy search. The beginning of the next segment must come strictly after its predecessor.</p>
<p><strong>Solution:</strong></p>
<h4 id="Dynamic-Programming"><a href="#Dynamic-Programming" class="headerlink" title="Dynamic Programming"></a>Dynamic Programming</h4><h5 id="NumberSolitaire"><a href="#NumberSolitaire" class="headerlink" title="NumberSolitaire"></a><a href="https://codility.com/demo/take-sample-test/number_solitaire" target="_blank" rel="external">NumberSolitaire</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>In a given array, find the subset of maximal sum in which the distance between consecutive elements is at most 6.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Prototypical Dynamic Programming. Remember all sub-solutions and use them to compute the next step. I prefixed the array by 6 min_values to use the same computation for the whole algorithm (besides the first). Do not forget to set the minimal_value small enough to handle a purely negative input array.</p>
<p><strong>Solution:</strong></p>
<h5 id="MinAbsSum"><a href="#MinAbsSum" class="headerlink" title="MinAbsSum"></a><span style="text-decoration: underline;"><span style="line-height: 1.5;">MinAbsSum</span></span></h5><h4 id="Future-Training"><a href="#Future-Training" class="headerlink" title="Future Training"></a>Future Training</h4><h5 id="BinaryGap"><a href="#BinaryGap" class="headerlink" title="BinaryGap"></a><a href="https://codility.com/demo/take-sample-test/binary_gap" target="_blank" rel="external">BinaryGap</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find longest sequence of zeros in binary representation of an integer.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(log(N));</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>The solution is straight-forward! Use of binary shift.</p>
<p><strong>Solution:</strong></p>
<h5 id="StrSymmetryPoint"><a href="#StrSymmetryPoint" class="headerlink" title="StrSymmetryPoint"></a><a href="https://codility.com/demo/take-sample-test/str_symmetry_point" target="_blank" rel="external">StrSymmetryPoint</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find a symmetry point of a string, if any.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(length(S));</li>
<li>expected worst-case space complexity is O(1) (not counting the storage required for input arguments).<br><strong>Execution:</strong></li>
</ul>
<p>This problem gave me a lot of headache. It is so trivial I that over-complicated it. I thought that you should find a symmetry point at any possible position, ignoring the residual characters. You would obviously try to maximize the length of this symmetrical sub-array. I was not able to come with any O(S) algorithm for this problem derivation. So just to remind you,<strong> this problem is a simple palindrome check</strong>. Additionally, you drop all evenly sized strings as their symmetry point is between the indexes.</p>
<p><strong>Solution:</strong></p>
<h5 id="OddOccurencesInArray"><a href="#OddOccurencesInArray" class="headerlink" title="OddOccurencesInArray"></a><a href="https://codility.com/demo/take-sample-test/odd_occurrences_in_array" target="_blank" rel="external">OddOccurencesInArray</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find value that occurs in odd number of elements.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>This problem can be found in many algorithm books. A xor A cancels itself and B xor 0 is B. Therefore A xor A xor B xor C xor C is B.</p>
<p><strong>Solution:</strong></p>
<h5 id="TreeHeight"><a href="#TreeHeight" class="headerlink" title="TreeHeight"></a><a href="https://codility.com/demo/take-sample-test/tree_height" target="_blank" rel="external">TreeHeight</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Compute the height of a binary link-tree.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>The height of a tree is the maximal height +1 of its subtrees. In this specification a tree with just the root node has a height of 0.</p>
<p><strong>Solution:</strong></p>
<h5 id="ArrayInversionCount"><a href="#ArrayInversionCount" class="headerlink" title="ArrayInversionCount"></a><a href="https://codility.com/demo/take-sample-test/array_inversion_count" target="_blank" rel="external">ArrayInversionCount</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Compute number of inversion in an array.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N));</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Any sorting algorithm with a NlogN runtime will do the trick. It is important to count all (remaining) bigger elements on the left side. Do not forget to check for the maximal return value!</p>
<p><strong>Solution:</strong></p>
<h4 id="Challenges"><a href="#Challenges" class="headerlink" title="Challenges"></a>Challenges</h4><ul>
<li><a href="http://www.martinkysel.com/codility-sqlsegmentssum-kalium-2015-solution/" target="_blank" rel="external">Kalium 2015 – SqlSegmentsSum</a></li>
<li>Boron 2013 – Flags</li>
<li><a href="http://www.martinkysel.com/codility-wireburnouts-2012-psi-solution/" title="Codility ‘WireBurnouts’ 2012 Psi Solution" target="_blank" rel="external">Psi 2012 – Wire Burnouts</a></li>
<li><a href="http://www.martinkysel.com/codility-cannonballs-2012-chi-solution/" target="_blank" rel="external">Chi 2012 – Cannon Balls</a></li>
<li><a href="http://www.martinkysel.com/codility-stonewall-solution/" title="Codility ‘StoneWall’ Solution" target="_blank" rel="external">Sigma 2012 – StoneWall</a></li>
<li>Delta 2011 – MinAbsSum</li>
<li><a href="http://www.martinkysel.com/codility-number-of-disc-intersections-2010-beta-solution/" target="_blank" rel="external">Beta 2010 – NumberOfDiscIntersections</a></li>
<li><a href="http://www.martinkysel.com/codility-prefixset-2010-alpha-solution/" title="Codility ‘PrefixSet’ 2010 Alpha Solution" target="_blank" rel="external">Alpha 2010 – PrefixSet</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/21/wsdl-service-contract-in-detail/" itemprop="url">
                  WSDL Service Contract in Detail
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-21T14:47:44+08:00" content="2015-04-21">
              2015-04-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SOAP-Web-Service/" itemprop="url" rel="index">
                    <span itemprop="name">SOAP Web Service</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/21/wsdl-service-contract-in-detail/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/21/wsdl-service-contract-in-detail/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Concepts-in-WSDL-definition"><a href="#Concepts-in-WSDL-definition" class="headerlink" title="Concepts in WSDL definition"></a>Concepts in WSDL definition</h3><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&amp;gt;</div><div class="line">&amp;lt;definitions xmlns:soap=<span class="string">"http://schemas.xmlsoap.org/wsdl/soap/"</span></div><div class="line">             xmlns:tns=<span class="string">"http://rand/"</span></div><div class="line">             xmlns:xsd=<span class="string">"http://www.w3.org/2001/XMLSchema"</span></div><div class="line">             xmlns=<span class="string">"http://schemas.xmlsoap.org/wsdl/"</span></div><div class="line">             targetNamespace=<span class="string">"http://rand/"</span> name=<span class="string">"RandServiceService"</span>&amp;gt;</div><div class="line">  &amp;lt;types&amp;gt;</div><div class="line">    &amp;lt;xsd:schema&amp;gt;</div><div class="line">      &amp;lt;xsd:<span class="keyword">import</span> namespace=<span class="string">"http://rand/"</span></div><div class="line">                  schemaLocation=<span class="string">"http://localhost:8888/rs?xsd=1"</span>&amp;gt;&amp;lt;/xsd:<span class="keyword">import</span>&amp;gt;</div><div class="line">    &amp;lt;/xsd:schema&amp;gt;</div><div class="line">  &amp;lt;/types&amp;gt;</div><div class="line">  &amp;lt;message name=<span class="string">"next1"</span>&amp;gt;</div><div class="line">    &amp;lt;part name=<span class="string">"parameters"</span> element=<span class="string">"tns:next1"</span>&amp;gt;&amp;lt;/part&amp;gt;</div><div class="line">  &amp;lt;/message&amp;gt;</div><div class="line">  &amp;lt;message name=<span class="string">"next1Response"</span>&amp;gt;</div><div class="line">    &amp;lt;part name=<span class="string">"parameters"</span> element=<span class="string">"tns:next1Response"</span>&amp;gt;&amp;lt;/part&amp;gt;</div><div class="line">  &amp;lt;/message&amp;gt;</div><div class="line">  &amp;lt;message name=<span class="string">"nextN"</span>&amp;gt;</div><div class="line">    &amp;lt;part name=<span class="string">"parameters"</span> element=<span class="string">"tns:nextN"</span>&amp;gt;&amp;lt;/part&amp;gt;</div><div class="line">  &amp;lt;/message&amp;gt;</div><div class="line">  &amp;lt;message name=<span class="string">"nextNResponse"</span>&amp;gt;</div><div class="line">    &amp;lt;part name=<span class="string">"parameters"</span> element=<span class="string">"tns:nextNResponse"</span>&amp;gt;&amp;lt;/part&amp;gt;</div><div class="line">  &amp;lt;/message&amp;gt;</div><div class="line">  &amp;lt;portType name=<span class="string">"RandService"</span>&amp;gt;</div><div class="line">    &amp;lt;operation name=<span class="string">"next1"</span>&amp;gt;</div><div class="line">      &amp;lt;input message=<span class="string">"tns:next1"</span>&amp;gt;&amp;lt;/input&amp;gt;</div><div class="line">      &amp;lt;output message=<span class="string">"tns:next1Response"</span>&amp;gt;&amp;lt;/output&amp;gt;</div><div class="line">    &amp;lt;/operation&amp;gt;</div><div class="line">    &amp;lt;operation name=<span class="string">"nextN"</span>&amp;gt;</div><div class="line">      &amp;lt;input message=<span class="string">"tns:nextN"</span>&amp;gt;&amp;lt;/input&amp;gt;</div><div class="line">      &amp;lt;output message=<span class="string">"tns:nextNResponse"</span>&amp;gt;&amp;lt;/output&amp;gt;</div><div class="line">    &amp;lt;/operation&amp;gt;</div><div class="line">  &amp;lt;/portType&amp;gt;</div><div class="line"></div><div class="line">  &amp;lt;!-- implementation dependent definition --&amp;gt;</div><div class="line">  &amp;lt;binding name=<span class="string">"RandServicePortBinding"</span> type=<span class="string">"tns:RandService"</span>&amp;gt;</div><div class="line">    &amp;lt;soap:binding transport=<span class="string">"http://schemas.xmlsoap.org/soap/http"</span></div><div class="line">                  style=<span class="string">"document"</span>&amp;gt;&amp;lt;/soap:binding&amp;gt;</div><div class="line">    &amp;lt;operation name=<span class="string">"next1"</span>&amp;gt;</div><div class="line">      &amp;lt;soap:operation soapAction=<span class="string">""</span>&amp;gt;&amp;lt;/soap:operation&amp;gt;</div><div class="line">      &amp;lt;input&amp;gt;</div><div class="line">        &amp;lt;soap:body use=<span class="string">"literal"</span>&amp;gt;&amp;lt;/soap:body&amp;gt;</div><div class="line">      &amp;lt;/input&amp;gt;</div><div class="line">      &amp;lt;output&amp;gt;</div><div class="line">        &amp;lt;soap:body use=<span class="string">"literal"</span>&amp;gt;&amp;lt;/soap:body&amp;gt;</div><div class="line">      &amp;lt;/output&amp;gt;</div><div class="line">    &amp;lt;/operation&amp;gt;</div><div class="line">    &amp;lt;operation name=<span class="string">"nextN"</span>&amp;gt;</div><div class="line">      &amp;lt;soap:operation soapAction=<span class="string">""</span>&amp;gt;&amp;lt;/soap:operation&amp;gt;</div><div class="line">      &amp;lt;input&amp;gt;</div><div class="line">        &amp;lt;soap:body use=<span class="string">"literal"</span>&amp;gt;&amp;lt;/soap:body&amp;gt;</div><div class="line">      &amp;lt;/input&amp;gt;</div><div class="line">      &amp;lt;output&amp;gt;</div><div class="line">        &amp;lt;soap:body use=<span class="string">"literal"</span>&amp;gt;&amp;lt;/soap:body&amp;gt;</div><div class="line">      &amp;lt;/output&amp;gt;</div><div class="line">    &amp;lt;/operation&amp;gt;</div><div class="line">  &amp;lt;/binding&amp;gt;</div><div class="line">  &amp;lt;service name=<span class="string">"RandServiceService"</span>&amp;gt;</div><div class="line">    &amp;lt;port name=<span class="string">"RandServicePort"</span> binding=<span class="string">"tns:RandServicePortBinding"</span>&amp;gt;</div><div class="line">      &amp;lt;soap:address location=<span class="string">"http://localhost:8888/rs"</span>&amp;gt;&amp;lt;/soap:address&amp;gt;</div><div class="line">    &amp;lt;/port&amp;gt;</div><div class="line">    &amp;lt;port name=<span class="string">"StandbyServicePort"</span> binding=<span class="string">"tns:RandServicePortBinding"</span>&amp;gt;</div><div class="line">      &amp;lt;soap:address location=<span class="string">"http://localhost:9999/rs"</span>&amp;gt;&amp;lt;/soap:address&amp;gt;</div><div class="line">    &amp;lt;/port&amp;gt;</div><div class="line">  &amp;lt;/service&amp;gt;</div><div class="line">&amp;lt;/definitions&amp;gt;</div></pre></td></tr></table></figure>
<p>In the following diagram, please observe the relationship:</p>
<ul>
<li>A web service can has only one PortType, but has multiple Bindings and Ports.</li>
<li>Multiple Bindings refer to the ONLY one PortType.</li>
<li>Multiple Ports can map into one Binding.<br><img src="/media/wsdl.png" alt="wsdl"></li>
</ul>
<h4 id="Port-Type"><a href="#Port-Type" class="headerlink" title="Port Type"></a>Port Type</h4><p><strong>Port type</strong> is an implementation-neutral definition. You can regard it as the equivalent of a Java Class.</p>
<p>It contains multiple <strong>operations with MEP(message exchange pattern)</strong>, which is similar as class methods. A parameter of a operation is called a <strong>part</strong>.</p>
<h4 id="Binding"><a href="#Binding" class="headerlink" title="Binding"></a>Binding</h4><p><strong>Binding</strong> is a wire/transport protocol definition. It includes the <strong>message format </strong>and <strong>transport</strong> combination.</p>
<h4 id="Port"><a href="#Port" class="headerlink" title="Port"></a>Port</h4><p><strong>Port</strong> is a term related deployment. Basically, it connects a <strong>Binding</strong> with a <strong>Endpoint</strong>.</p>
<h4 id="Target-namespace"><a href="#Target-namespace" class="headerlink" title="Target namespace"></a>Target namespace</h4><p>A namespace must be a URI. Sometimes using URL as the namespace may make others confused, because they may use this URL to download your WSDL but often failed. Instead using URN as the namespace can effectively avoid this case.</p>
<h3 id="WSDL-sections"><a href="#WSDL-sections" class="headerlink" title="WSDL sections"></a>WSDL sections</h3><h4 id="types-section"><a href="#types-section" class="headerlink" title="types section"></a>types section</h4><p>Here we can define XML Schema types or import types definitions from separate XSD files.</p>
<h4 id="message-section"><a href="#message-section" class="headerlink" title="message section"></a>message section</h4><p>Every message can have one or more parts. A part can be specify by <em>type</em> or <em>element</em> attribute.</p>
<h4 id="portType-section"><a href="#portType-section" class="headerlink" title="portType section"></a>portType section</h4><p>PortType basically defines an abstract service interface: <strong><em>operations</em> </strong>and the <strong>Message Exchange Patterns (MEP)</strong>.</p>
<h5 id="Message-Exchange-Patterns-MEP"><a href="#Message-Exchange-Patterns-MEP" class="headerlink" title="Message Exchange Patterns (MEP)"></a><strong>Message Exchange Patterns (MEP)</strong></h5><p>WSDL supports four basic patterns of operation:</p>
<table style="height: 184px;" border="1" width="744"><br><tbody><br><tr><br><td></td><br><td>use scenarios</td><br><td></td><br></tr><br><tr><br><td>In-Out</td><br><td>most commonly used: request / response</td><br><td><strong>*</strong></td><br></tr><br><tr><br><td>In-Only</td><br><td>send without expecting response: one-way messaging</td><br><td><strong><em></em></strong></td><br></tr><br><tr><br><td>Out-In</td><br><td><span id="solicit_response">solicit / response</span></td><br><td></td><br></tr><br><tr><br><td>Out-Only</td><br><td>one-way server push: notification or (asynchronous) callback</td><br><td></td><br></tr><br></tbody><br></table>

<h5 id="In-Out"><a href="#In-Out" class="headerlink" title="In-Out"></a>In-Out</h5><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">...</div><div class="line">&amp;lt;operation name=<span class="string">"query"</span>&amp;gt;</div><div class="line">  &amp;lt;input message=<span class="string">"tns:query"</span>&amp;gt;&amp;lt;/input&amp;gt;</div><div class="line">  &amp;lt;output message=<span class="string">"tns:queryResponse"</span>&amp;gt;&amp;lt;/output&amp;gt;</div><div class="line">&amp;lt;/operation&amp;gt;</div><div class="line">...</div></pre></td></tr></table></figure>
<h5 id="Out-In"><a href="#Out-In" class="headerlink" title="Out-In"></a>Out-In</h5><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">...</div><div class="line">&amp;lt;operation name=<span class="string">"questionnaire"</span>&amp;gt;</div><div class="line">  &amp;lt;output message=<span class="string">"tns:questionnaire"</span>&amp;gt;&amp;lt;/output&amp;gt;</div><div class="line">  &amp;lt;input message=<span class="string">"tns:questionnaireFeedback"</span>&amp;gt;&amp;lt;/input&amp;gt;</div><div class="line">&amp;lt;/operation&amp;gt;</div><div class="line">...</div></pre></td></tr></table></figure>
<h5 id="In-Only"><a href="#In-Only" class="headerlink" title="In-Only"></a>In-Only</h5><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">...</div><div class="line">&amp;lt;operation name=<span class="string">"ping"</span>&amp;gt;</div><div class="line">  &amp;lt;input message=<span class="string">"tns:ping"</span>&amp;gt;&amp;lt;/input&amp;gt;</div><div class="line">&amp;lt;/operation&amp;gt;</div><div class="line">...</div></pre></td></tr></table></figure>
<h5 id="Out-Only"><a href="#Out-Only" class="headerlink" title="Out-Only"></a>Out-Only</h5><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">...</div><div class="line">&amp;lt;operation name=<span class="string">"notification"</span>&amp;gt;</div><div class="line">  &amp;lt;output message=<span class="string">"tns:notificationResponse"</span>&amp;gt;&amp;lt;/output&amp;gt;</div><div class="line">&amp;lt;/operation&amp;gt;</div><div class="line">...</div></pre></td></tr></table></figure>
<h4 id="bindings-section"><a href="#bindings-section" class="headerlink" title="bindings section"></a>bindings section</h4><p>There can be many bindings sections.</p>
<p>Bindings defines a concrete Web service implementation, like transport (HTTP, STMP..), service style and SOAP version.</p>
<h5 id="transport"><a href="#transport" class="headerlink" title="transport"></a>transport</h5><p>transport options: http, stmp…</p>
<h5 id="document-style-vs-rpc-style"><a href="#document-style-vs-rpc-style" class="headerlink" title="document-style vs. rpc-style"></a>document-style vs. rpc-style</h5><p>service styles: <strong>document-style</strong>, <strong>rpc-style</strong></p>
<ul>
<li><p><code>document</code> style means that SOAP body contains a XML document which can be validated against pre-defined XML schema document.<br>(There’s also a variation called <em>wrapped</em> that is still specified as document)</p>
</li>
<li><p><code>rpc</code> style really means that SOAP message body contains an XML representation of a method call and uses the names of the method and its parameters to generate XML structures that represent a method’s call stack. It adds extra elements to simulate a method call.<br>(rpc is a misleading name, which has nothing to do with a programming model)</p>
</li>
</ul>
<h5 id="literal-vs-encoded"><a href="#literal-vs-encoded" class="headerlink" title="literal vs. encoded"></a>literal vs. encoded</h5><p>operation parts “use” has two options: <strong>encoded</strong>, <strong>literal</strong>. It determines how a data value should be encoded in an XML format.</p>
<ul>
<li>literal means that the data is serialized according to a XML schema</li>
<li>encoded means that the service’s type definitions come from implicit encoding rules, typically the rules in the SOAP 1.1 specification.<br>The soapAction attribute specifies the value of the SOAPAction header for this operation as an absolute URL.</li>
</ul>
<p>For the HTTP protocol binding of SOAP, this is value required (it has no default value). For other SOAP protocol bindings, it MUST NOT be specified.</p>
<h4 id="service-section"><a href="#service-section" class="headerlink" title="service section"></a>service section</h4><p>Defines a port, or Web service destination, in terms of the above binding plus a URL.</p>
<p>The <code>service</code> element has <code>port</code> subelements, where a <code>port</code> is linked to a <code>binding.</code></p>
<p>The address subelement of a port specifies a <code>location</code>, whose value is commonly called the <strong>service endpoint.</strong></p>
<h3 id="Common-confusions"><a href="#Common-confusions" class="headerlink" title="Common confusions"></a>Common confusions</h3><h4 id="service-styles-document-vs-rpc"><a href="#service-styles-document-vs-rpc" class="headerlink" title="service styles: document vs. rpc"></a>service styles: document vs. rpc</h4><table border="1"><br><tbody><br><tr bgcolor="#990033"><br><td></td><br><td>RPC</td><br><td>Document</td><br></tr><br><tr bgcolor="#cccccc"><br><td><code>&amp;lt;soapbind:binding&amp;gt;</code>element</td><br><td><code>style=&quot;rpc&quot;</code></td><br><td><code>style=&quot;document&quot;</code></td><br></tr><br><tr bgcolor="#ffffff"><br><td><code>&amp;lt;wsdl:part&amp;gt;</code>element(s)</td><br><td><span style="text-decoration: underline;">Any number</span> of <code>&amp;lt;part&amp;gt;</code> elements, each containing a <em>type</em> attribute</td><br><td><span style="text-decoration: underline;">Single</span> <code>&amp;lt;part&amp;gt;</code> element containing an _element_attribute; zero also allowed</td><br></tr><br></tbody><br></table><br>RPC-style SOAP:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;tns:matchNoteAndNote xmlns:tns=<span class="string">"urn:outline.demo"</span>&amp;gt;</div><div class="line">    &amp;lt;in0 xsi:type=<span class="string">"xsd:string"</span>&amp;gt;<span class="number">0000000000</span>&amp;lt;/in0&amp;gt;</div><div class="line">    &amp;lt;in1 xsi:type=<span class="string">"xsd:string"</span>&amp;gt;<span class="number">000000000</span>B&amp;lt;/in1&amp;gt;</div><div class="line">&amp;lt;/tns:matchNoteAndNote&amp;gt;</div></pre></td></tr></table></figure><br><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;tns:matchNoteAndNoteResponse xmlns:tns=<span class="string">"urn:outline.demo"</span>&amp;gt;</div><div class="line">    &amp;lt;matchNoteAndNoteReturn xsi:type=<span class="string">"xsd:string"</span>&amp;gt;yes&amp;lt;/in0&amp;gt;</div><div class="line">&amp;lt;/tns:matchNoteAndNoteResponse&amp;gt;</div></pre></td></tr></table></figure><br><br>Document-style SOAP:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;out:getNoteResponse xmlns:out=<span class="string">"urn:outline.demo"</span>&amp;gt;</div><div class="line">    &amp;lt;out:note key=<span class="string">"000000000B"</span> &amp;gt;</div><div class="line">        &amp;lt;out:content&amp;gt;test&amp;lt;/out:content&amp;gt;</div><div class="line">    &amp;lt;/out:note&amp;gt;</div><div class="line">&amp;lt;/out:getNoteResponse&amp;gt;</div></pre></td></tr></table></figure><br><br>#### uses: literal vs. encoded<br><br><table border="1"><br><tbody><br><tr bgcolor="#990033"><br><td></td><br><td><strong>SOAP encoded</strong></td><br><td><strong>Literal</strong></td><br></tr><br><tr bgcolor="#cccccc"><br><td><code>&amp;lt;soapbind:body&amp;gt;</code> <code>use</code>attribute</td><br><td><code>use=&quot;encoded&quot;</code></td><br><td><code>use=&quot;literal&quot;</code></td><br></tr><br><tr bgcolor="#ffffff"><br><td>Other <code>&amp;lt;soapbind:body&amp;gt;</code>attributes</td><br><td><code>encodingStyle=&quot;http://schemas.xmlsoap.org/soap/encoding/&quot;</code></td><br><td>Optional: <code>parts</code> attribute referring to a<code>&amp;lt;wsdl:part&amp;gt;</code> name</td><br></tr><br></tbody><br></table>

<h4 id="SoapAction"><a href="#SoapAction" class="headerlink" title="SoapAction"></a>SoapAction</h4><p>//TODO</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/20/garbage-collection/" itemprop="url">
                  Garbage Collection
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-20T14:13:28+08:00" content="2015-04-20">
              2015-04-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JVM/" itemprop="url" rel="index">
                    <span itemprop="name">JVM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/20/garbage-collection/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/20/garbage-collection/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>References:</p>
<ul>
<li>&lt;<a href="https://www.artima.com/insidejvm/ed2/index.html" target="_blank" rel="external">Inside the Java Virtual Machine</a>&gt;</li>
<li>&lt;Java Performance - The Definitive Guide&gt;</li>
</ul>
<h3 id="GC-overview"><a href="#GC-overview" class="headerlink" title="GC overview"></a>GC overview</h3><h4 id="Heap-Layout"><a href="#Heap-Layout" class="headerlink" title="Heap Layout"></a>Heap Layout</h4><p><img src="/media/Hotspot-VM-heap-layout.png" alt="Hotspot-VM-heap-layout"></p>
<h4 id="Geneation-spaces"><a href="#Geneation-spaces" class="headerlink" title="Geneation spaces"></a>Geneation spaces</h4><p>Nearly every JVM uses generational garbage collectors. They work by splitting the heap into different generations:</p>
<ul>
<li>Old generation (tenured generation)</li>
<li>Young generation, which is further divided into sections: Eden and Survivor spaces.<br><img src="/media/young-generation.png" alt="young-generation"></li>
</ul>
<h4 id="minor-GC"><a href="#minor-GC" class="headerlink" title="minor GC"></a>minor GC</h4><p>GC for the young generation is called <strong>minor GC</strong>. All GC algorithms have <em><strong>stop-the-world</strong></em> pauses during collection of the young generation.</p>
<ul>
<li>Objects that are no longer in use are discarded, and objects that are still in use are moved elsewhere.</li>
<li>all objects in eden are either moved to the unused survivor space(To survivor space) or discarded:</li>
<li>all objects in From survivor space are either discarded or moved to the unused survivor space(To survivor space) or moved to the old generation (when still liveable after a few minor GC).</li>
<li>Since all objects are moved, the young generation is automatically compacted when it is collected.</li>
<li>After every minor GC, the From survivor space and To survivor space are swapped.<br><img src="/media/minor-gc.png" alt="minor-gc"></li>
</ul>
<h4 id="full-GC"><a href="#full-GC" class="headerlink" title="full GC"></a>full GC</h4><p>GC for the old generation collection is called <strong>full GC</strong>. Concurrent collectors scan for unused objects can occur without stopping application threads, such as CMS and G1.</p>
<h3 id="Garbage-collectors"><a href="#Garbage-collectors" class="headerlink" title="Garbage collectors"></a>Garbage collectors</h3><p>Early GC uses <strong>reference counting</strong> strategy. But now nearly all the GCs use <strong>Tracing</strong> garbage strategies, which trace out the graph of object references starting with the root nodes.</p>
<p>The basic tracing algorithm is called “mark and sweep” :</p>
<ul>
<li>In the mark phase, the garbage collector traverses the tree of references and marks each object it encounters.</li>
<li>In the sweep phase, unmarked objects are freed, and the resulting memory is made available to the executing program.</li>
<li><p>In the JVM, the sweep phase must include finalization of objects.<br>Two strategies for defragmentation: <strong>compacting</strong> and <strong>copying</strong></p>
</li>
<li><p><strong>compacting </strong>algorithm<strong> </strong>slides live objects over free memory space toward one end of the heap</p>
</li>
<li><strong>copying </strong>algorithm moves all live objects to a new area, placed side by side with current area.<br><table border="1" width="1207"><br><tbody><br><tr><br><td></td><br><td><strong>serial GC</strong></td><br><td><strong>throughput / parallel GC</strong></td><br><td><strong>CMS GC</strong></td><br><td><strong>G1</strong></td><br></tr><br><tr><br><td>designed for</td><br><td>client machine: 32bit JVM on Windows or single processor machine (default)</td><br><td>server machine: multi-CPU Unix machine or 64-bit JVM (default)</td><br><td></td><br><td>process large heaps (greater than<br>about 4 GB) with minimal pauses  divides the heap into a number of regions</td><br></tr><br><tr><br><td>minor GC</td><br><td>performs with single thread  stop all application threads</td><br><td>performs with multiple threads  stop all application threads</td><br><td>performs with multiple threads  stops all application threads</td><br><td>performs with multiple threads  stops all application threads</td><br></tr><br><tr><br><td>full GC</td><br><td>performs with single threads  stop all application threads</td><br><td>performs with multiple threads  stop all application threads</td><br><td>uses one or more<br>background threads to periodically scan through the old generation  don’t stop application threads</td><br><td>processed by background threads  don’t need to stop the application threads</td><br></tr><br><tr><br><td>flag</td><br><td>-XX:+UseSerialGC</td><br><td>-XX:+UseParallelGC  -XX:+UseParallelOldGC</td><br><td>-XX:+UseConcMarkSweepGC  -XX:+UseParNewGC</td><br><td>-XX:+UseG1GC</td><br></tr><br><tr><br><td></td><br><td></td><br><td></td><br><td>when too fragmented -&gt; serial colletor</td><br><td>G1 can clean up objects from the old generation<br>by copying from one region into another,it (at least partially) compacts<br>the heap during normal processing  less likely to be fragmented</td><br></tr><br></tbody><br></table><br>In GC algorithms, there are several terms:</li>
</ul>
<p>Parallelism / Serialism: there is a single thread or multiple threads for the GC?</p>
<p>Concurrency: the GC threads are running exclusively or along with the application threads? If exclusively, that’s when the “<strong>stop-the-world</strong>“ happens.</p>
<p>&nbsp;</p>
<p><img src="/media/gc-comparison.png" alt="gc-comparison"></p>
<p>You can see, all GC algorithms use “stop-the-world” when doing minor GC.</p>
<p>Triggered when:</p>
<ul>
<li>a minor GC will be triggered when the new generation is full</li>
<li>a full GC will be triggered when the old generation is full, or a concurrent GC (if applicable) will be triggered when the heap starts to fill up.</li>
</ul>
<h3 id="Serial-collector"><a href="#Serial-collector" class="headerlink" title="Serial collector"></a>Serial collector</h3><p><img src="/media/serial-gc.png" alt="serial-gc"></p>
<h3 id="Parallel-collector"><a href="#Parallel-collector" class="headerlink" title="Parallel collector"></a>Parallel collector</h3><p>Default GC for server class machine. The throughput matters!</p>
<p><strong>Two variations</strong></p>
<ul>
<li><p>Multi-threaded young generation (minor) GC with single threaded old generation (full) GC<br>-XX:+UseParallelGC   default GC in Java 6 through Java 7 update 3.</p>
</li>
<li><p>Multiple-threaded young generation (minor) GC with multi-threaded old generation (full) GC<br>-XX:+UseParallelOldGC   default GC in Java 7 update 4 or over.</p>
</li>
</ul>
<p>Both young generation and old generation GC(both minor and full GC) are “stop-the-world” events.</p>
<p><img src="/media/parallelGC.png" alt="parallelGC"></p>
<p><img src="/media/parallelOldGC.png" alt="parallelOldGC"></p>
<h4 id="Minor-GC"><a href="#Minor-GC" class="headerlink" title="Minor GC"></a>Minor GC</h4><p><img src="/media/throughout-minor-gc.png" alt="throughout-minor-gc"></p>
<h4 id="Full-GC"><a href="#Full-GC" class="headerlink" title="Full GC"></a>Full GC</h4><p><img src="/media/throughout-full-gc.png" alt="throughout-full-gc"></p>
<h3 id="CMS-collector"><a href="#CMS-collector" class="headerlink" title="CMS collector"></a>CMS collector</h3><p>CMS is the Concurrent Mark-and-Sweep collector.</p>
<p>The minor GC has no difference with Parallel collector, but the full GC cycle is <em><u>mostly</u></em> concurrent and includes several phases: initial mark phase, concurrent mark &amp; pre-cleaning phase, remark phase, concurrent sweep phase.</p>
<p>There are still “stop-the-world” events in the initial mark and remark phases.</p>
<p><img src="/media/cms-gc.png" alt="cms-gc"></p>
<h4 id="Minor-GC-1"><a href="#Minor-GC-1" class="headerlink" title="Minor GC"></a>Minor GC</h4><p>Trigger when young generation exhausted</p>
<p><img src="/media/cms-minor-gc.png" alt="cms-minor-gc"></p>
<h4 id="full-GC-Concurrent-Cycle"><a href="#full-GC-Concurrent-Cycle" class="headerlink" title="full GC (Concurrent Cycle)"></a>full GC (Concurrent Cycle)</h4><ul>
<li>mostly concurrent old generation GC, some phases run concurrently with the application, some are “stop-the-world”, some phases are single threaded.</li>
<li>does not compact old generation, but the “stop-the-world”, single threaded compaction will occur if: 1) concurrent cycle not keeping up 2) too fragment.<br>Triggered at old generation space occupancy threshold – default is around 70%. This can be adjusted by<code>-XX:CMSInitiatingOccupancyFraction=n</code><br><table style="height: 254px;" border="1" width="748"><br><tbody><br><tr><br><td>Phases</td><br><td></td><br><td></td><br></tr><br><tr><br><td>initial-mark phase</td><br><td>“stop-the-world”</td><br><td>single threaded</td><br></tr><br><tr><br><td>concurrent marking phase</td><br><td>run concurrently with the application</td><br><td>multi-threaded</td><br></tr><br><tr><br><td>pre-cleaning phase</td><br><td>run concurrently with the application</td><br><td>multi-threaded</td><br></tr><br><tr><br><td>remark phase</td><br><td>“stop-the-world”</td><br><td>multi-threaded</td><br></tr><br><tr><br><td>concurrent sweeping phase</td><br><td>run concurrently with the application</td><br><td>multi-threaded</td><br></tr><br></tbody><br></table><br><img src="/media/cms-full-gc.png" alt="cms-full-gc"></li>
</ul>
<h4 id="PerGen-collection-enable"><a href="#PerGen-collection-enable" class="headerlink" title="PerGen collection enable"></a>PerGen collection enable</h4><p>Permanent generation space can also be collected concurrently by set:</p>
<p><code>-XX:+CMSClassUnloadingEnable</code></p>
<p><code>-XX:CMSInitiatingPermOccupancyFraction=n</code></p>
<p><code>-XX:+CMSInitiatingPermOccupancyOnly</code></p>
<h3 id="G1-collector"><a href="#G1-collector" class="headerlink" title="G1 collector"></a>G1 collector</h3><p>G1 is Garbage First.</p>
<p>G1 uses a drastically different Java heap layout to the other garbage collectors in the HotSpot VM. It splits the Java heap into equal-sized chunks called regions.<br>Even though G1 is generational, it does not have <strong>physically</strong> separate spaces for the young and old generations. Instead, each generation is a set of (maybe noncontiguous) regions.</p>
<p><img src="/media/g1-layout.png" alt="g1-layout"></p>
<p><img src="/media/cms-vs-g1.png" alt="cms-vs-g1"></p>
<p>PerGen(JDK 7) / metaspace (JDK 8)</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/19/jvm-knowledge/" itemprop="url">
                  JVM knowledge
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-18T22:28:39+08:00" content="2015-04-18">
              2015-04-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JVM/" itemprop="url" rel="index">
                    <span itemprop="name">JVM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/19/jvm-knowledge/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/19/jvm-knowledge/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>references:</p>
<ul>
<li>&lt;<a href="https://www.artima.com/insidejvm/ed2/index.html" target="_blank" rel="external">Inside the Java Virtual Machine</a>&gt;</li>
<li>&lt;<a href="https://docs.oracle.com/javase/specs/jvms/se7/html/" target="_blank" rel="external">Java Virtual Machine specification</a> 7&gt;</li>
</ul>
<h3 id="run-time-data-areas"><a href="#run-time-data-areas" class="headerlink" title="run-time data areas"></a>run-time data areas</h3><p><img src="/media/jvm.png" alt="jvm"></p>
<h4 id="pc-registers"><a href="#pc-registers" class="headerlink" title="pc registers"></a>pc registers</h4><p>Every JVM thread has its own pc(program counter) register.</p>
<p>The pc register is one word in size, so it can hold both a native pointer and a <code>returnAddress</code>.</p>
<p>If a thread is executing a native method, the value of the pc register is undefined.</p>
<h4 id="JVM-stacks"><a href="#JVM-stacks" class="headerlink" title="JVM stacks"></a>JVM stacks</h4><p>Every thread has a private JVM stacks. It stores frames.</p>
<p>It can be of fixed size or dynamically expanded and contracted as required.</p>
<p>The JVM only performs two operations directly on Java Stacks: it pushes and pops frames.</p>
<p><img src="/media/jvm-stacks-per-thread.png" alt="jvm-stacks-per-thread"></p>
<h4 id="heap"><a href="#heap" class="headerlink" title="heap "></a>heap <script src="file:///c:\program files (x86)\eudic\dat\res\main.js" type="text/javascript"></script></h4><blockquote>
<div id="ID679732753" class="explain_wrap"><br><br><div id="ID679732753Child" class="expDiv"><span style="color: #0000cd;">hiːp</span></div>

<p></p></div><br>The JVM has a heap. It stores all class instances and arrays.<p></p>
</blockquote>
<p>Heap storage for objects is reclaimed by an automatic storage management system (aka. GC or garbage collector).</p>
<p>It can be of fixed size or dynamically expanded as required by the computation and may be contracted if larger heap becomes unnecessary.</p>
<p>JVM provides options for <strong>initial size</strong>, and  if the heap can be dynamically expanded or contracted, users can control over the <strong>maximum and minimum size</strong> of the heap.</p>
<h4 id="method-area"><a href="#method-area" class="headerlink" title="method area"></a>method area</h4><p>It’s logically part of the heap. It stores per-class structures, such as the run-time constant pool, field and method data and the code for methods and constructors (including special methods like &lt;init&gt; and &lt;clinit&gt;).</p>
<p>&nbsp;</p>
<p>per-class structure(class data) includes:</p>
<h5 id="Type-Information"><a href="#Type-Information" class="headerlink" title="Type Information"></a>Type Information</h5><ul>
<li>The fully qualified name of the type</li>
<li>The fully qualified name of the type’s direct superclass (unless the type is an interface or class <code>java.lang.Object</code>, neither of which have a superclass)</li>
<li>Whether or not the type is a class or an interface</li>
<li>The type’s modifiers ( some subset of<code>`public</code>, <code>abstract</code>, <code>final</code>)</li>
<li>An ordered list of the fully qualified names of any direct superinterfaces</li>
</ul>
<h5 id="run-time-Constant-Pool"><a href="#run-time-Constant-Pool" class="headerlink" title="run-time Constant Pool"></a>run-time Constant Pool</h5><p>A constant pool is an ordered set of constants used by the type, including literals (string, integer, and floating point constants) and symbolic references to types, fields, and methods.</p>
<p>These symbolic references to all types, fields, and methods used by a type, the constant pool plays a central role in the <strong><em>dynamic linking</em></strong> of Java programs.</p>
<h5 id="Field-Information"><a href="#Field-Information" class="headerlink" title="Field Information"></a>Field Information</h5><ul>
<li>The field’s name</li>
<li>The field’s type</li>
<li>The field’s modifiers (some subset of <code>public</code>, <code>private</code>, <code>protected</code>, <code>static</code>, <code>final</code>, <code>volatile</code>, <code>transient</code>)</li>
</ul>
<h5 id="Method-Information"><a href="#Method-Information" class="headerlink" title="Method Information"></a>Method Information</h5><ul>
<li>The method’s name</li>
<li>The method’s return type (or <code>void</code>)</li>
<li>The number and types (in order) of the method’s parameters</li>
<li><p>The method’s modifiers (some subset of <code>public</code>, <code>private</code>, <code>protected</code>, <code>static</code>, <code>final</code>, <code>synchronized</code>, <code>native</code>, <code>abstract</code>)<br>for non-abstract method:</p>
</li>
<li><p>The method’s bytecodes</p>
</li>
<li>The sizes of the operand stack and local variables sections of the method’s stack frame (these are described in a later section of this chapter)</li>
<li>An exception table</li>
</ul>
<h5 id="Class-Variables"><a href="#Class-Variables" class="headerlink" title="Class Variables"></a>Class Variables</h5><p>JVM must allocate memory from the method area for each non-final class variable declared in the class.</p>
<p>final class variable (constant) is not here, they are in constant pool instead.</p>
<h5 id="A-Reference-to-Class-ClassLoader"><a href="#A-Reference-to-Class-ClassLoader" class="headerlink" title="A Reference to Class ClassLoader"></a>A Reference to Class <code>ClassLoader</code></h5><p>The virtual machine must store a reference to the user-defined class loader that loaded the type. (if the type is loaded by bootstrap class loader, the reference is not required)</p>
<blockquote>
<p>NOTICE: method area just stores the reference to ClassLoader. The ClassLoader instance itself is allocated in the heap.</p>
</blockquote>
<h5 id="A-Reference-to-Class-Class"><a href="#A-Reference-to-Class-Class" class="headerlink" title="A Reference to Class Class"></a>A Reference to Class <code>Class</code></h5><blockquote>
<p>NOTICE: method area just stores the reference to Class. The Class instance itself is allocated in the heap.</p>
</blockquote>
<h5 id="Method-Tables"><a href="#Method-Tables" class="headerlink" title="Method Tables"></a>Method Tables</h5><p>A method table is an array of direct references to all the instance methods that may be invoked on a class instance, including instance methodsinherited from superclasses.</p>
<p>A method table allows a virtual machine to quickly locate an instance method invoked on an object.</p>
<p><img src="/media/method-area-and-heap.gif" alt="method-area-and-heap"></p>
<h3 id="run-time-data-structures"><a href="#run-time-data-structures" class="headerlink" title="run-time data structures"></a>run-time data structures</h3><h4 id="run-time-constant-pool"><a href="#run-time-constant-pool" class="headerlink" title="run-time constant pool"></a>run-time constant pool</h4><p>It’s a per-class or per-interface representation of the <span style="font-family: 'courier new', courier;">constant_pool</span> table in a <span style="font-family: 'courier new', courier;">class</span> file.</p>
<p>It’s constructed when the class or the interface created by JVM.</p>
<h4 id="frames"><a href="#frames" class="headerlink" title="frames"></a>frames</h4><p>A frame is used to store data and partial result, as well as to perform dynamic linking, return values for methods and dispatch exceptions.</p>
<p>It’s created each time a method is invoked.</p>
<p>Frames could be allocated on a contiguous stack, or they could be allocated on a heap, or some combination of both.</p>
<p>In a given thread of control, only the frame for the executing method is active. This active frame is calls <strong>current frame</strong>, and the executing method is called <strong>current method</strong>. The class in which the current method is defined is called<strong> current class</strong>.</p>
<p><img src="/media/16fig03.gif" alt="16fig03"></p>
<p>Now we will go to the components of a frame:</p>
<h5 id="local-variables"><a href="#local-variables" class="headerlink" title="local variables"></a>local variables</h5><p>Each frame contains an array of local variables known as <em>local variables</em>.</p>
<p>The length of the local variable array can be determined at compile-time and supplied in a binary class file.</p>
<ul>
<li>A single variable can hold a value of type <span style="font-family: 'courier new', courier;">boolean, byte, char, short, int, float, reference, or returnAddress</span>.</li>
<li>A pair of variables can hold a value of type<span style="font-family: 'courier new', courier;"> long, double</span>.<br>On class method invocation, any parameters are passed in from local variable 0.</li>
</ul>
<p>On instance method invocation, local variable 0 is always the reference to the instance object. (aka, <span style="font-family: 'courier new', courier;">this</span>)<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example3a</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">runClassMethod</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">long</span> l, <span class="keyword">float</span> f,</span></span></div><div class="line">        <span class="keyword">double</span> d, Object o, <span class="keyword">byte</span> b) &#123;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">runInstanceMethod</span><span class="params">(<span class="keyword">char</span> c, <span class="keyword">double</span> d, <span class="keyword">short</span> s,</span></span></div><div class="line">        <span class="keyword">boolean</span> b) &#123;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="/media/method-parameters-on-local-variables.png" alt="method-parameters-on-local-variables"></p>
<h5 id="operand-stack"><a href="#operand-stack" class="headerlink" title="operand stack"></a>operand stack</h5><p>Each frame contains a LIFO stack known as <em>operand stack</em>. It’s mainly for operations on operands and partial/intermediate result storage.</p>
<p>The maximum depth of the operand stack can be determined at compile-time and supplied in a binary class file.</p>
<p>operations on operand stack:</p>
<ul>
<li>load constants or values from local variables onto the operand stack</li>
<li>tack operands from the operand stack, operate on them, and push the result onto the operand stack.<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">int</span> c = a + b</div></pre></td></tr></table></figure>
</li>
</ul>
<p>The above source code has the instructions:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">iload_0    <span class="comment">// push the int in local variable 0</span></div><div class="line">iload_1    <span class="comment">// push the int in local variable 1</span></div><div class="line">iadd       <span class="comment">// pop two ints, add them, push result</span></div><div class="line">istore_2   <span class="comment">// pop int, store into local variable 2</span></div></pre></td></tr></table></figure></p>
<p><img src="/media/add-two-local-variables.png" alt="add-two-local-variables"></p>
<h5 id="Frame-Data"><a href="#Frame-Data" class="headerlink" title="Frame Data"></a>Frame Data</h5><p>The Java stack frame includes data to support constant pool resolution, normal method return, and exception dispatch, also some implementation dependent information, such as data to support debugging.</p>
<h6 id="normal-method-invocation-completion"><a href="#normal-method-invocation-completion" class="headerlink" title="normal method invocation completion"></a>normal method invocation completion</h6><p>When normal completion, the frame of current method is popped and the return value (if any) is pushed onto the operand stack of the invoker’s frame.</p>
<h6 id="abrupt-method-invocation-completion"><a href="#abrupt-method-invocation-completion" class="headerlink" title="abrupt method invocation completion"></a>abrupt method invocation completion</h6><p>Every method is associated with zero or more <em>exception handlers</em>.</p>
<p>When an exception occurs, the JVM searches for a matching exception handler in the current method.</p>
<p>When no such exception handler is found to handle the exception, the current method invocation completes abruptly. At this time, the operand stack and local variables of the current method invocation are discarded, and its frame is popped. Then the exception is rethrowed in the context of the invoker’s frame and so on.</p>
<p>If no suitable exception handler is found before the top of method invocation chain is reached, the execution of the thread is terminated.</p>
<p>The following is an possible implementation which allocates frames from the heap.</p>
<p><img src="/media/frames-in-heap.png" alt="frames-in-heap"></p>
<h3 id="class-file-format"><a href="#class-file-format" class="headerlink" title="class file format"></a>class file format</h3><p>This is about binary representation of a class.</p>
<h3 id="loading-linking-and-initializing"><a href="#loading-linking-and-initializing" class="headerlink" title="loading, linking and initializing"></a>loading, linking and initializing</h3><p>This is for run-time representation of a class.</p>
<p>### </p>
<p>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/18/apache-cxf-and-axis-2-tutorial/" itemprop="url">
                  Apache CXF and Axis 2 tutorial
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-18T19:47:09+08:00" content="2015-04-18">
              2015-04-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Web-Service/" itemprop="url" rel="index">
                    <span itemprop="name">Web Service</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/18/apache-cxf-and-axis-2-tutorial/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/18/apache-cxf-and-axis-2-tutorial/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Apache-Axis2"><a href="#Apache-Axis2" class="headerlink" title="Apache Axis2"></a>Apache Axis2</h3><h4 id="How-to-build-a-service"><a href="#How-to-build-a-service" class="headerlink" title="How to build a service"></a>How to build a service</h4><p>Axis2 supports 3 programming model</p>
<h5 id="Create-a-service-from-scratch"><a href="#Create-a-service-from-scratch" class="headerlink" title="Create a service from scratch"></a>Create a service from scratch</h5><ul>
<li>Write a class whose methods use OMElement as arguments and/or return type</li>
<li>create a services.xml</li>
<li>package  as a .aar file</li>
<li>deploy</li>
</ul>
<h5 id="POJO-for-rpc-style-services"><a href="#POJO-for-rpc-style-services" class="headerlink" title="POJO for rpc-style services"></a>POJO for rpc-style services</h5><h5 id="Generate-the-service-skeleton-from-WSDL"><a href="#Generate-the-service-skeleton-from-WSDL" class="headerlink" title="Generate the service skeleton from WSDL"></a>Generate the service skeleton from WSDL</h5><p>&nbsp;</p>
<p><table border="２" width="100%" cellspacing="0" cellpadding="0"></table></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<td valign="top" width="12%">

<p><strong>实现方式</strong></p>
<p></p></td><p></p>
<td valign="top" width="22%">

<p><strong>创建方式</strong></p>
<p></p></td><p></p>
<td valign="top" width="14%">

<p><strong>应用文档对象模型解析(</strong>消息绑定)</p>
<p></p></td><p></p>
<p><td valign="top" width="50%"><strong>　　　应用(数据绑定框架)解析**</strong>　(xml to DO)** 可插入的数据绑定</td><br></p>
<p><tr></tr></p>
<td valign="top" width="12%">

<p><strong>POJOs</strong></p>
<p></p></td><p></p>
<td valign="top" width="22%">

<p>pojo结合rpc模式</p>
<p></p></td><p></p>
<td valign="top" width="14%">

<p><strong>AXIOM</strong></p>
<p></p></td><p></p>
<p><td valign="top" width="50%"><strong>　　　　　POJOs</strong>POJO+RPC</td></p>
<p>优点：自己写客户端，容易出错，不用熟悉WSDL。</p>
<p>缺点：用此方法进行调试不容易<br></p>
<p><tr></tr></p>
<td valign="top" width="12%">

<p><strong>AXIOM</strong></p>
<p></p></td><p></p>
<td valign="top" width="22%">

<p>axiom api从底层写</p>
<p></p></td><p></p>
<td valign="top" width="14%">

<p><strong>AXIOM</strong></p>
<p></p></td><p></p>
<p><td valign="top" width="50%"><em>　　　　　　　无</em>优点：可以进行高效的 SOAP 消息处理</td></p>
<p>缺点：全部自己实现，不现实。<br></p>
<p><tr></tr></p>
<td valign="top" width="12%">

<p><strong>ADB</strong></p>
<p></p></td><p></p>
<td rowspan="3" valign="top" width="22%">

<p>从wsdl生成</p>
<p>相应框架，</p>
<p>然后填写相</p>
<p>应逻辑</p>
<p></p></td><p></p>
<td valign="top" width="14%">

<p><strong>AXIOM</strong></p>
<p></p></td><p></p>
<p><td valign="top" width="50%"><strong>　　　　　　ADB</strong>开发符合软件工程的过程，先写设计，定接口　　（写WSDL）然后再实现。用WSDL生成代码，不用关　　心底层的调用。</td><br></p>
<p><tr></tr></p>
<td valign="top" width="12%">

<p><strong>XMLBeans</strong></p>
<p></p></td><p></p>
<td valign="top" width="14%">

<p><strong>AXIOM</strong></p>
<p></p></td><p></p>
<p><td valign="top" width="50%">　　　　　　XMLBean(BEA)</td><br></p>
<p><tr></tr></p>
<td valign="top" width="12%">

<p><strong>JiBX</strong></p>
<p></p></td><p></p>
<td valign="top" width="14%">

<p><strong>AXIOM</strong></p>
<p></p></td><p></p>
<p><td valign="top" width="50%">　　　　　　　JiBX</td><br><br><br><br>&nbsp;</p>
<h4 id="How-to-deploy-a-service"><a href="#How-to-deploy-a-service" class="headerlink" title="How to deploy a service"></a>How to deploy a service</h4><p>Often axis2 uses its own package named .aar, and the layout of this archive is like:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">\---BookService</div><div class="line">    \---META-INF</div><div class="line">    |    services.xml</div><div class="line">    |</div><div class="line">    \---lib</div><div class="line">    |    dependency1.jar</div><div class="line">    |    dependency2.jar</div><div class="line">    |</div><div class="line">    \---com</div><div class="line">        +---company</div><div class="line">        |    Service.class</div><div class="line">        |</div></pre></td></tr></table></figure></p>
<p>But this is mainly for a standalone deployment scenario.</p>
<h5 id="embedded-in-war"><a href="#embedded-in-war" class="headerlink" title="embedded in .war"></a>embedded in .war</h5><p>Most of time, we embed our service into our web application and the service implementation will reuse the application logic.</p>
<p>In embedded mode, we needn’t package as a .aar. Just a directory in WEB-INF/services is OK.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">\---book</div><div class="line">    |   pom.xml</div><div class="line">    |   README</div><div class="line">    |</div><div class="line">    \---src</div><div class="line">        +---main</div><div class="line">        |   |   log4j.properties</div><div class="line">        |   |</div><div class="line">        |   \---samples</div><div class="line">        |       \---demo</div><div class="line">        |               Book.java</div><div class="line">        |               BookService.java</div><div class="line">        |</div><div class="line">        +---test</div><div class="line">        \---webapp</div><div class="line">            \---WEB-INF</div><div class="line">                |   web.xml</div><div class="line">                \----conf</div><div class="line">                |        axis2.xml</div><div class="line">                |</div><div class="line">                \---services</div><div class="line">                    \---BookService</div><div class="line">                        \---META-INF</div><div class="line">                                services.xml</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/18/ibm-integration-bus/" itemprop="url">
                  IBM Integration Bus
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-18T18:47:50+08:00" content="2015-04-18">
              2015-04-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ESB/" itemprop="url" rel="index">
                    <span itemprop="name">ESB</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/18/ibm-integration-bus/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/18/ibm-integration-bus/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/18/apache-camel/" itemprop="url">
                  Apache Camel
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-18T18:41:54+08:00" content="2015-04-18">
              2015-04-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/EIP-frameworks/" itemprop="url" rel="index">
                    <span itemprop="name">EIP frameworks</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/18/apache-camel/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/18/apache-camel/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Core-concepts"><a href="#Core-concepts" class="headerlink" title="Core concepts"></a>Core concepts</h3><h4 id="Endpoint"><a href="#Endpoint" class="headerlink" title="Endpoint"></a>Endpoint</h4><p>it refers to an address or a software entity that supports communication.</p>
<h4 id="Component"><a href="#Component" class="headerlink" title="Component"></a>Component</h4><p>_it _is confusing terminology; <em>EndpointFactory</em> would have been more appropriate because a <code>Component</code> is a factory for creating <code>Endpoint</code> instances.</p>
<p>A component has a name, which is the prefix of the URI.</p>
<h4 id="CamelContext"><a href="#CamelContext" class="headerlink" title="CamelContext"></a>CamelContext</h4><p>the Camel runtime system. You typically have one <code>CamelContext</code> object in an application.</p>
<h4 id="CamelTemplate"><a href="#CamelTemplate" class="headerlink" title="CamelTemplate"></a>CamelTemplate</h4><p>It’s previously called CamelClient. It can send a Message or Exchange to an endpoint.</p>
<h4 id="Message-and-Exchange"><a href="#Message-and-Exchange" class="headerlink" title="Message and Exchange"></a>Message and Exchange</h4><p>Message - an abstraction of a single message: request, reply or exception message</p>
<p>Exchange - an abstraction for an exchange of messages, that is, a request message and its corresponding reply or exception message.</p>
<p><code>in</code> message: request</p>
<p><code>out</code> message: reply</p>
<p><code>fault</code> message: expecption</p>
<h4 id="Processor"><a href="#Processor" class="headerlink" title="Processor"></a>Processor</h4><p>In camel library, there are many processors to implement the design patterns in EIP book.</p>
<p>An application-level developer might implement the <code>Processor</code> interface with a class that executes some business logic.</p>
<h4 id="Routes-RouteBuilders-and-Java-DSL"><a href="#Routes-RouteBuilders-and-Java-DSL" class="headerlink" title="Routes, RouteBuilders and Java DSL"></a>Routes, RouteBuilders and Java DSL</h4><p>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/16/find-job-full-time-job-e7-be-8a-e7-94-9f-e7-85-8e-e4-b9-8b-e7-be-8a-e6-9d-91-e6-b1-82-e8-81-8c-e6-94-bb-e7-95-a5ict-e5-90-91/" itemprop="url">
                  To find a job is a full time job 羊生煎之羊村求职攻略(ICT向)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-16T09:55:58+08:00" content="2015-04-16">
              2015-04-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Uncategorized/" itemprop="url" rel="index">
                    <span itemprop="name">Uncategorized</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/16/find-job-full-time-job-e7-be-8a-e7-94-9f-e7-85-8e-e4-b9-8b-e7-be-8a-e6-9d-91-e6-b1-82-e8-81-8c-e6-94-bb-e7-95-a5ict-e5-90-91/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/16/find-job-full-time-job-e7-be-8a-e7-94-9f-e7-85-8e-e4-b9-8b-e7-be-8a-e6-9d-91-e6-b1-82-e8-81-8c-e6-94-bb-e7-95-a5ict-e5-90-91/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: medium;">To find a job is a full time job – Dog Lead</span></span></span><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;"><span style="font-size: medium;"><br></span></span></span></span><br><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;"><span style="font-size: medium;">狗说，羊村生活艰辛。</span></span></span></span><span style="color: #000000;"><span style="font-family: Arial;"><br></span></span><br><span style="color: #000000;"><span style="font-family: Arial;">感谢某牛(bian)逼(tai)群主伟大光荣正确的羊村捕鱼舵手－鹅哥。</span></span><span style="color: #000000;"><span style="font-family: Arial;"><br><span style="font-size: small;"><span style="font-size: medium;"><br></span></span></span></span><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;"><span style="font-size: medium;">感谢星爷赐题。</span></span><br><span style="font-size: small;"><span style="font-size: medium;"><br></span></span></span></span><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;"><span style="font-size: medium;">感谢某牛(bian)逼(tai)群和某群闲人和闲小动植物。</span></span><br><span style="font-size: small;"><span style="font-size: medium;"><br></span></span></span></span><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;"><span style="font-size: medium;">大家好，我是狗，黑尾狗。落地羊村一年出头儿，一直总想写一篇求职攻略，希望能把期间自己经历过的，小伙伴经历过的小小总结一下给新落地的朋友做参考。不过由于拖延症＋懒癌一起发作，</span></span><span style="font-size: medium;">从拿到offer开始工作到现在才开始动笔，不过晚了总比没有强。又到了一年一度的斯巴达，希望能拜个晚年。</span></span></span></p>
<p><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;"><span style="font-size: medium;"><br></span></span></span></span><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;"><span style="font-size: medium;">没准有看官说了，滚犊子，ICT还要毛儿攻略，羊村都铺好了红地毯夹道欢迎你们呢。这就是您刘大哥讲话啊理太偏，您可能只见2周火速出台的C奶没见3，5个月还没有offer的劳苦小动物。总之我个人见过太多走了不少弯路的小动物，所以大家有需求的就凑合着看看，没需求的看个热闹儿或者赶紧关了千万别骂街。</span></span></span></span></p>
<p><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;"><span style="font-size: medium;"><br></span></span></span></span><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;"><span style="font-size: medium;">Disclaimer:我如下所说的都是扯犊子，读后之后造成任何后果概不负责。</span></span></span></span></p>
<p><div align="center"><strong><span style="font-size: xx-large;">羊生煎之羊村求职攻略(ICT向)</span></strong></div><br><span style="color: #000000;"><span style="font-family: Arial;"><strong>远**</strong>离华人老板<strong><br><span style="font-size: small;"><span style="font-size: medium;">虽然我自己也是华人，并且还把这个弄到了头一个难免</span></span><span style="font-size: small;"><span style="font-size: medium;">有黑同胞之嫌</span></span><span style="font-size: small;"><span style="font-size: medium;">，但是华人老板有可能对有一位求职者造成毁灭性打击所以还是先把坏人做了。我自己没有经历过华人老板没啥发言权，不过道听途说了一些狗血案例大家还是谨慎为上。一般情况一个操蛋的华人老板(同理适用于三哥和其他老板)会给人造成如下的负面影响。</span></span>
</strong><br><strong></strong></span></span><span style="color: #000000;"><span style="font-family: Arial;">浪费签证时间**<br><span style="font-size: small;"><span style="font-size: medium;">比如先工作多久之后才支持你申请移民云云。对于签证时间有限制的同学(刚登陆的SFV和WHV都有限制)，羊村这里一个完整的招人流程走一个月玩儿似的，所以每一个月都是十分珍贵，大好时光拖拖签证就快到期了，并且某些老板用人跟用牲口似的完全从体力上杜绝你跳槽的可能。当然也有强悍的同学被锻炼成了铁骨铮铮的汉子，但是前提是意志十分坚定。</span></span></span></span></p>
<p><span style="color: #000000;"><span style="font-family: Arial;"><strong>
</strong></span></span><span style="color: #000000;"><span style="font-family: Arial;"><strong>自信心受损</strong><br><span style="font-size: small;"><span style="font-size: medium;">某些人坚信想不花钱留住一个人的最好办法是洗脑，让你坚信自己水平不行别的地儿不可能有人收留你，这个实际上是最恶心的一点。听不少小伙伴说老板经常灌输“你这水平只有我能收留你”，“你出去肯定找不到工作”，“你没本地工作经验谁给你Offer”，“奥大毕业生都找不到工作”云云，凡事儿说多了就成了真理了，本来空降兵降到羊群里就是底气不足，这么一来更泄气了，漏气的气球想补起来远比扎漏麻烦的多。</span></span></span></span><br><span style="color: #000000;"><span style="font-family: Arial;"><br><strong>三观崩塌</strong><br><span style="font-size: small;"><span style="font-size: medium;">凡事能走到羊村的都会怀着点儿美好生活的憧憬，老婆孩子热炕头儿，一个操蛋老板会让这一切变成噩梦。当然也有人经过磨练更坚强了，这么一想某群的新人欢迎大礼包对于锻炼意志是这么的重要还是有点小兴奋的呢。</span></span></span></span><br><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: medium;"><br><strong>怎么写CV</strong><br>事实上任何一个中介或者雇主，在约候选人面试之前唯一了解候选人的途径就是简历，虽然电话可能简单聊一聊，但是也是看完简历才决定深入接触的。所以投了简历接不到电话问题十有八九就在简历上了。据不靠谱数据统计，一份失败简历的生命周期，在中介和雇主那里面是十分短暂的，可以论分或者秒计算。这就要求想shortlisted就得必须足够吸引人。那么怎么写一份自己看起来都脸红的简历呢？</span></span></span><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: medium;"><br></span></span></span><br><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: medium;"><strong>排版和格式</strong><br>排版和格式上至少看起来像个靠谱的专业人士。去面试大伙儿都知道穿的整整齐齐的还有不少开发者都细心的想起来打条领带。简历也一样，至少第一眼看起来要养眼，这个需要一点儿排版的基础和一点点审美能力。刚上大学有门课貌似专门讲这个，没记错的话叫计算机文化基础。计算机文化基础忘了也没关系，羊村图书馆一般都有CVCL写作参考书区，里面的格式都很主流，再不行还有个career govt的website里面也有模板。写好简历记得打印出来一份，然后自己装成中介看一下自己简历，是满意还是该撕掉。一般都得改几版。另外一点，简历根据不同国家文化不同也是不同。见过很多简历只是拿了一套羊村的模版套了一下翻译过来的中文简历，读起来异常的亲切。</span></span></span></p>
<p><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: medium;"><strong>背景和技能</strong><br>基本上每个招聘广告都会写上详细Title，当然也有鸡贼如我厂看人议价给Title的。Title不外乎初中高三等，不同的Title具体JD也有有一些差异，当然也有一些鸡贼厂用Senior JD招Intermediate。所以大家想投特定的级别的时候记得自己的CV要和那个level的essential skill match。</span></span></span></p>
<p>Junior<br>事实上空降初级的找工作面临的挑战会比中高级大得多，因为很多时候招初级的不如直接招奥大毕业生，羊村几所名校的B+的Graduate真所谓是勤劳勇敢善良能歌善舞new bee分分钟钟tree的vividl，这一点连我们永远正确的伟大羊村舵手鹅哥都吃过亏一怒之下抓了4吨鱼，所以很不幸的消息是经验不丰富的同学，可能会直接和本地的初级竞争，这样难度会加大几个数量级。大家好运。</p>
<p>Intermediate<br>招中级的得直接能干活儿，实际上任何一个Team里的中坚力量都是Intermediate，所以要求Intermediate上手能力要强，所以CV里面skill matrix要花哨，各种技能各种技术随便砸。Intermediate的市场需求一直比较火爆，很多号称要Senior的可能常年招不到Senior有时候也会招个high intermediate顶一顶老板娘啥的。<span class="jammer">$ U6 </span></p>
<p>Senior<br>招高级的一般是招的是个坑爹的各种擦屁股的，血泪的教训是大家差不多能做lead就做lead屁股就有人给擦了。Senior不光要求技术过硬(技术不过硬多看几十本技术书籍的目录也能假装硬一下)，另外更着重的是推动整个Team的能力，收拾各种烂摊子的能力，管理各种stakeholder的能力，上挑老板下欺member，所以CV里面各种硬技能不能少，软技能要和硬技能一样重要，并且mentoring是个must</p>
<p><strong><span style="font-family: Arial;">第一页</span></strong><br><span style="font-family: Arial;">我个人也看过好多份简历，从国内到羊村都有。第一页能抓住人的话会翻看第二页，第一页看起来很难过的直接碎了。羊村我厂连碎纸机都没有，很诡异的是个铁链子锁的大桶号称secure碎纸，看起来觉得好不靠谱呢，好吧随时随地都跑题。第一页的空间很宝贵，对于ICT来讲一个skill matrix是比较闪狗眼的，并且也方便中介和雇主在里面划词，步步高点读机哪里不会点哪里。这样的话加上一小段个人介绍（大概是三个整句子的吹牛逼），再加上个通信地址和软技能啥的第一页基本上就没地方了。个人介绍部分有一点比较容易露馅儿，我有见过好些小动物三句话用了4个I，读起来就联想起一个磕巴，充分的暴露了很不靠谱的写作能力。</span><span class="jammer">“ </span><br><span style="color: #000000;"><span style="font-family: Arial;"><br><strong>工作经历</strong><br>工作经验妥儿妥儿是简历里面块头儿最大的部分，简历要是盘儿烤鱼工作经历就是鱼其他部分顶多算香菜。随便搜搜seek上面基本上都会要求有经验，其实不要说ICT这类高技术工种，就连商业清洁都会有相关经验的要求。随便看个JD里面写着要什么什么经验就在这儿了。这里可能占1-2页不等，虽然篇幅不少但是每一块儿也是十分珍贵。一个完整的工作经历，包含厂名，职称，时间段，然后和个人职责和成就，以及可选的应用过的技能列表。</span></span></p>
<p><strong>公司介绍</strong><br>如果你是个国际大厂那么恭喜你不用写这个。如果你是个不知名的厂子记得别写太多，雇主要雇的是你不是你公司。所以一般一句就够，比如中国区某某方案领先提供商，或者某某大厂某业务指定合作伙伴云云体现出行业和Leading就行。关于这个Leading大家可以放心大胆的加，是个厂就可以是Leading。另外网站啥的就不用放了，一般这边打印出来点也没法点。并且有的同学放的网站点进去就是个404，或和是个排版很坑爹的全中文老大一个English点完了各种Chinglish，槽都吐不动了。</p>
<p><strong>个人职责</strong><br>这个主要写你干了什么活儿，怎么干的。招人来就是干活儿的所以这个部分十分重要，潜在老板可以根据这个评估你的潜在角色。羊村这边基本上都是十分喜爱全neng神，还有个坑爹叫法叫Full Stack Engineer，所以候选人的技能越多越好。这个原因也很简单，羊村普遍厂子小，即使大厂子也是很多小Team。加上羊们放荡不羁爱自由经常来一场说走就走的旅行一窜就是一个月，多招几个能随时擦屁股的大拿明显能确保厂子更加正常的运转。<br>这部分因为重要，所以要写的牛逼。</p>
<p>第一，用词要牛逼，这里面出现一个I你就败了，每一句的开头一定要用能体现主观能动性的硬词儿过去时，比如Initiated，Designed，Introduced，Analysed云云，硬词儿不够怎么办，去翻NKCS的讲义，后面有个词汇表专门列出了一堆可以用的硬词儿</p>
<p>第二，句子要足够长，足够工整，足够有料，职责覆盖面要光显示出自己各种可能性，临时随便可以装任何一个相关角色。句子那个可以去图书馆翻书，抄整句替换关键字，写作技能不牛逼的就尽量少试图自己写句子。至于职责覆盖面，这个比较简单，看一下常见的Team结构，Scan一下一些直接的Stakeholder，然后重点写自己主要角色的活儿，然后别忘了回忆一下其他Team成员的活儿，以及和直接Stakeholder相关的活儿筛选一下，挑几个硬实的写在上面。</p>
<p>第三，长句子中可以掺杂少量的短句子，这样更可以凸显长句子里面你的牛逼职责。切记建立里面Highlight最好用这种手法，不要随便就加粗斜体，那样再一次暴露了坑爹的写作技能。</p>
<p><strong>主要成就</strong><br>主要写你多牛逼。理论上，职责的部分可以算成你的必备素质，你是干那个的那些你做到是理所当然。而成就这玩意就像是赠品，回想一下任何一个人买东西的时候想要的几个，质量好，价格低。质量就是职责那些，价格是招个人的成本，啥，你还有赠品？牛逼的赠品？那就是你了。成就基本上和牛逼的赠品一样打动人，所以什么算是成就，怎么写成就呢？<br>大家写简历最重要的一点是自己不要心虚，不要脸红，实际上任何一件事儿都可能算作你的成就。不过赠品也有好有坏，所以成就也有一些瓷实的，包括但不限于以下几点：</p>
<p>引入了什么牛逼的工具，手法<br>Git啥的，Agile啥的，配对啥的，随便啥的都可以写。其余的小众的也可以。脑洞不开的去放狗搜一下software development tools and methodology给自己提个醒儿。</p>
<p>解决了什么牛逼的问题<br>牛逼问题总是有的，你要是感觉自己没解决过牛逼的问题时候，随便找本儿书，比如翔哥撰写的《xxx从入门到精通》，翻看一下目录(千万别看内容，这种标题的书都是垃圾)，看最后几章Advanced部分都在讲什么，然后回想一下，那些Advanced的虫子抓过没，抓过就写上，没抓过就编一个。<br>另外，Performance tuning屡试不爽，JVM，Database都可以随便往上弄。</p>
<p>改善了什么流程<br>流程改进永远是ICT厂的吹牛逼固定话题，因为普遍来讲ICT厂的员工比较懒惰，宁可扎堆儿打咖啡也不去修个高优先级的BUG。当然也有劳模这种诡异生物的存在，但是好在每个Team劳模并不多，避免了ICT厂妹厂弟沦为Labor工。流程的存在是为了让一堆懒人干最少的活儿达到最大收益。所以做减法永远是受欢迎的，当然为了控制质量必要的做加法基本上每个厂子都在搞，搞的大家口是心非明面儿上说It works暗地里怨声载道。所以加加减减都可以往上写，另外，还有一点是成效，这时候一点儿数字就很醒目了，比如引入什么流程使Defect降低12%，去除了什么流程使Cost节省了28%云云，至于具体数儿怎么算的，问PM啊。如果你是个PM，那肯定瞎话儿张嘴就来这个估计不用我教(星爷莫怒)。</p>
<p><strong>关键项目</strong><br>这个实际上是可选的。因为一个人在一个厂几年，可能做了N个项目，但是这N个项目正常情况下可能有80%的部分相似而只有20%的部分不同。这个80-20是在Role上和Stakeholder的关系之间，也就是个人职责上面评估得来的。所以如果一个经验丰富的人士编年史一样的写Project，会有大量重复内容导致没人读得下去。那么什么时候需要写这个Key project呢？一种情况是，真的有个十分牛逼的项目值得你去单独提一下，这项目你做的相当璀璨闪瞎了一堆stakeholder的狗眼那么你就完全可以单独拿出来大吹特吹。另一种情况是Junior的可能经验不够丰富，没什么可写的，这时候可以单独列几个关键项目吹吹牛逼。这一段实际上是从某个求职教程里面抄来的，那个教程里面讲编年史的CV的适用对象是毕业生。所以经验人士慎用。</p>
<p><strong>写作技巧</strong><br>见过有些小动物在CV后面的Qualification部分写上英语雅思几分的，深感这个略坑。实际上英语不用写雅思几分，看看简历打一个电话立马知道啥水准。写作技能一般都是空降兵的短板儿，所以简历上一定要注意避免暴露自己比较坑爹的写作功底。这就需要旁征博引，图书馆里面写简历的书一群一群的，也可见了羊村写简历是件是件十分重要的事儿，尽量去书里面抄整个句子然后替换掉自己的关键字。这样会比自己翻译的地道的多。</p>
<p><strong>测试和迭代</strong><br><span style="font-size: small;">找工作是个项目。启动，规划，执行，监控和收尾任何一个环节不可或缺，启动项目订机票来羊村租房子然后落水焚香宣纸文房四宝写个Hello World！定定心神，再然后规划写简历投简历失败去洗盘子，这项目就是妥儿妥儿呲了。由于个人找工作从工时和budget上看都是小型项目，所以很多人忽视了这是件麻雀虽小五脏俱全的事儿，直接导致了没有规划直接上来拿简历就投之后也没有改善的环节最终去弄的一团糟然后无奈去炸薯条儿。当然有人说了我是Agile你PMP的不共戴天赶紧滚犊子，但是Agile也得plan一下至少plan一个sprint哦亲。</span><span style="font-size: small;"><br></span><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: medium;">其实在整个找工作这个项目过程中无时无刻不在PDCA。做好计划写简历，然后出了成品当然要小规模测试一下了，Alpha版的投的满大街beta版的直接就进垃圾桶了，最后整不好还得换手机换邮箱发一GA本。简历需要测试，每出一个版本小范围投出去看看中介或者雇主的反应就会大体知道自己简历是不是够硬了，然后在改进，再测试，最后GA release投给最想去的厂。有兴趣的可以自己git一下看看改多少版才出个GA release。</span></span></span></p>
<p><span style="font-family: Arial;"><strong><span style="color: #000000;"><span style="color: #444444;">求职信</span></span></strong><br><span style="color: #000000;"><span style="color: #444444;">事实上很多时候求职信比简历还要重要一些，因为貌似看完一篇满目疮痍的求职信直接默默的删了简历的也大有人在。事实上如果换成我自己一封求职信看不下去的话，简历基本上也不会打起兴趣看，毕竟上班那么的煎熬，干点儿啥不好。</span></span></span><span style="font-family: Arial;"><br></span><br><span style="font-family: Arial;"><span style="font-size: medium;"><strong><span style="color: #000000;"><span style="color: #444444;">求职信是一封信</span></span></strong><br></span><span style="color: #000000;"><span style="color: #444444;">求职信真是个letter，写的是信的格式。话说在打印机没普及之前手写的CL和CV写的漂亮的很加分，所以没准儿之前写字儿难看的就会找人代写简历，估计现在的代谢简历的都是他们的后人。</span></span>在电子邮件没有的时候是貌似是用post mail邮寄CV和CL。现在一般都是电子邮件，所以CL可以当邮件正文发送，简单明了即可。CL实际上是从CV里面精炼出来的能让招聘的人找到点的一个超浓缩版本，一般几个要素，我是谁，我写信干啥，我多牛逼，怎么联系我，谢谢。模版满大街，词汇也比较单一，所以套路一般以简单粗暴为主流。</span></p>
<p><span style="font-family: Arial;"><strong>我是谁</strong></span><br><span style="font-family: Arial;">同CV，出一堆I的直接掉链子，随便找个模板去抄。这里面有个没啥大意义的小trick，如果您经验丰富可以明晃晃的写上比如8年经验，年数用数字十分醒目，不太丰富就写三年经验可以简单隐藏一下。然后剩下的大同小异，一般三两句话就行少磨叽。</span><br><span style="font-family: Arial;"><br></span><br><span style="font-family: Arial;"><strong>我写信干啥</strong></span><br><span style="font-family: Arial;">一般中介和雇主都比较在意简历的来源。因为这个涉及到招聘预算怎么花的。比如他在seek上和trademe上都list了他当然想知道哪个来源的简历多质量好。所以写信干啥的时候一般都会说我在哪儿看见了你的广告，然后我觉得我合适。trademe和seek上貌似都提供了简历直投的功能，但是那个我个人感觉不好用，不方便管理简历，也不好跟踪。所以只要是中介留电话邮箱姓名的最好直接一个CL当正文cei过去，CV做附件，即使中介或者雇主对你没啥兴趣出于礼貌也可能骗来封回信。</span><span style="font-family: Arial;"><br></span><br><span style="font-family: Arial;"><strong>我多牛逼</strong></span><br><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;"><span style="color: #444444;">最</span><span style="color: #444444;">主要的部分是我多牛逼的部分，因为其他部分。由于模版实在是好用，所以。。。都长得差不多。我多牛逼部分可以写8-10个bullet，可以发指的和JD相对应，中介一般不懂技术，但是很擅长查字典和打麻将(话说羊的麻将都是当连连看玩儿的)。有人问了，发指的对应，会不会有点假。这一点可以保证不用担心，玩儿连连看的忽然有俩对不上的会很闹心的，尤其是xx座的。另外关于JD多说几句，其实无论是中介还是雇主，招聘广告由于版面的限制都很少发full jd。大家seek上看到的JD都是精简到不能再精简的，所以基本上就是must。至于full jd，1页到1x页的不等。大家中介聊过了之后记得要full jd然后好准备tree new bee。</span></span></span></span></p>
<p><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;"><strong><span style="color: #444444;">怎么联系我</span><span style="color: #444444;"><br></span></strong></span></span></span><br><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;"><span style="color: #444444;">CL末尾直接写上手机号，一般可以写我随时方便和你讨论相关细节，你可以打xxxxxx联系我，不要写在签名档，那样会显得很随意。这个是很给力的小细节。有过一次只发了CL忘记贴CV然后中介迅速电话过来要CV十分高效。</span></span></span></span></p>
<p><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;"><span style="color: #444444;">另外CL</span><span style="color: #000000;"><span style="color: #444444;">直接暴露候选人的沟通能力。如果你写你有十分牛逼的communication skills然后配上两页不知所云的CL，结果基本上就是直接默默的关了。所以少啰嗦，只提供重要的信息。</span></span><span style="color: #000000;"><span style="color: #444444;">尽可能暴露出瓷实的细节。</span></span></span></span></span></p>
<h2 id="投简历"><a href="#投简历" class="headerlink" title="投简历"></a>投简历</h2><p><span style="font-family: Arial;">写好了简历和求职信粮好了就可以下锅了。首选的途径当然是。。。。内推啦。但是投之前记得先定制一下简历。</span><span style="font-family: Arial;"><span class="jammer">7 o9 f6 K5 A4 X</span><br></span><br><strong><span style="font-family: Arial;">简历定制<br></span></strong><br><span style="font-family: Arial;">投简历之前一定要根据相关的JD定制一下。比如CL和CV立面关键字一定要发指的match，位置要亮瞎狗眼，然后猜一下相关行业，行业经验也打磨一下。这时候有两种情况，一种是你对要投的厂子很熟甚至有内奸帮你内推，那简历就好写了，有问题找内奸。另一种是中介发的鼠儿尾巴那么长的JD，这种比较坑，全靠蒙，人品好可以从客户简介里面提取大量信息，人品不好提取的信息都呲了的话就删号儿重练吧。</span><span style="font-family: Arial;"><br></span><br><strong><span style="font-family: Arial;">内推</span></strong><br><span style="font-family: Arial;">内推对厂子来讲是一举两得，不光可以节约中介费，内推一般都是朋友介绍，所以来人也是知根知底儿。内推的途径是内部员工发应聘者简历直接到招聘人员手里。羊村的大中型ICT厂基本上都有自己的招聘部门一般叫recruitment team，注意一点他们和HR team的职能是不同的，他们只负责筛简历，约面试，大刀砍羊，做合同然后拉你上贼船之后交给HR team。小厂可能人事招聘攒一起了几个全neng神。对于找工作的人的话内推也是十分简单有效因为有内奸可以暴露一些从中介手中拿不到的信息比如某些技术细节，中介只知道个关键字，随便一个关键字都能出N本书儿的。话说招聘广告里JD越短的CV越难写有木有，这时候有个内奸绝对是久旱逢甘雨。况且不想当反贼的忠臣不是好内奸，谁都想试探一下自己厂子到底能给多少羊。</span></p>
<p><strong><span style="font-family: Arial;">中介<br></span></strong><br><span style="font-family: Arial;">NKCS说羊村80%的厂子都是20人以下，这就决定了某些厂子不需要几个人也就不需要找专人做招聘，这样当当当当无处不在的中介就登场了。一般常见的中介有羊和三系，没见过华人。三系普遍约等于不靠谱，但是也不绝对。中介不分大小，有的大中介全球连锁比如黑色，也有小中介就一两个人也能变戏法似的搞来offer。所以中介这玩儿意不骑上你不知道谁是驴谁是马。中介一般都在seek和trademe上发广告，用一些含糊其辞的话描述客户，这时候就要发动network帮猜一下他的客户可能是谁，也能相对靠点儿谱。</span><span class="jammer">  </span><br><span style="font-family: Arial;">中介筛简历就是连连看。你的简历漂亮，你的keyword闪亮，那你就牛逼，不牛逼也牛逼。</span></p>
<p><strong><span style="font-family: Arial;">网站</span></strong><br><span style="font-family: Arial;">网站说的就是Seek和Trademe了。他俩的作用是看招聘广告。可以订阅可以查阅任君选择。但是除非没有别的联系途径，不然尽量不要用他们的简历平台。Seek和Trademe貌似都有自己的投简历的功能，但是个人感觉效果没有直邮好，如果你有中介或者厂子招聘专员的mail的话建议直接mail联系。并且，如果他们想让你通过网站投，那就没必要写自己mailbox了。</span></p>
<p><span style="font-family: Arial;"><strong>维护一个投简历的列表</strong><br>啥时候投的，投给给谁的，中介的名字，然后一些JD的关键字。写在一张纸上，然后放在醒目的地方。写纸上比放在机器里方便的多，因为中介会默认当你是native没等你给电脑开盖儿就已经介绍完Y是谁了。每次接电话的时候把纸拿起来然后迅速找到打电话的人是谁。第一次没听清的话可以让Y重复一下，保证match一下知己知彼之后的扯犊子会更加活灵活现。</span></p>
<p><span style="font-family: Arial;"><strong>维护电话本
</strong>来电显示的如果有打过来的电话记得记入电话本。电话本里记上名字，中介的公司，然后在下一次接电话的时候可以抢先打招呼直呼其名how are you。这样你自己沟通也会信心十足，整条狗都胸有成竹。也有一些中介坑爹的隐藏了自己的电话号码只显示是私人号码，这时候就口音识别吧。至少很多口音还是很好分的，羊村口音，三系口音，伦敦郊区腔还有Chinglish。Chinglish是开玩笑因为我个人从来没见过一个华人中介。倒是有个华人CO跟我几次电话之后开始被拐带的各种流利的Chinglish。</span></p>
<p><span style="color: #000000;"><span style="font-family: Arial;"><span style="font-size: small;">剩下就是等消息了。等消息的最好办法就是。。。准备面试，时刻当明天就有雇主面谈人生谈理想谈技术谈各种诡异的东西，这时候你就会发现时间真特么的不够用。要复习的太多了。那么复习啥呢，明天再说。</span></span></span></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/13/acid-and-transaction/" itemprop="url">
                  ACID and transaction
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-13T14:49:27+08:00" content="2015-04-13">
              2015-04-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Databases/" itemprop="url" rel="index">
                    <span itemprop="name">Databases</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/13/acid-and-transaction/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/13/acid-and-transaction/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Transaction provides data integrity in highly concurrent environments. It’s also called Unit of Work.</p>
<ul>
<li>For database systems, transaction is a must-have feature. But also some exceptions, like MySQL MyISAM engine.</li>
<li>For messaging systems like <a href="http://en.wikipedia.org/wiki/Java_Message_Service" target="_blank" rel="external">JMS</a>, transactions are not mandatory which has  non-transacted <a href="http://docs.oracle.com/javaee/6/api/javax/jms/Session.html" target="_blank" rel="external">acknowledgement modes</a>.</li>
<li>File system operations are usually non-managed, but if your business requirements demand transaction file operations, you might make use a tool such as <a href="https://xadisk.java.net/" target="_blank" rel="external">XADisk</a>.</li>
</ul>
<h3 id="ACID"><a href="#ACID" class="headerlink" title="ACID"></a>ACID</h3><p>Inherently a transaction is characterized by four properties (commonly referred as ACID) :</p>
<ol>
<li>Atomicity  <em>- process</em></li>
<li>Consistency <em>- data state</em></li>
<li>Isolation <em>- across transactions</em></li>
<li>Durability <em>- storage</em><blockquote>
<p>Atomicity takes individual operations and turns them into an all-or-nothing unit of work, succeeding if and only if all contained operations succeed.</p>
<p>Consistency is about the state change. A transaction must always leave the system in a consistent state.</p>
<p>Isolation brings us the benefit of hiding uncommitted state changes from the outside world (other transactions), as failing transactions shouldn’t ever corrupt the state of the system.Isolation is achieved through <a href="http://en.wikipedia.org/wiki/Concurrency_control" target="_blank" rel="external">concurrency control</a> using pessimistic or optimistic locking mechanisms.</p>
<p>Durability ensure permanently change the state of a system after successful committed transaction, or logging the state changes before commit.<br>Of the four properties, the atomicity is a fixed property, but everything else may be traded-off for performance/scalability reasons.</p>
</blockquote>
</li>
</ol>
<h3 id="three-phenomena-and-isolation"><a href="#three-phenomena-and-isolation" class="headerlink" title="three phenomena and isolation"></a>three phenomena and isolation</h3><p>The SQL standard defines four Isolation levels:</p>
<ul>
<li>READ_UNCOMMITTED</li>
<li>READ_COMMITTED</li>
<li>REPEATABLE_READ</li>
<li>SERIALIZABLE<br><table style="height: 152px;" border="1" width="604"><br><tbody><br><tr><br><th>Isolation Level</th><br><th>Dirty read</th><br><th>Non-repeatable read</th><br><th>Phantom read</th><br></tr><br><tr><br><td>READ_UNCOMMITTED</td><br><td>allowed</td><br><td>allowed</td><br><td>allowed</td><br></tr><br><tr><br><td>READ_COMMITTED</td><br><td>prevented</td><br><td>allowed</td><br><td>allowed</td><br></tr><br><tr><br><td>REPEATABLE_READ</td><br><td>prevented</td><br><td>prevented</td><br><td>allowed</td><br></tr><br><tr><br><td>SERIALIZABLE</td><br><td>prevented</td><br><td>prevented</td><br><td>prevented</td><br></tr><br></tbody><br></table><br>Every isolation level resolves one or multiple phenomena.</li>
</ul>
<h4 id="Dirty-read"><a href="#Dirty-read" class="headerlink" title="Dirty read"></a>Dirty read</h4><p><img src="/media/acid-dirty-read.gif" alt="acid-dirty-read"></p>
<p>Transaction 2 reads the uncommitted(temporary or dirty) data of transaction 1. It’s called dirty because the change may be discarded if rollback.</p>
<h4 id="Non-repeatable-read"><a href="#Non-repeatable-read" class="headerlink" title="Non-repeatable read"></a>Non-repeatable read</h4><p><img src="/media/acid-non-repeatable-read.gif" alt="acid-non-repeatable-read"></p>
<p>Transaction 2 commits after transaction 1, so the queried record in memory differs in <span style="text-decoration: underline;"><em>state</em> </span>(changed) from that in database when commit.</p>
<h4 id="Phantom-read"><a href="#Phantom-read" class="headerlink" title="Phantom read"></a>Phantom read</h4><h4 id=""><a href="#" class="headerlink" title=""></a><img src="/media/acid-phantom-read.gif" alt="acid-phantom-read"></h4><p>Transaction 2 commits after transaction 1, so the queried records in memory differ in <span style="text-decoration: underline;"><em>range </em></span>(more or less) from that in database when commit.</p>
<p>You can regard phantom read is an extensive version of unrepeatable read.</p>
<p>&nbsp;</p>
<p>Even if the SQL standard mandates the use of the SERIALIZABLE isolation level, most database management system use a different default level.</p>
<p><table border="1"></table></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<p><th>Database</th></p>
<p><th>Default isolation Level</th><br></p>
<p><tr></tr></p>
<p><td>Oracle</td></p>
<p><td>READ_COMMITTED</td><br></p>
<p><tr></tr></p>
<p><td>MySQL</td></p>
<p><td>REPEATABLE_READ</td><br></p>
<p><tr></tr></p>
<p><td>Microsoft SQL Server</td></p>
<p><td>READ_COMMITTED</td><br></p>
<p><tr></tr></p>
<p><td>PostgreSQL</td></p>
<p><td>READ_COMMITTED</td><br></p>
<p><tr></tr></p>
<p><td>DB2</td></p>
<p><td>CURSOR STABILITY (a.k.a READ_COMMITTED)</td><br><br><br><br>Usually, READ_COMMITED is the right choice, since even SERIALIZABLE cannot protect you from a “lost update” where the read/write happen in different transactions (and web requests).</p>
<h3 id="a-classic-database-problem-lost-update"><a href="#a-classic-database-problem-lost-update" class="headerlink" title="a classic database problem - lost update"></a>a classic database problem - lost update</h3><h4 id="transactional-scenario"><a href="#transactional-scenario" class="headerlink" title="transactional scenario"></a>transactional scenario</h4><p><img src="/media/lost-update.png" alt="lost-update"></p>
<h4 id="offline-concurrency-scenario"><a href="#offline-concurrency-scenario" class="headerlink" title="offline concurrency scenario"></a>offline concurrency scenario</h4><p><img src="/media/offline-lost-update.png" alt="offline-lost-update"></p>
<p>In this case, we should differentiate the <em><strong>system transaction boundary</strong></em> and <em><strong>business transaction boundary</strong></em>. All the above discussed is about system transaction.</p>
<h3 id="locking-and-MVCC"><a href="#locking-and-MVCC" class="headerlink" title="locking and MVCC"></a>locking and MVCC</h3><p>Two ways for concurrency control:</p>
<ul>
<li>MVCC</li>
<li>locking<br>But as we all know, locking increases the serializable portion of the executed code, affecting <a href="http://en.wikipedia.org/wiki/Amdahl%27s_law#Parallelization" target="_blank" rel="external">parallelization</a>.</li>
</ul>
<p>In low level, how the database uses locks or MVCC to control concurrency is very complicated and different from one to another. The explanation is worth explaining in a big book.</p>
<p>Here we consider locking and MVCC in a high level.</p>
<p>(We consider implicit locking is database-specific and ubiquitous when interacting with database using SQL, like read lock, write lock, share lock, mutually exclusive lock, table lock, row lock, range lock, lock escalation etc….the list goes, so many buzzwords!)</p>
<p>Basically, we mention locking just in pessimistic locking context, where locking is explicitly requested. This is from the SQL:</p>
<blockquote>
<p>select …. for update/insert/delete<br>And we refer to MVCC mainly for <span style="text-decoration: underline;"><em>application-level</em></span> optimistic locking implementation – version column. Other optimistic locking implementations include:</p>
</blockquote>
<ul>
<li><strong><em>old/new value comparison in committing time</em></strong></li>
<li><em><strong>checksum or hash computation</strong></em> on original data</li>
</ul>
<h4 id="pessimistic-locking"><a href="#pessimistic-locking" class="headerlink" title="pessimistic locking"></a>pessimistic locking</h4><h4 id="optimistic-locking"><a href="#optimistic-locking" class="headerlink" title="optimistic locking"></a>optimistic locking</h4><p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/09/jpa-advanced-topics/" itemprop="url">
                  JPA - advanced topics
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-09T12:59:32+08:00" content="2015-04-09">
              2015-04-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JPA/" itemprop="url" rel="index">
                    <span itemprop="name">JPA</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/09/jpa-advanced-topics/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/09/jpa-advanced-topics/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="locking"><a href="#locking" class="headerlink" title="locking"></a>locking</h3><h3 id="cache"><a href="#cache" class="headerlink" title="cache"></a>cache</h3><h3 id="lifecycle-callbacks"><a href="#lifecycle-callbacks" class="headerlink" title="lifecycle callbacks"></a>lifecycle callbacks</h3><h4 id="Event-amp-Listener"><a href="#Event-amp-Listener" class="headerlink" title="Event &amp; Listener"></a>Event &amp; Listener</h4><p><img src="/media/event-listener.gif" alt="event listener"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/08/struts-2-a-short-journey/" itemprop="url">
                  Struts 2 - a short journey
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-08T13:59:38+08:00" content="2015-04-08">
              2015-04-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Struts/" itemprop="url" rel="index">
                    <span itemprop="name">Struts</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/08/struts-2-a-short-journey/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/08/struts-2-a-short-journey/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Web-framework-evolves"><a href="#Web-framework-evolves" class="headerlink" title="Web framework evolves"></a>Web framework evolves</h3><h4 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h4><p>Write all your processing logic and presentation logic in a servlet class. Generating HTML code from within Java code is really awesome!</p>
<h4 id="JSP-with-scriptlet-style"><a href="#JSP-with-scriptlet-style" class="headerlink" title="JSP with scriptlet style"></a>JSP with scriptlet style</h4><p>Rather than writing HTML in Java code, now write Java code in HTML code. This approach is really like PHP and ASP do.</p>
<h4 id="JSP-with-tags-style"><a href="#JSP-with-tags-style" class="headerlink" title="JSP with tags style"></a>JSP with tags style</h4><p>To avoid writing Java code in HTML, introduce JSP tags as HTML-like facade for accessing underlying Java code. This approach is more designer-friendly.</p>
<h4 id="Action-based-framework"><a href="#Action-based-framework" class="headerlink" title="Action-based framework"></a>Action-based framework</h4><p>Split the page processing into processing logic and presentation logic.</p>
<p>Implement MVC Model 2 pattern, or Front Controller pattern.</p>
<p>In this pattern, a servlet is the Front Controller, providing a centralized point for all client page requests.</p>
<p>Then it maps the request URL to a Unit of Work (aka. action).</p>
<p>The action can do:</p>
<ul>
<li>accessing HTTP request, form and session parameters</li>
<li>calling business logic services</li>
<li>mapping the response into Model - usually a POJO</li>
<li>returning a result, which is mapped to a view for rendering</li>
</ul>
<h4 id="Component-based-framework"><a href="#Component-based-framework" class="headerlink" title="Component-based framework"></a>Component-based framework</h4><ul>
<li>event-driven</li>
<li>a close tie between user interface component and its class<br>Such frameworks are: JSF, Wicket, ASP.NET</li>
</ul>
<h4 id="AJAX-and-Restful-style"><a href="#AJAX-and-Restful-style" class="headerlink" title="AJAX and Restful style"></a>AJAX and Restful style</h4><p>AJAX requesting to an action-based framework makes the action-based framework behave like the component-based frameworks do.</p>
<h3 id="Core-components-of-Struts"><a href="#Core-components-of-Struts" class="headerlink" title="Core components of Struts"></a>Core components of Struts</h3><p>Struts2 is a pull-MVC (or MVC 2) framework. The “pull” comes from the views ability to pull data from Action, rather than having a separate model object.</p>
<p><img src="/media/struts-mvc.png" alt="struts-mvc"></p>
<p>From the above figure, we know Action acts as the functionality of model object and processing logic executor.</p>
<h4 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h4><p>When you develop your web application using Struts2, you’ll come across 3 configuration files: web.xml(web application deplopment descriptor), struts.properties, struts.xml</p>
<p><img src="/media/struts-configure-scope.png" alt="struts-configure-scope"></p>
<h5 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h5><p>You need to config Dispatcher Filter – which is implemented as a servlet filter to dispatching requests.</p>
<h5 id="struts-properties"><a href="#struts-properties" class="headerlink" title="struts.properties"></a>struts.properties</h5><p>This file is for configuration of framework itself if you want to change the default options of framework. It includes all kinds of constants.</p>
<p>Of course, you can define these constants in struts.xml by using &lt;constant name=”” value=””  /&gt;</p>
<p>So struts.properties is optional.</p>
<h5 id="struts-xml"><a href="#struts-xml" class="headerlink" title="struts.xml"></a>struts.xml</h5><p>This is about the specific configuration of your web application, such as actions, result type, result, interceptors, etc.</p>
<p>Now the following is a practical configuration I used in my project:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> ?&amp;gt;</div><div class="line">&amp;lt;!DOCTYPE struts PUBLIC</div><div class="line">    <span class="string">"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"</span></div><div class="line">    <span class="string">"http://struts.apache.org/dtds/struts-2.0.dtd"</span>&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;struts&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;!-- what the URL ends by, such as ***.do --&amp;gt;</div><div class="line">	&amp;lt;constant name=<span class="string">"struts.action.extension"</span> value=<span class="string">"do"</span> /&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;!-- in development mode, more errors are provided --&amp;gt;</div><div class="line">	&amp;lt;constant name=<span class="string">"struts.devMode"</span> value=<span class="string">"false"</span> /&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;!--<span class="keyword">default</span> encoding <span class="keyword">for</span> web app--&amp;gt;</div><div class="line">	&amp;lt;constant name=<span class="string">"struts.i18n.encoding"</span> value=<span class="string">"utf-8"</span> /&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;constant name=<span class="string">"struts.i18n.reload"</span> value=<span class="string">"false"</span> /&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;constant name=<span class="string">"struts.custom.i18n.resources"</span> value=<span class="string">"properties/web/lang"</span> /&amp;gt;</div><div class="line">	&amp;lt;constant name=<span class="string">"struts.configuration.xml.reload"</span> value=<span class="string">"true"</span> /&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;constant name=<span class="string">"struts.objectFactory"</span> value=<span class="string">"org.apache.struts2.spring.StrutsSpringObjectFactory"</span> /&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;!-- <span class="keyword">default</span> <span class="keyword">package</span> --&amp;gt;</div><div class="line">	&amp;lt;<span class="keyword">package</span> name=<span class="string">"my-default"</span> namespace=<span class="string">"/"</span> extends=<span class="string">"json-default"</span>&amp;gt;</div><div class="line"></div><div class="line">		&amp;lt;!-- define <span class="keyword">new</span> interceptors and interceptor stack --&amp;gt;</div><div class="line">		&amp;lt;interceptors&amp;gt; </div><div class="line">			&amp;lt;interceptor name=<span class="string">"myInterceptor"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.my.web.interceptor.SecurityInterceptor"</span>/&amp;gt;</div><div class="line"></div><div class="line">			&amp;lt;interceptor-stack name=<span class="string">"myDefaultStack"</span>&amp;gt;</div><div class="line">		        &amp;lt;interceptor-ref name=<span class="string">"defaultStack"</span> /&amp;gt;</div><div class="line">		        &amp;lt;interceptor-ref name=<span class="string">"myInterceptor"</span> /&amp;gt;</div><div class="line">		        &amp;lt;interceptor-ref name =<span class="string">"timer"</span> /&amp;gt; </div><div class="line">				&amp;lt;interceptor-ref name =<span class="string">"logger"</span> /&amp;gt; </div><div class="line">		    &amp;lt;/interceptor-stack&amp;gt;	    </div><div class="line">		&amp;lt;/interceptors&amp;gt;</div><div class="line"></div><div class="line">		&amp;lt;!-- set <span class="keyword">default</span> interceptor --&amp;gt;</div><div class="line">	    &amp;lt;<span class="keyword">default</span>-interceptor-ref name=<span class="string">"myDefaultStack"</span>/&amp;gt; </div><div class="line"></div><div class="line">	    &amp;lt;!-- Global results：error, failure, timeout, relogin --&amp;gt;</div><div class="line">	    &amp;lt;global-results&amp;gt;</div><div class="line">	    	&amp;lt;result name=<span class="string">"success"</span> type=<span class="string">"json"</span>&amp;gt;</div><div class="line">			  &amp;lt;param name=<span class="string">"ignoreHierarchy"</span>&amp;gt;<span class="keyword">false</span>&amp;lt;/param&amp;gt;</div><div class="line">			  &amp;lt;param name=<span class="string">"excludeNullProperties"</span>&amp;gt;<span class="keyword">false</span>&amp;lt;/param&amp;gt;</div><div class="line">			&amp;lt;/result&amp;gt;</div><div class="line">			&amp;lt;result name=<span class="string">"exception"</span> type=<span class="string">"json"</span>&amp;gt;</div><div class="line">			  &amp;lt;param name=<span class="string">"ignoreHierarchy"</span>&amp;gt;<span class="keyword">false</span>&amp;lt;/param&amp;gt;</div><div class="line">			  &amp;lt;param name=<span class="string">"excludeNullProperties"</span>&amp;gt;<span class="keyword">false</span>&amp;lt;/param&amp;gt;</div><div class="line">			&amp;lt;/result&amp;gt;</div><div class="line">			&amp;lt;result name=<span class="string">"login"</span> type=<span class="string">"json"</span>&amp;gt;</div><div class="line">			  &amp;lt;param name=<span class="string">"ignoreHierarchy"</span>&amp;gt;<span class="keyword">false</span>&amp;lt;/param&amp;gt;</div><div class="line">			  &amp;lt;param name=<span class="string">"excludeNullProperties"</span>&amp;gt;<span class="keyword">false</span>&amp;lt;/param&amp;gt;</div><div class="line">			&amp;lt;/result&amp;gt;</div><div class="line">		&amp;lt;/global-results&amp;gt;</div><div class="line">    &amp;lt;/<span class="keyword">package</span>&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;!-- modules  --&amp;gt;</div><div class="line">	&amp;lt;include file=<span class="string">"Struts/struts-alert.xml"</span>/&amp;gt;</div><div class="line">	&amp;lt;include file=<span class="string">"Struts/struts-systemManage.xml"</span>/&amp;gt;</div><div class="line">	&amp;lt;include file=<span class="string">"Struts/struts-workflow.xml"</span>/&amp;gt;</div><div class="line">	&amp;lt;include file=<span class="string">"Struts/struts-revaluation.xml"</span>/&amp;gt;</div><div class="line">	&amp;lt;include file=<span class="string">"Struts/struts-indexquery.xml"</span>/&amp;gt;</div><div class="line">&amp;lt;/struts&amp;gt;</div></pre></td></tr></table></figure></p>
<p>&nbsp;</p>
<p>&nbsp;<br><figure class="highlight"><table><tr><td class="code"><pre><div class="line">&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;</div><div class="line">&amp;lt;web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"</div><div class="line">	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</div><div class="line">	xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee </div><div class="line">	http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"&amp;gt;</div><div class="line">	&amp;lt;display-name&amp;gt;icms-web&amp;lt;/display-name&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;context-param&amp;gt;</div><div class="line">		&amp;lt;param-name&amp;gt;contextConfigLocation&amp;lt;/param-name&amp;gt;</div><div class="line">		&amp;lt;param-value&amp;gt;classpath*:/SpringContext/applicationContext-*.xml,classpath*:/SpringContext/*/applicationContext-*.xml,classpath*:/SpringContext/*/*/applicationContext-*.xml,classpath*:/SpringContext/*/*/*/applicationContext-*.xml</div><div class="line">		&amp;lt;/param-value&amp;gt;</div><div class="line">	&amp;lt;/context-param&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;listener&amp;gt;</div><div class="line">		&amp;lt;listener-class&amp;gt;org.springframework.web.util.Log4jConfigListener&amp;lt;/listener-class&amp;gt;</div><div class="line">	&amp;lt;/listener&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;listener&amp;gt;</div><div class="line">		&amp;lt;listener-class&amp;gt;org.springframework.web.context.ContextLoaderListener&amp;lt;/listener-class&amp;gt;</div><div class="line">	&amp;lt;/listener&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;filter&amp;gt;</div><div class="line">		&amp;lt;filter-name&amp;gt;struts2&amp;lt;/filter-name&amp;gt;</div><div class="line">		&amp;lt;filter-class&amp;gt;org.apache.struts2.dispatcher.FilterDispatcher&amp;lt;/filter-class&amp;gt;</div><div class="line">		&amp;lt;init-param&amp;gt;</div><div class="line">			&amp;lt;param-name&amp;gt;config&amp;lt;/param-name&amp;gt;</div><div class="line">			&amp;lt;param-value&amp;gt;struts-default.xml,struts-plugin.xml,Struts/struts.xml&amp;lt;/param-value&amp;gt;</div><div class="line">		&amp;lt;/init-param&amp;gt;</div><div class="line">	&amp;lt;/filter&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;filter-mapping&amp;gt;</div><div class="line">		&amp;lt;filter-name&amp;gt;struts2&amp;lt;/filter-name&amp;gt;</div><div class="line">		&amp;lt;url-pattern&amp;gt;*.do&amp;lt;/url-pattern&amp;gt;</div><div class="line">	&amp;lt;/filter-mapping&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;welcome-file-list&amp;gt;</div><div class="line">		&amp;lt;welcome-file&amp;gt;index.htm&amp;lt;/welcome-file&amp;gt;</div><div class="line">	&amp;lt;/welcome-file-list&amp;gt;</div><div class="line"></div><div class="line">	&amp;lt;session-config&amp;gt;</div><div class="line">		&amp;lt;session-timeout&amp;gt;30&amp;lt;/session-timeout&amp;gt;</div><div class="line">	&amp;lt;/session-config&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;/web-app&amp;gt;</div></pre></td></tr></table></figure></p>
<h4 id="Actions"><a href="#Actions" class="headerlink" title="Actions"></a>Actions</h4><p>If you don’t specify the method of an action, its execute() will be invoked by default.</p>
<p>An action method can return a <em>String</em> or _Result _or no return.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;action name=<span class="string">"submitDiscardColAppAction"</span></div><div class="line">			<span class="class"><span class="keyword">class</span></span>=<span class="string">"com.my.ManageDiscardColAction"</span></div><div class="line">			method=<span class="string">"submitDiscardColApp"</span>&amp;gt;</div><div class="line">&amp;lt;/action&amp;gt;</div></pre></td></tr></table></figure></p>
<p>An action instance should be one per request. So when you integrate Struts2 with Spring, the bean scope of action should be <strong><em>sterotype</em></strong>.</p>
<p>The above example uses the global result setting. You can specify the action-specific configs of result mapping, like<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;action name=<span class="string">"submitDiscardColAppAction"</span></div><div class="line">			<span class="class"><span class="keyword">class</span></span>=<span class="string">"com.my.ManageDiscardColAction"</span></div><div class="line">			method=<span class="string">"submitDiscardColApp"</span>&amp;gt;</div><div class="line">    &amp;lt;result name=<span class="string">"success"</span> type=<span class="string">"dispatcher"</span>&amp;gt;<span class="number">1</span>.jsp&amp;lt;/result&amp;gt;</div><div class="line">&amp;lt;/action&amp;gt;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>NOTE: the “dispatcher” result type is default if you don’t specify the result type.<br>Most of time, the logic service object is injected by DI framework (Struts only support setter injection), but there are many non-managed objects needing to acquire in the action, like request, session, servletContext, response, etc. In this case, we can use **Aware interface.</p>
</blockquote>
<ul>
<li>SessionAware</li>
<li>ServletRequestAware</li>
<li>RequestAware</li>
<li>ApplicationAware</li>
<li>ServletResponseAware</li>
<li>ParameterAware</li>
<li>PrincipalAware</li>
<li>ServletContextAware</li>
</ul>
<h4 id="Result-type"><a href="#Result-type" class="headerlink" title="Result type"></a>Result type</h4><p>Struts provides many result type, but you can implement your custom implementation by implements _<strong>Result</strong> _interface.</p>
<ul>
<li>dispatcher</li>
<li>httpheader</li>
<li>redirect</li>
<li>redirectAction</li>
<li>plainText</li>
<li>stream</li>
<li>velocity</li>
</ul>
<h4 id="Interceptors"><a href="#Interceptors" class="headerlink" title="Interceptors"></a>Interceptors</h4><p>Interceptors are conceptually the same as servlet filters or proxy, which provide a way to supply pro-processing and post-processing around the action.</p>
<p>Many features in Struts are implemented using interceptors: exception handling, lifecycle callbacks, validation, servlet-based object injection, application authentication etc.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Interceptor</span> <span class="keyword">extends</span> <span class="title">Serializable</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>;</div><div class="line">    <span class="function">String <span class="title">intercept</span><span class="params">(ActionInvocation invocation)</span> <span class="keyword">throws</span> Exception</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="Value-Stack-OGNL"><a href="#Value-Stack-OGNL" class="headerlink" title="Value Stack / OGNL"></a>Value Stack / OGNL</h4><p>Value stack and OGNL are all related to accessing data. OGNL is an expression language, aka. Object Graphic Navigational Language.</p>
<p>We use OGNL to access data from value stack in some cases:</p>
<ul>
<li>JSP tags</li>
<li>Velocity or Freemarker template</li>
</ul>
<h5 id="What-are-there-in-Value-stack"><a href="#What-are-there-in-Value-stack" class="headerlink" title="What are there in Value stack?"></a>What are there in Value stack?</h5><p><img src="/media/struts-value-stack.png" alt="struts-value-stack"></p>
<h3 id="Tags"><a href="#Tags" class="headerlink" title="Tags"></a>Tags</h3><h4 id="lt-s-property-gt"><a href="#lt-s-property-gt" class="headerlink" title="&lt;s:property&gt;"></a>&lt;s:property&gt;</h4><p>This tag is used to access value stack value.</p>
<ul>
<li>escape html or javascript<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;s:property value=<span class="string">"propWithHtml"</span> escape=<span class="string">"false"</span>/&amp;gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><div class="line">&amp;lt;script type="text/javascript"&amp;gt;</div><div class="line">    var jsFromTag1 = '&amp;lt;s:property value="javascriptExample"</div><div class="line">    escapeJavaScript="true"/&amp;gt;';</div><div class="line">    document.writeln(jsFromTag1);</div><div class="line">&amp;lt;/script&amp;gt;</div></pre></td></tr></table></figure>
<ul>
<li><p>default value</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;s:property value=<span class="string">"nullExample"</span> <span class="keyword">default</span>=<span class="string">"A default value."</span>/&amp;gt;</div></pre></td></tr></table></figure>
</li>
<li><p>access scope object: request, session, application with prefix #</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;s:property value=<span class="string">"#application.anAppAttribute"</span>/&amp;gt;</div><div class="line">&amp;lt;s:property value=<span class="string">"#session.aSessionAttribute"</span>/&amp;gt;</div><div class="line">&amp;lt;s:property value=<span class="string">"#request.aRequestAttribute"</span>/&amp;gt;</div><div class="line">&amp;lt;s:property value=<span class="string">"#parameters.aRequestParameter"</span>/&amp;gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>parameters is for request parameters</p>
<p>No page object, but instead you use #attr to search all the attributes of application, request, session and page in order.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;s:property value=<span class="string">"#attr.anAppAttribute"</span>/&amp;gt;</div><div class="line">&amp;lt;s:property value=<span class="string">"#attr.aSessionAttribute"</span>/&amp;gt;</div><div class="line">&amp;lt;s:property value=<span class="string">"#attr.aRequestAttribute"</span>/&amp;gt;</div><div class="line">&amp;lt;s:property value=<span class="string">"#attr.aPageAttribute"</span>/&amp;gt;</div></pre></td></tr></table></figure></p>
<h4 id="amp-lt-s-debug-amp-gt"><a href="#amp-lt-s-debug-amp-gt" class="headerlink" title="&amp;lt;s:debug&amp;gt;"></a><code>&amp;lt;s:debug&amp;gt;</code></h4><p>show all the stack</p>
<h4 id="anActionProperty"><a href="#anActionProperty" class="headerlink" title="${anActionProperty}"></a>${anActionProperty}</h4><p>This will search the value stack first, then fall off to use the JSP EL lookup. This is a little tricky.</p>
<h4 id="lt-s-set-gt"><a href="#lt-s-set-gt" class="headerlink" title="&lt;s:set&gt;"></a>&lt;s:set&gt;</h4><h4 id="amp-lt-s-if-amp-gt-amp-lt-s-elseif-amp-gt-and-amp-lt-s-else-amp-gt"><a href="#amp-lt-s-if-amp-gt-amp-lt-s-elseif-amp-gt-and-amp-lt-s-else-amp-gt" class="headerlink" title="&amp;lt;s:if&amp;gt;, &amp;lt;s:elseif&amp;gt;, and&amp;lt;s:else&amp;gt;"></a><code>&amp;lt;s:if&amp;gt;, &amp;lt;s:elseif&amp;gt;</code>, and<code>&amp;lt;s:else&amp;gt;</code></h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;s:<span class="keyword">if</span> test=<span class="string">"aBooleanExpression"</span>&amp;gt;</div><div class="line">Printed when test is <span class="keyword">true</span>.</div><div class="line">&amp;lt;/s:<span class="keyword">if</span>&amp;gt;</div><div class="line">&amp;lt;s:elseif test=<span class="string">"aDifferentBooleanExpression"</span>&amp;gt;</div><div class="line">&amp;lt;sif&amp;gt; tagPrinted <span class="keyword">if</span> previous test was <span class="keyword">false</span> and <span class="keyword">this</span> one is <span class="keyword">true</span>.</div><div class="line">&amp;lt;selseif&amp;gt; tag&amp;lt;/s:elseif&amp;gt;</div><div class="line">&amp;lt;s:<span class="keyword">else</span>&amp;gt;</div><div class="line">Printed <span class="keyword">if</span> neither were <span class="keyword">true</span>.</div><div class="line">&amp;lt;selse&amp;gt; tag&amp;lt;/s:<span class="keyword">else</span>&amp;gt;</div></pre></td></tr></table></figure>
<h4 id="lt-s-iterator-gt"><a href="#lt-s-iterator-gt" class="headerlink" title="&lt;s:iterator&gt;"></a>&lt;s:iterator&gt;</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;s:iterator value=<span class="string">"listOfStrings"</span>&amp;gt;</div><div class="line">&amp;lt;li&amp;gt;&amp;lt;s:property/&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">&amp;lt;/s:iterator&amp;gt;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;s:iterator value=<span class="string">"listOfStrings"</span> var=<span class="string">"anItem"</span>&amp;gt;</div><div class="line">&amp;lt;li&amp;gt;&amp;lt;s:property value=<span class="string">"anItem"</span>/&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">&amp;lt;/s:iterator&amp;gt;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;s:iterator value=<span class="string">"mapStringString"</span>&amp;gt;</div><div class="line">  &amp;lt;li&amp;gt;</div><div class="line">     &amp;lt;s:property value=<span class="string">"key"</span>/&amp;gt; : &amp;lt;s:property value=<span class="string">"value"</span>/&amp;gt;</div><div class="line">  &amp;lt;/li&amp;gt;</div><div class="line">&amp;lt;/s:iterator&amp;gt;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;s:iterator value=<span class="string">"mapStringString"</span> var=<span class="string">"entry"</span>&amp;gt;</div><div class="line">   &amp;lt;li&amp;gt;</div><div class="line">     &amp;lt;s:property value=<span class="string">"#entry.key"</span>/&amp;gt; ==</div><div class="line">     &amp;lt;s:property value=<span class="string">"#entry.value"</span>/&amp;gt;</div><div class="line">   &amp;lt;/li&amp;gt;</div><div class="line">&amp;lt;/s:iterator&amp;gt;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;s:iterator value=<span class="string">"list1"</span> status=<span class="string">"stat"</span>&amp;gt;</div><div class="line">&amp;lt;tr&amp;gt;</div><div class="line">&amp;lt;td&amp;gt;&amp;lt;s:property value=<span class="string">"#stat.index"</span>/&amp;gt;&amp;lt;/td&amp;gt;</div><div class="line">&amp;lt;td&amp;gt;&amp;lt;s:property value=<span class="string">"#stat.count"</span>/&amp;gt;&amp;lt;/td&amp;gt;</div><div class="line">&amp;lt;td&amp;gt;&amp;lt;s:property value=<span class="string">"#stat.even"</span>/&amp;gt;&amp;lt;/td&amp;gt;</div><div class="line">&amp;lt;td&amp;gt;&amp;lt;s:property value=<span class="string">"#stat.odd"</span>/&amp;gt;&amp;lt;/td&amp;gt;</div><div class="line">&amp;lt;td&amp;gt;&amp;lt;s:property value=<span class="string">"#stat.first"</span>/&amp;gt;&amp;lt;/td&amp;gt;</div><div class="line">&amp;lt;td&amp;gt;&amp;lt;s:property value=<span class="string">"#stat.last"</span>/&amp;gt;&amp;lt;/td&amp;gt;</div><div class="line">&amp;lt;td&amp;gt;&amp;lt;s:property value=<span class="string">"#stat.modulus(2)"</span>/&amp;gt;&amp;lt;/td&amp;gt;</div><div class="line">&amp;lt;td&amp;gt;&amp;lt;s:property value=<span class="string">"#stat.modulus(4)"</span>/&amp;gt;&amp;lt;/td&amp;gt;</div><div class="line">&amp;lt;td&amp;gt;&amp;lt;s:property value=<span class="string">"#stat.count % 4"</span>/&amp;gt;&amp;lt;/td&amp;gt;</div><div class="line">&amp;lt;/tr&amp;gt;</div><div class="line">&amp;lt;/s:iterator&amp;gt;</div></pre></td></tr></table></figure>
<h4 id="lt-s-include-gt"><a href="#lt-s-include-gt" class="headerlink" title="&lt;s:include&gt;"></a>&lt;s:include&gt;</h4><p>similar to &lt;jsp:include&gt;</p>
<h4 id="lt-s-action-gt"><a href="#lt-s-action-gt" class="headerlink" title="&lt;s:action&gt;"></a>&lt;s:action&gt;</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;s:action name=<span class="string">"includedAction"</span>/&amp;gt;</div></pre></td></tr></table></figure>
<h4 id="lt-s-url-gt"><a href="#lt-s-url-gt" class="headerlink" title="&lt;s:url&gt;"></a>&lt;s:url&gt;</h4><p>dynamically generate the url mapped to the action</p>
<h3 id="Form-Validation-and-Type-conversion"><a href="#Form-Validation-and-Type-conversion" class="headerlink" title="Form Validation and Type conversion"></a>Form Validation and Type conversion</h3><p>//TODO</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/03/spring-framework-transaction-management/" itemprop="url">
                  Spring framework - transaction management
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-03T16:32:56+08:00" content="2015-04-03">
              2015-04-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Spring/Transaction-Management/" itemprop="url" rel="index">
                    <span itemprop="name">Transaction Management</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/03/spring-framework-transaction-management/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/03/spring-framework-transaction-management/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>In Java, there are multiple persistence APIs and all of them provides their own ways of transaction management.</p>
<ul>
<li>JDBC transaction: this is a resource-specific transaction, which is implemented by connection.</li>
<li>JTA transaction: this is a transaction API for global transaction, it usually needs the support of application server.</li>
<li>JPA transaction: JPA has its own transaction API by EntityManager.</li>
<li>Hibernate transaction: Hibernate also provides its way to manage transaction by SessionFactory</li>
<li>JDO: …<br>Now Spring transaction management abstracts and unifies all these API.</li>
</ul>
<h3 id="Infrastructure-abstraction"><a href="#Infrastructure-abstraction" class="headerlink" title="Infrastructure abstraction"></a>Infrastructure abstraction</h3><ul>
<li>TransactionStatus</li>
<li>PlatformTransactionManager (SPI)</li>
<li><p>TransactionDefinition</p>
<ul>
<li>Isolation</li>
<li>Propagation</li>
<li>Timeout</li>
<li>Read-only<br>Spring implements many built-in transaction manager implements:<table style="height: 212px;" border="1" width="477"><br><tbody><br><tr><br><td>transaction manager</td><br><td>linked resource</td><br></tr><br><tr><br><td>DataSourceTransactionManger</td><br><td>JDBC DataSource</td><br></tr><br><tr><br><td>JTATransactionManager</td><br><td></td><br></tr><br><tr><br><td>   |– WebSphereTransactionManager</td><br><td></td><br></tr><br><tr><br><td>   |– WebLogicTransactionManager</td><br><td></td><br></tr><br><tr><br><td>HibernateTransactionManager</td><br><td>SessionFactory</td><br></tr><br><tr><br><td>JPATransactionManager</td><br><td>EntityManager</td><br></tr><br></tbody><br></table>

</li>
</ul>
</li>
</ul>
<h3 id="AOP-implementation"><a href="#AOP-implementation" class="headerlink" title="AOP implementation"></a>AOP implementation</h3><h4 id="TransactionInterceptor"><a href="#TransactionInterceptor" class="headerlink" title="TransactionInterceptor"></a>TransactionInterceptor</h4><p>This is the secret for the declarative transaction.</p>
<p><img src="/media/transaction-interceptor.png" alt="transaction-interceptor"><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">FooService</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function">Foo <span class="title">getFoo</span><span class="params">(String fooName)</span></span>;</div><div class="line"></div><div class="line">    <span class="function">Foo <span class="title">getFoo</span><span class="params">(String fooName, String barName)</span></span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insertFoo</span><span class="params">(Foo foo)</span></span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateFoo</span><span class="params">(Foo foo)</span></span>;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DefaultFooService</span> <span class="keyword">implements</span> <span class="title">FooService</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Foo <span class="title">getFoo</span><span class="params">(String fooName)</span> </span>&#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Foo <span class="title">getFoo</span><span class="params">(String fooName, String barName)</span> </span>&#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFoo</span><span class="params">(Foo foo)</span> </span>&#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFoo</span><span class="params">(Foo foo)</span> </span>&#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">    GenericXmlApplicationContext context = <span class="keyword">new</span> GenericXmlApplicationContext(<span class="string">"classpath:spring-tx.xml"</span>);</div><div class="line">    FooService fooService = (FooService)context.getBean(<span class="string">"fooService"</span>);</div><div class="line"></div><div class="line">    TransactionInterceptor txAdvice = (TransactionInterceptor)context.getBean(<span class="string">"txAdvice"</span>);</div><div class="line">    fooService.insertFoo(<span class="keyword">new</span> Foo());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This is the log4j log which can show some implementation details:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;!-- the DefaultFooService is actually proxied --&amp;gt;</div><div class="line">DEBUG &#123;org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator&#125;  - Creating implicit proxy <span class="keyword">for</span> bean <span class="string">'fooService'</span> with <span class="number">0</span> common interceptors and <span class="number">2</span> specific interceptors</div><div class="line">DEBUG &#123;org.springframework.aop.framework.JdkDynamicAopProxy&#125;  - Creating JDK dynamic proxy: target source is SingletonTargetSource <span class="keyword">for</span> target object [tx.DefaultFooService@<span class="number">14f</span>9390f]</div><div class="line">DEBUG &#123;org.springframework.beans.factory.support.DefaultListableBeanFactory&#125;  - Finished creating instance of bean <span class="string">'fooService'</span></div><div class="line"></div><div class="line">&amp;lt;!--=========== Before: <span class="function">the <span class="title">insertFoo</span><span class="params">(..)</span> method is now being invoked on the proxy </span>================--&amp;gt;</div><div class="line">&amp;lt;!-- the transactional advice kicks in here... --&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;!-- acquire connection --&amp;gt;</div><div class="line">DEBUG &#123;org.springframework.jdbc.datasource.DataSourceTransactionManager&#125;  - Acquired Connection [jdbc:h2:file:D:/Projects/spring-sample/activejdbc/src/main/resources/test, UserName=, H2 JDBC Driver] <span class="keyword">for</span> JDBC transaction</div><div class="line"></div><div class="line">&amp;lt;!-- disable autocommit --&amp;gt;</div><div class="line">DEBUG &#123;org.springframework.jdbc.datasource.DataSourceTransactionManager&#125;  - Switching JDBC Connection [jdbc:h2:file:D:/Projects/spring-sample/activejdbc/src/main/resources/test, UserName=, H2 JDBC Driver] to manual commit</div><div class="line"></div><div class="line">&amp;lt;!-- !!! <span class="keyword">this</span> is the way: bound resource to the thread --&amp;gt;</div><div class="line">TRACE &#123;org.springframework.transaction.support.TransactionSynchronizationManager&#125;  - Bound value [org.springframework.jdbc.datasource.ConnectionHolder@<span class="number">2101</span>b44a] <span class="keyword">for</span> key [org.apache.commons.dbcp.BasicDataSource@<span class="number">52</span>d645b1] to thread [main]</div><div class="line"></div><div class="line">&amp;lt;!-- initialize transaction synchronization --&amp;gt;</div><div class="line">TRACE &#123;org.springframework.transaction.support.TransactionSynchronizationManager&#125;  - Initializing transaction synchronization</div><div class="line">TRACE &#123;org.springframework.transaction.interceptor.TransactionInterceptor&#125;  - Getting transaction <span class="keyword">for</span> [tx.DefaultFooService.insertFoo]</div><div class="line"></div><div class="line">=================foo() invoked=============</div><div class="line"></div><div class="line">&amp;lt;!--============ Exception: <span class="function">the <span class="title">insertFoo</span><span class="params">(..)</span> method from DefaultFooService <span class="keyword">throws</span> an exception...</span>========== --&amp;gt;</div><div class="line">TRACE &#123;org.springframework.transaction.interceptor.TransactionInterceptor&#125;  - Completing transaction <span class="keyword">for</span> [tx.DefaultFooService.insertFoo] after exception: java.lang.UnsupportedOperationException</div><div class="line">TRACE &#123;org.springframework.transaction.interceptor.RuleBasedTransactionAttribute&#125;  - Applying rules to determine whether transaction should rollback on java.lang.UnsupportedOperationException</div><div class="line">TRACE &#123;org.springframework.transaction.interceptor.RuleBasedTransactionAttribute&#125;  - Winning rollback rule is: <span class="keyword">null</span></div><div class="line">TRACE &#123;org.springframework.transaction.interceptor.RuleBasedTransactionAttribute&#125;  - No relevant rollback rule found: applying <span class="keyword">default</span> rules</div><div class="line">TRACE &#123;org.springframework.jdbc.datasource.DataSourceTransactionManager&#125;  - Triggering beforeCompletion synchronization</div><div class="line"></div><div class="line">&amp;lt;!-- rollback depending on the rollback rules --&amp;gt;</div><div class="line">DEBUG &#123;org.springframework.jdbc.datasource.DataSourceTransactionManager&#125;  - Initiating transaction rollback</div><div class="line">DEBUG &#123;org.springframework.jdbc.datasource.DataSourceTransactionManager&#125;  - Rolling back JDBC transaction on Connection [jdbc:h2:file:D:/Projects/spring-sample/activejdbc/src/main/resources/test, UserName=, H2 JDBC Driver]</div><div class="line">TRACE &#123;org.springframework.jdbc.datasource.DataSourceTransactionManager&#125;  - Triggering afterCompletion synchronization</div><div class="line"></div><div class="line">&amp;lt;!-- clear transaction synchronization --&amp;gt;</div><div class="line">TRACE &#123;org.springframework.transaction.support.TransactionSynchronizationManager&#125;  - Clearing transaction synchronization</div><div class="line">TRACE &#123;org.springframework.transaction.support.TransactionSynchronizationManager&#125;  - Removed value [org.springframework.jdbc.datasource.ConnectionHolder@<span class="number">2101</span>b44a] <span class="keyword">for</span> key [org.apache.commons.dbcp.BasicDataSource@<span class="number">52</span>d645b1] from thread [main]</div><div class="line"></div><div class="line">&amp;lt;!-- release connection --&amp;gt;</div><div class="line">DEBUG &#123;org.springframework.jdbc.datasource.DataSourceTransactionManager&#125;  - Releasing JDBC Connection [jdbc:h2:file:D:/Projects/spring-sample/activejdbc/src/main/resources/test, UserName=, H2 JDBC Driver] after transaction</div><div class="line">DEBUG &#123;org.springframework.jdbc.datasource.DataSourceUtils&#125;  - Returning JDBC Connection to DataSource</div></pre></td></tr></table></figure></p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/03/spring-framework-aop/" itemprop="url">
                  Spring framework - AOP
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-03T16:17:51+08:00" content="2015-04-03">
              2015-04-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/03/spring-framework-aop/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/03/spring-framework-aop/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><em>Crosscutting concerns</em> refers to logic in an application that cannot be decomposed from the rest of the application and may result in code duplication and tight coupling.</p>
<p>Typical use cases:</p>
<ul>
<li>logging</li>
<li>security</li>
<li>transaction</li>
</ul>
<p>Concepts:</p>
<ul>
<li><strong>Pointcut</strong> -&gt; where to do: class filtering and method matching</li>
<li><strong>Advice</strong> -&gt; when to do: before/after/returning/throws/…</li>
<li><strong>Aspect</strong> -&gt; what to do, do what the application specified things. This is the only code application needs to define, others concepts are supported and configured by framework.</li>
<li><strong>Advisor</strong> -&gt; associate Advice and Pointcut</li>
<li><strong>JoinPoint</strong> -&gt; the execution point: the occurrence context including which class, which methods, proceeding method execution..</li>
<li><strong>weaving</strong> -&gt; when to proxy target: build time(compile-time), load-time, run-time</li>
</ul>
<h3 id="Spring-AOP-style"><a href="#Spring-AOP-style" class="headerlink" title="Spring AOP style"></a>Spring AOP style</h3><p>Spring AOP depends on proxies. You must use <code>ProxyFactoryBean</code> to produce the proxy for target object.</p>
<p><img src="/media/spring-aop.jpg" alt="spring-aop"></p>
<p>Internally, Spring has two proxy implementations: JDK dynamic proxies and CGLIB proxies.</p>
<ul>
<li>By default, when the target object to be advised implements an interface, Spring will use a JDK dynamic proxy to create proxy instances of the target.</li>
<li>when the advised target object doesn’t implement an interface (for example, it’s a concrete class), CGLIB will be used for proxy instance creation.</li>
</ul>
<h4 id="Joinpoints-in-Spring"><a href="#Joinpoints-in-Spring" class="headerlink" title="Joinpoints in Spring"></a>Joinpoints in Spring</h4><p>Spring AOP supports only one joinpoint type: <strong>method invocation</strong>.</p>
<h4 id="Aspects-in-Spring-Adviser-Advice-Pointcut"><a href="#Aspects-in-Spring-Adviser-Advice-Pointcut" class="headerlink" title="Aspects in Spring: Adviser (Advice+Pointcut)"></a>Aspects in Spring: Adviser (Advice+Pointcut)</h4><p>An aspect in Spring is represented by an instance of a class that implements the <code>Advisor</code> interface.</p>
<ul>
<li>PointcutAdvisor</li>
<li>IntroductionAdvisor<br>The main difference between <code>Advice</code>and <code>Advisor</code>is that <code>Advisor</code> carries <code>Advice</code> with the associated <code>Pointcut</code>.</li>
</ul>
<p><img src="/media/spring-aop-concepts.png" alt="spring-aop-concepts"></p>
<blockquote>
<p><code>ProxyFactory.addAdvice()</code> delegates to <code>addAdvisor()</code> behind the scenes, creating an instance of <code>DefaultPointcutAdvisor</code> and configuring it with a pointcut that points to all methods.</p>
</blockquote>
<h4 id="Pointcut"><a href="#Pointcut" class="headerlink" title="Pointcut"></a>Pointcut</h4><p>Pointcut acutally does something filtering class and matching methods.</p>
<p>eight <code>Pointcut</code> interface implementation:</p>
<ul>
<li><code>org.springframework.aop.support.NameMatchMethodPointcut</code></li>
<li><code>org.springframework.aop.support.JdkRegexpMethodPointcut</code></li>
<li><code>org.springframework.aop.support.annotation.AnnotationMatchingPointcut</code></li>
<li><code>org.springframework.aop.aspectj.AspectJExpressionPointcut</code></li>
<li><code>org.springframework.aop.support.DynamicMethodMatcherPointcut</code></li>
<li><code>org.springframework.aop.support .StaticMethodMatcherPointcut</code></li>
<li><code>org.springframework.aop.support.ComposablePointcut</code></li>
<li><code>org.springframework.aop.support.ControlFlowPointcut</code></li>
</ul>
<h4 id="Advice-types"><a href="#Advice-types" class="headerlink" title="Advice types"></a>Advice types</h4><table style="height: 122px;" border="1" width="631"><br><tbody><br><tr><br><td>Advice type</td><br><td></td><br></tr><br><tr><br><td>before</td><br><td>org.springframework.aop.BeforeAdviceorg.springframework.aop.MethodBeforeAdvice</td><br></tr><br><tr><br><td>after(finally)</td><br><td>org.springframework.aop.AfterAdvice</td><br></tr><br><tr><br><td>after returning</td><br><td>org.springframework.aop.AfterReturningAdvice</td><br></tr><br><tr><br><td>around</td><br><td>org.springframework.aop.Interceptororg.springframework.aop.MethodInterceptor</td><br></tr><br><tr><br><td>throws</td><br><td>org.springframework.aop.ThrowsAdvice</td><br></tr><br><tr><br><td>introduction</td><br><td></td><br></tr><br></tbody><br></table><br><img src="/media/advice-types.jpg" alt="advice-types"><br><br><br>#### schema-based configuration<br><br>##### <aop:aspect><br><br><figure class="highlight"><table><tr><td class="code"><pre><div class="line">&lt;aop:config&gt;</div><div class="line">    &lt;!-- shared top-level pointcut --&gt;</div><div class="line">    &lt;aop:pointcut id="fooExecution" expression="execution(* com.apress.prospring4.ch5..foo*(int))"/&gt;</div><div class="line"></div><div class="line">    &lt;aop:aspect ref="myAspect"&gt;</div><div class="line">        &lt;!-- &lt;aop:pointcut ... /&gt; --&gt;</div><div class="line">        &lt;aop:before method="simpleBeforeAdvice" pointcut-ref="fooExecution" /&gt;</div><div class="line">        &lt;aop:around method="simpleAroundAdvice" pointcut-ref="fooExecution" /&gt;</div><div class="line">    &lt;/aop:aspect&gt;</div><div class="line">&lt;/aop:config&gt;</div></pre></td></tr></table></figure><br><br><code>myAspect</code> bean is a plain bean, which don’t necessarily implement any interface.<br><br>##### <aop:advisor><br><br>This is called aspect instantiation model.<br><figure class="highlight"><table><tr><td class="code"><pre><div class="line">&lt;aop:config&gt;</div><div class="line">    &lt;aop:pointcut id="businessService"</div><div class="line">        expression="execution(* com.xyz.myapp.service.*.*(..))"/&gt;</div><div class="line"></div><div class="line">    &lt;aop:advisor pointcut-ref="businessService" advice-ref="tx-advice"/&gt;</div><div class="line">&lt;/aop:config&gt;</div><div class="line"></div><div class="line">&lt;tx:advice id="tx-advice"&gt;</div><div class="line">    &lt;tx:attributes&gt;</div><div class="line">        &lt;tx:method name="*" propagation="REQUIRED"/&gt;</div><div class="line">    &lt;/tx:attributes&gt;</div><div class="line">&lt;/tx:advice&gt;</div></pre></td></tr></table></figure><br><br><code>advice-ref</code> is a bean which must implement one of the <code>Advice</code> interfaces family.<br><br>### @AspectJ style<br><br>Bascially, they use @Aspect, @Pointcut, @Around, @Before, …<br><br>To enable @AspectJ style:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&lt;aop:aspectj-autoproxy/&gt;</div></pre></td></tr></table></figure><br><br>### Load-time weaving<br><br>enabled by:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&lt;context:load-time-weaver&gt;</div></pre></td></tr></table></figure><br><br>The default <code>LoadTimeWeaver</code> is the <code>DefaultContextLoadTimeWeaver</code> class, which attempts to decorate an automatically detected<code>LoadTimeWeaver</code>: the exact type of <code>LoadTimeWeaver</code> that will be <em>automatically detected</em> is dependent upon your runtime environment (summarized in the following table).<br><br>You can also specific the exact load-time weaver rather than the automatic one in xml configuration file:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&lt;context:load-time-weaver weaver-<span class="class"><span class="keyword">class</span></span>=<span class="string">"org.springframework.instrument.classloading.ReflectiveLoadTimeWeaver"</span>/&gt;</div></pre></td></tr></table></figure><br><br><table border="1" summary="DefaultContextLoadTimeWeaver LoadTimeWeavers"><br><tbody><br><tr><br><td align="left" valign="top">Running in <a href="http://www.bea.com/framework.jsp?CNT=index.htm&amp;FP=/content/products/weblogic/server" target="_blank" rel="external">BEA’s Weblogic 10</a></td><br><td align="left" valign="top"><code>WebLogicLoadTimeWeaver</code></td><br></tr><br><tr><br><td align="left" valign="top">Running in <a href="http://www-01.ibm.com/software/webservers/appserv/was/" target="_blank" rel="external">IBM WebSphere Application Server 7</a></td><br><td align="left" valign="top"><code>WebSphereLoadTimeWeaver</code></td><br></tr><br><tr><br><td align="left" valign="top">Running in <a href="http://glassfish.dev.java.net/" target="_blank" rel="external">GlassFish</a></td><br><td align="left" valign="top"><code>GlassFishLoadTimeWeaver</code></td><br></tr><br><tr><br><td align="left" valign="top">Running in <a href="http://www.jboss.org/jbossas/" target="_blank" rel="external">JBoss AS</a></td><br><td align="left" valign="top"><code>JBossLoadTimeWeaver</code></td><br></tr><br><tr><br><td align="left" valign="top">JVM started with Spring <code>InstrumentationSavingAgent</code> <span class="emphasis"><em>(java -javaagent:path/to/spring-instrument.jar)</em></span>e.g. J2SE applications (no LTW support, if no instrument agent specified to JVM, errors will be thrown)</td><br><td align="left" valign="top"><code>InstrumentationLoadTimeWeaver</code></td><br></tr><br><tr><br><td align="left" valign="top">Others all, expecting the underlying ClassLoader to follow common conventions (e.g. applicable to<code>TomcatInstrumentableClassLoader</code> and <a href="http://www.caucho.com/" target="_blank" rel="external">Resin</a>)</td><br><td align="left" valign="top"><code>ReflectiveLoadTimeWeaver</code></td><br></tr><br></tbody><br></table>

<h4 id="WebLogic-WebSphere-Resin-GlassFish-JBoss"><a href="#WebLogic-WebSphere-Resin-GlassFish-JBoss" class="headerlink" title="WebLogic, WebSphere, Resin, GlassFish, JBoss"></a>WebLogic, WebSphere, Resin, GlassFish, JBoss</h4><p>These environments have Load-time weaving support, no need for <code>-javaagent:path/to/``org.springframework.instrument-{version}.jar</code></p>
<h4 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h4><p>not support. You need do extra things to LTW</p>
<ul>
<li>Copy <code>org.springframework.instrument.tomcat.jar</code> into <span class="emphasis">_$CATALINA<em>HOME</em></span>/lib</li>
<li>Instruct Tomcat to use the custom class loader (instead of the default) by editing the web application context file:<figure class="highlight"><table><tr><td class="code"><pre><div class="line">&lt;Context path="/myWebApp" docBase="/my/webApp/location"&gt;</div><div class="line">    &lt;Loader loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader"/&gt;</div><div class="line">&lt;/Context&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="Generic-J2SE-applications"><a href="#Generic-J2SE-applications" class="headerlink" title="Generic J2SE applications"></a>Generic J2SE applications</h4><p>Spring provides <code>InstrumentationLoadTimeWeaver</code>, which requires a Spring-specific (but very general) VM agent,<code>-javaagent:path/to/org.springframework.instrument-{version}.jar</code></p>
</aop:advisor></aop:aspect>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/03/spring-framework-ioc-di/" itemprop="url">
                  Spring framework - IoC / DI
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-03T16:06:55+08:00" content="2015-04-03">
              2015-04-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/03/spring-framework-ioc-di/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/03/spring-framework-ioc-di/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="IoC-DI-and-beans"><a href="#IoC-DI-and-beans" class="headerlink" title="IoC/DI and beans"></a>IoC/DI and beans</h3><p>IoC is also known as <span class="emphasis"><em>dependency injection</em></span> (DI).</p>
<p>A bean just need to define its dependencies through its constructor arguments, its factory method arguments or its properties setter. And then the container will inject these dependencies when initializing this bean.</p>
<p>Traditionally, the bean itself control the initialization process or location of its dependencies by directly invoking its constructor of the class or some look-up mechanism such as Service Locator pattern(e.g. JNDI or something).</p>
<p>So DI is a converse of the above traditional process, and that’s the reason it’s called Inverse-of-Control (IoC).</p>
<p>A <strong>bean</strong> is a manged object, whose creation, assembly, even whole lifecycle is controlled by the container.</p>
<p><img src="/media/container-magic.png" alt="container-magic"></p>
<p>Configuration metadata can be specified by XML-based configuration style or Annotation-based configuration style.</p>
<h3 id="bean-definition"><a href="#bean-definition" class="headerlink" title="bean definition"></a>bean definition</h3><h4 id="bean-name"><a href="#bean-name" class="headerlink" title="bean name"></a>bean name</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;bean id=<span class="string">"only_one_id"</span> name=<span class="string">"name1 name2 name3"</span> ..&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;alias name=<span class="string">"fromName"</span> alias=<span class="string">"toName"</span>/&amp;gt;</div></pre></td></tr></table></figure>
<p>you can name a bean by use id/name attribute. What’s more important is you can specify 0, 1, or multiple names/alias for a bean.</p>
<h4 id="instantiating-beans"><a href="#instantiating-beans" class="headerlink" title="instantiating beans"></a>instantiating beans</h4><ul>
<li><p>Instantiation with a constructor</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;bean id=<span class="string">"exampleBean"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"examples.ExampleBean"</span>/&amp;gt;  </div><div class="line"></div><div class="line">&amp;lt;bean name=<span class="string">"anotherExample"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"examples.ExampleBeanTwo$InnerClass"</span>/&amp;gt;</div></pre></td></tr></table></figure>
</li>
<li><p>Instantiation with a static factory method</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;bean id=<span class="string">"clientService"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"examples.ClientService"</span> factory-method=<span class="string">"createInstance"</span>/&amp;gt;</div></pre></td></tr></table></figure>
</li>
<li><p>Instantiation using an instance factory method</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;!-- the factory bean, <span class="function">which contains a method called <span class="title">createInstance</span><span class="params">()</span> --&amp;gt</span>;</div><div class="line">&amp;lt;bean id=<span class="string">"serviceLocator"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"examples.DefaultServiceLocator"</span>&amp;gt;</div><div class="line">    &amp;lt;!-- inject any dependencies required by <span class="keyword">this</span> locator bean --&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;!-- the bean to be created via the factory bean --&amp;gt;</div><div class="line">&amp;lt;bean id=<span class="string">"clientService"</span></div><div class="line">    factory-bean=<span class="string">"serviceLocator"</span></div><div class="line">    factory-method=<span class="string">"createClientServiceInstance"</span>/&amp;gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="dependencies"><a href="#dependencies" class="headerlink" title="dependencies"></a>dependencies</h4><ul>
<li>Constructor-based dependency injection<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;bean id=<span class="string">"foo"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"x.y.Foo"</span>&amp;gt;</div><div class="line">    &amp;lt;constructor-arg ref=<span class="string">"bar"</span>/&amp;gt;</div><div class="line">    &amp;lt;constructor-arg ref=<span class="string">"baz"</span>/&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;bean id=<span class="string">"bar"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"x.y.Bar"</span>/&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;bean id=<span class="string">"baz"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"x.y.Baz"</span>/&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;bean id=<span class="string">"exampleBean"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"examples.ExampleBean"</span>&amp;gt;</div><div class="line">    &amp;lt;constructor-arg type=<span class="string">"int"</span> value=<span class="string">"7500000"</span>/&amp;gt;</div><div class="line">    &amp;lt;constructor-arg type=<span class="string">"java.lang.String"</span> value=<span class="string">"42"</span>/&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;bean id=<span class="string">"exampleBean"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"examples.ExampleBean"</span>&amp;gt;</div><div class="line">    &amp;lt;constructor-arg index=<span class="string">"0"</span> value=<span class="string">"7500000"</span>/&amp;gt;</div><div class="line">    &amp;lt;constructor-arg index=<span class="string">"1"</span> value=<span class="string">"42"</span>/&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;!-- compiled with the debug flag --&amp;gt;</div><div class="line">&amp;lt;bean id=<span class="string">"exampleBean"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"examples.ExampleBean"</span>&amp;gt;</div><div class="line">    &amp;lt;constructor-arg name=<span class="string">"years"</span> value=<span class="string">"7500000"</span>/&amp;gt;</div><div class="line">    &amp;lt;constructor-arg name=<span class="string">"ultimateAnswer"</span> value=<span class="string">"42"</span>/&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>XML shortcut with the c-namespace</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;bean id=<span class="string">"bar"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"x.y.Bar"</span>/&amp;gt;</div><div class="line">&amp;lt;bean id=<span class="string">"baz"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"x.y.Baz"</span>/&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;!-- traditional declaration --&amp;gt;</div><div class="line">&amp;lt;bean id=<span class="string">"foo"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"x.y.Foo"</span>&amp;gt;</div><div class="line">    &amp;lt;constructor-arg ref=<span class="string">"bar"</span>/&amp;gt;</div><div class="line">    &amp;lt;constructor-arg ref=<span class="string">"baz"</span>/&amp;gt;</div><div class="line">    &amp;lt;constructor-arg value=<span class="string">"foo@bar.com"</span>/&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;!-- c-namespace declaration --&amp;gt;</div><div class="line">&amp;lt;bean id=<span class="string">"foo"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"x.y.Foo"</span> c:bar-ref=<span class="string">"bar"</span> c:baz-ref=<span class="string">"baz"</span> c:email=<span class="string">"foo@bar.com"</span>/&amp;gt;</div></pre></td></tr></table></figure>
<ul>
<li>Setter-based dependency injection<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;bean id=<span class="string">"exampleBean"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"examples.ExampleBean"</span>&amp;gt;</div><div class="line">    &amp;lt;!-- setter injection using the nested ref element --&amp;gt;</div><div class="line">    &amp;lt;property name=<span class="string">"beanOne"</span>&amp;gt;</div><div class="line">        &amp;lt;ref bean=<span class="string">"anotherExampleBean"</span>/&amp;gt;</div><div class="line">    &amp;lt;/property&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;!-- setter injection using the neater ref attribute --&amp;gt;</div><div class="line">    &amp;lt;property name=<span class="string">"beanTwo"</span> ref=<span class="string">"yetAnotherBean"</span>/&amp;gt;</div><div class="line">    &amp;lt;property name=<span class="string">"integerProperty"</span> value=<span class="string">"1"</span>/&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;bean id=<span class="string">"myDataSource"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"org.apache.commons.dbcp.BasicDataSource"</span> destroy-method=<span class="string">"close"</span>&amp;gt;</div><div class="line">    &amp;lt;!-- <span class="function">results in a <span class="title">setDriverClassName</span><span class="params">(String)</span> call --&amp;gt</span>;</div><div class="line">    &amp;lt;property name=<span class="string">"driverClassName"</span> value=<span class="string">"com.mysql.jdbc.Driver"</span>/&amp;gt;</div><div class="line">    &amp;lt;property name=<span class="string">"url"</span> value=<span class="string">"jdbc:mysql://localhost:3306/mydb"</span>/&amp;gt;</div><div class="line">    &amp;lt;property name=<span class="string">"username"</span> value=<span class="string">"root"</span>/&amp;gt;</div><div class="line">    &amp;lt;property name=<span class="string">"password"</span> value=<span class="string">"masterkaoli"</span>/&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;bean id=<span class="string">"outer"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"..."</span>&amp;gt;</div><div class="line">    &amp;lt;!-- instead of using a reference to a target bean, simply define the target bean inline --&amp;gt;</div><div class="line">    &amp;lt;property name=<span class="string">"target"</span>&amp;gt;</div><div class="line">        &amp;lt;bean <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.example.Person"</span>&amp;gt; &amp;lt;!-- <span class="keyword">this</span> is the inner bean --&amp;gt;</div><div class="line">            &amp;lt;property name=<span class="string">"name"</span> value=<span class="string">"Fiona Apple"</span>/&amp;gt;</div><div class="line">            &amp;lt;property name=<span class="string">"age"</span> value=<span class="string">"25"</span>/&amp;gt;</div><div class="line">        &amp;lt;/bean&amp;gt;</div><div class="line">    &amp;lt;/property&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;bean id=<span class="string">"moreComplexObject"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"example.ComplexObject"</span>&amp;gt;</div><div class="line">    &amp;lt;!-- <span class="function">results in a <span class="title">setAdminEmails</span><span class="params">(java.util.Properties)</span> call --&amp;gt</span>;</div><div class="line">    &amp;lt;property name=<span class="string">"adminEmails"</span>&amp;gt;</div><div class="line">        &amp;lt;props&amp;gt;</div><div class="line">            &amp;lt;prop key=<span class="string">"administrator"</span>&amp;gt;administrator<span class="meta">@example</span>.org&amp;lt;/prop&amp;gt;</div><div class="line">            &amp;lt;prop key=<span class="string">"support"</span>&amp;gt;support<span class="meta">@example</span>.org&amp;lt;/prop&amp;gt;</div><div class="line">            &amp;lt;prop key=<span class="string">"development"</span>&amp;gt;development<span class="meta">@example</span>.org&amp;lt;/prop&amp;gt;</div><div class="line">        &amp;lt;/props&amp;gt;</div><div class="line">    &amp;lt;/property&amp;gt;</div><div class="line">    &amp;lt;!-- <span class="function">results in a <span class="title">setSomeList</span><span class="params">(java.util.List)</span> call --&amp;gt</span>;</div><div class="line">    &amp;lt;property name=<span class="string">"someList"</span>&amp;gt;</div><div class="line">        &amp;lt;list&amp;gt;</div><div class="line">            &amp;lt;value&amp;gt;a list element followed by a reference&amp;lt;/value&amp;gt;</div><div class="line">            &amp;lt;ref bean=<span class="string">"myDataSource"</span> /&amp;gt;</div><div class="line">        &amp;lt;/list&amp;gt;</div><div class="line">    &amp;lt;/property&amp;gt;</div><div class="line">    &amp;lt;!-- <span class="function">results in a <span class="title">setSomeMap</span><span class="params">(java.util.Map)</span> call --&amp;gt</span>;</div><div class="line">    &amp;lt;property name=<span class="string">"someMap"</span>&amp;gt;</div><div class="line">        &amp;lt;map&amp;gt;</div><div class="line">            &amp;lt;entry key=<span class="string">"an entry"</span> value=<span class="string">"just some string"</span>/&amp;gt;</div><div class="line">            &amp;lt;entry key =<span class="string">"a ref"</span> value-ref=<span class="string">"myDataSource"</span>/&amp;gt;</div><div class="line">        &amp;lt;/map&amp;gt;</div><div class="line">    &amp;lt;/property&amp;gt;</div><div class="line">    &amp;lt;!-- <span class="function">results in a <span class="title">setSomeSet</span><span class="params">(java.util.Set)</span> call --&amp;gt</span>;</div><div class="line">    &amp;lt;property name=<span class="string">"someSet"</span>&amp;gt;</div><div class="line">        &amp;lt;set&amp;gt;</div><div class="line">            &amp;lt;value&amp;gt;just some string&amp;lt;/value&amp;gt;</div><div class="line">            &amp;lt;ref bean=<span class="string">"myDataSource"</span> /&amp;gt;</div><div class="line">        &amp;lt;/set&amp;gt;</div><div class="line">    &amp;lt;/property&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong> “” and null</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;bean <span class="class"><span class="keyword">class</span></span>=<span class="string">"ExampleBean"</span>&amp;gt;</div><div class="line">    &amp;lt;property name=<span class="string">"email"</span> value=<span class="string">""</span>/&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;bean <span class="class"><span class="keyword">class</span></span>=<span class="string">"ExampleBean"</span>&amp;gt;</div><div class="line">    &amp;lt;property name=<span class="string">"email"</span>&amp;gt;</div><div class="line">        &amp;lt;<span class="keyword">null</span>/&amp;gt;</div><div class="line">    &amp;lt;/property&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div></pre></td></tr></table></figure></p>
<p><strong>XML shortcut with the p-namespace</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;bean name=<span class="string">"john-classic"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.example.Person"</span>&amp;gt;</div><div class="line">    &amp;lt;property name=<span class="string">"name"</span> value=<span class="string">"John Doe"</span>/&amp;gt;</div><div class="line">    &amp;lt;property name=<span class="string">"spouse"</span> ref=<span class="string">"jane"</span>/&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;bean name=<span class="string">"john-modern"</span></div><div class="line">      <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.example.Person"</span></div><div class="line">      p:name=<span class="string">"John Doe"</span></div><div class="line">      p:spouse-ref=<span class="string">"jane"</span>/&amp;gt;</div></pre></td></tr></table></figure>
<h4 id="bean-scopes"><a href="#bean-scopes" class="headerlink" title="bean scopes"></a>bean scopes</h4><p><table border="1" summary="Bean scopes"></table></p>
<p><thead></thead></p>
<p><tr></tr></p>
<p><th align="left" valign="top">Scope</th></p>
<p><th align="left" valign="top">Description</th><br><br></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<p><td align="left" valign="top"><a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-factory-scopes-singleton" title="5.5.1 The singleton scope" target="_blank" rel="external">singleton</a></td></p>
<p><td align="left" valign="top">(Default) Scopes a single bean definition to a single object instance per Spring IoC container.</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top"><a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-factory-scopes-prototype" title="5.5.2 The prototype scope" target="_blank" rel="external">prototype</a></td></p>
<p><td align="left" valign="top">Scopes a single bean definition to any number of object instances.</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top"><a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-factory-scopes-request" title="Request scope" target="_blank" rel="external">request</a></td></p>
<p><td align="left" valign="top">Scopes a single bean definition to the lifecycle of a single HTTP request; that is, each HTTP request has its own instance of a bean created off the back of a single bean definition. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top"><a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-factory-scopes-session" title="Session scope" target="_blank" rel="external">session</a></td></p>
<p><td align="left" valign="top">Scopes a single bean definition to the lifecycle of an HTTP <code>Session</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top"><a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-factory-scopes-global-session" title="Global session scope" target="_blank" rel="external">global session</a></td></p>
<p><td align="left" valign="top">Scopes a single bean definition to the lifecycle of a global HTTP <code>Session</code>. Typically only valid when used in a portlet context. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top"><a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-factory-scopes-application" title="Application scope" target="_blank" rel="external">application</a></td></p>
<p><td align="left" valign="top">Scopes a single bean definition to the lifecycle of a <code>ServletContext</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td><br><br><br><br>request / session / application scopes need special initial configuration.</p>
<h4 id="annotations-and-bean-scanning"><a href="#annotations-and-bean-scanning" class="headerlink" title="annotations and bean scanning"></a>annotations and bean scanning</h4><p><strong>Spring annotations vs. standard annotations</strong></p>
<p><div class="table-contents"></div></p>
<p><table border="1" summary="Spring annotations vs. standard annotations"><colgroup> <col class="col_1"> <col class="col_2"> <col class="col_3"></colgroup></table></p>
<p><thead></thead></p>
<p><tr></tr></p>
<p><th align="left" valign="top">Spring</th></p>
<p><th align="left" valign="top">javax.inject.*</th></p>
<p><th align="left" valign="top">javax.inject restrictions / comments</th><br><br></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<p><td align="left" valign="top">@Autowired</td></p>
<p><td align="left" valign="top">@Inject</td></p>
<p><td align="left" valign="top">@Inject has no <span class="emphasis"><em>required</em></span> attribute</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">@Component</td></p>
<p><td align="left" valign="top">@Named</td></p>
<p><td align="left" valign="top">-</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">@Scope(“singleton”)</td></p>
<p><td align="left" valign="top">@Singleton</td></p>
<p><td align="left" valign="top">The JSR-330 default scope is like Spring’s <code>prototype</code>. However, in order to keep it consistent with Spring’s general defaults, a JSR-330 bean declared in the Spring container is a <code>singleton</code> by default. In order to use a scope other than <code>singleton</code>, you should use Spring’s <code>@Scope</code> annotation.<code>javax.inject</code> also provides a <a href="http://download.oracle.com/javaee/6/api/javax/inject/Scope.html" target="_blank" rel="external">@Scope</a> annotation. Nevertheless, this one is only intended to be used for creating your own annotations.</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">@Qualifier</td></p>
<p><td align="left" valign="top">@Named</td></p>
<p><td align="left" valign="top">-</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">@Value</td></p>
<p><td align="left" valign="top">-</td></p>
<p><td align="left" valign="top">no equivalent</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">@Required</td></p>
<p><td align="left" valign="top">-</td></p>
<p><td align="left" valign="top">no equivalent</td><br></p>
<p><tr></tr></p>
<p><td align="left" valign="top">@Lazy</td></p>
<p><td align="left" valign="top">-</td></p>
<p><td align="left" valign="top">no equivalent</td><br><br><br><br><br>Spring also supports injection using the JSR-250 <code>@Resource</code> annotation on fields or bean property setter methods.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://qph.is.quoracdn.net/main-thumb-27403014-200-azcnfpakpayhgojvmueqcfjeyufbjpcx.jpeg"
               alt="Richard Yang" />
          <p class="site-author-name" itemprop="name">Richard Yang</p>
          <p class="site-description motion-element" itemprop="description">Nothing seek, nothing find</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">133</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">48</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://linkedin.com/in/richdyang" target="_blank" title="Linkedin">
                  
                    <i class="fa fa-fw fa-linkedin"></i>
                  
                  Linkedin
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://github.com/richdyang" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-github-alt"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://bitbucket.org/richdyang" target="_blank" title="Bitbucket">
                  
                    <i class="fa fa-fw fa-bitbucket"></i>
                  
                  Bitbucket
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://stackoverflow.com/users/4344443/richard" target="_blank" title="Stackoverflow">
                  
                    <i class="fa fa-fw fa-stack-overflow"></i>
                  
                  Stackoverflow
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://twitter.com/richdyang" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Richard Yang</span>
</div>

<!--div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div-->

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'richyang';
      var disqus_identifier = 'page/5/index.html';
      var disqus_title = '';

      function run_disqus_script(disqus_script) {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');

      

    </script>
  




  
  

  

  

  
  

  
  
  
  <link rel="stylesheet" href="/vendors/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/vendors/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.0"></script>



</body>
</html>
