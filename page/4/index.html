<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Richard Yang, Java Developer, Senior software engineer" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="Nothing seek, nothing find">
<meta property="og:type" content="website">
<meta property="og:title" content="Richard Yang">
<meta property="og:url" content="https://richyang.me/page/4/index.html">
<meta property="og:site_name" content="Richard Yang">
<meta property="og:description" content="Nothing seek, nothing find">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Richard Yang">
<meta name="twitter:description" content="Nothing seek, nothing find">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    },
    algolia: {
      applicationID: 'X0H1P7HDKY',
      apiKey: 'ddc0af00a6e07c9b1be9f4da4cf5b9d9',
      indexName: 'richyang.me',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>




  <title> Richard Yang </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <!--span class="logo-line-before"><i></i></span-->
      <span class="site-title">Richard Yang</span>
      <!--span class="logo-line-after"><i></i></span-->
    </a>
  </div>
  <p class="site-subtitle">Full-stack software engineer mainly focusing on Java-based technologies and web front-end</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            Home
          </a>
        </li>
        
      
        
        
        <li class="menu-item menu-item-books">
          <a href="https://www.gitbook.com/@richdyang" rel="section">
            
            Books
          </a>
        </li>
        
      
        
        
        <li class="menu-item menu-item-showcase">
          <a href="/showcase" rel="section">
            
            Showcase
          </a>
        </li>
        
      
        
        
        <li class="menu-item menu-item-resume">
          <a href="http://linkedin.com/in/richdyang" rel="section">
            
            Résumé
          </a>
        </li>
        
      
        
        
      
        
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
            About
          </a>
        </li>
        
      
        
        
      
        
        
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
            <i class="menu-item-icon fa fa-search fa-lg"></i>Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>

<div class="social-links" style="float: right; padding-left: 50px; margin-right: 10px">
      
        
          <span class="links-of-author-item">
            <a href="http://linkedin.com/in/richdyang" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-linkedin"></i>
                </span>
                 
              
            </a>
          </span>
        
          <span class="links-of-author-item">
            <a href="http://github.com/richdyang" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-github-alt"></i>
                </span>
                 
              
            </a>
          </span>
        
          <span class="links-of-author-item">
            <a href="http://bitbucket.org/richdyang" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-bitbucket"></i>
                </span>
                 
              
            </a>
          </span>
        
          <span class="links-of-author-item">
            <a href="http://stackoverflow.com/users/4344443/richard" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-stack-overflow"></i>
                </span>
                 
              
            </a>
          </span>
        
          <span class="links-of-author-item">
            <a href="http://twitter.com/richdyang" target="_blank" style="border-bottom: none">
              
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse fa-twitter"></i>
                </span>
                 
              
            </a>
          </span>
        
      
  </div>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/18/get-started-with-angularjs/" itemprop="url">
                  Get started with AngularJS
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-05-18T23:32:13+08:00" content="2015-05-18">
              2015-05-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Javascript/" itemprop="url" rel="index">
                    <span itemprop="name">Javascript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/18/get-started-with-angularjs/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/05/18/get-started-with-angularjs/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="AngularJS-concepts"><a href="#AngularJS-concepts" class="headerlink" title="AngularJS concepts"></a>AngularJS concepts</h3><p><img src="/media/angularjs-conception.png" alt="angularjs-conception"></p>
<p>Core concepts:</p>
<ul>
<li>2-way data binding</li>
<li>directive</li>
<li>expression &amp; filter</li>
<li>view / template</li>
<li>controller</li>
</ul>
<h4 id="2-way-data-binding"><a href="#2-way-data-binding" class="headerlink" title="2-way data binding"></a>2-way data binding</h4><p><img src="/media/jogjajs-single-page-application-nganggo-angularjs-17-638.jpg" alt="jogjajs-single-page-application-nganggo-angularjs-17-638"></p>
<h4 id="directives"><a href="#directives" class="headerlink" title="directives"></a>directives</h4><ul>
<li>manipulate DOM: DOM manipulation should only happen in directive implementations</li>
<li>manipulate data<br>Elements: &lt;<span style="color: #000000; background-color: #ffff00;">ng-xx</span>&gt; &lt;/ng-xx&gt;</li>
</ul>
<p>Attributes: &lt;span <span style="background-color: #ffff00;">ng-xx=”exp”</span>&gt;&lt;/span&gt;</p>
<p>Comments: &lt;!– directive: <span style="background-color: #ffff00;">ng-xx exp</span> –&gt;</p>
<p>Classes: &lt;span class=”<span style="background-color: #ffff00;">ng-xx: exp</span>“&gt;&lt;/span&gt;</p>
<h4 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h4><p>Scope is a glue between controller, template and model. It keeps models and views separate, but in sync.</p>
<h4 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h4><p>Controller is for UI logic</p>
<h3 id="Injector"><a href="#Injector" class="headerlink" title="Injector"></a>Injector</h3><p>The injector uses recipes to create two types of objects, <strong>services</strong> and <strong>specialized objects</strong>.</p>
<ul>
<li>Services are objects whose API is defined by the developer writing the service.</li>
<li>Specialized objects conform to a specific Angular framework API. These objects extend the framework as plugins and therefore must implement interfaces specified by Angular. These interfaces are Controller, Directive, Filter and Animation.</li>
</ul>
<h4 id="Recipes"><a href="#Recipes" class="headerlink" title="Recipes"></a>Recipes</h4><p>There are five recipe types that define how to create objects: Value, Constant, Factory, Service and Provider.</p>
<p>Value, Constant, Factory and Service are the synaptic sugar of Provider.</p>
<ul>
<li>Value recipe<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">myApp.value(<span class="string">'clientId'</span>, <span class="string">'a12345654321x'</span>);</div></pre></td></tr></table></figure>
</li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p>Constant recipe</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">myApp.constant(<span class="string">'planetName'</span>, <span class="string">'Greasy Giant'</span>);</div></pre></td></tr></table></figure>
</li>
<li><p>Factory recipe</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">myApp.factory(<span class="string">'clientId'</span>, <span class="function">function <span class="title">clientIdFactory</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">'a12345654321x'</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>Service recipe</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function">function <span class="title">UnicornLauncher</span><span class="params">(apiToken)</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">this</span>.launchedCount = <span class="number">0</span>;</div><div class="line">  <span class="keyword">this</span>.launch = function() &#123;</div><div class="line">    <span class="comment">// Make a request to the remote API and include the apiToken</span></div><div class="line">    ...</div><div class="line">    <span class="keyword">this</span>.launchedCount++;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//myApp.factory('unicornLauncher', ["apiToken", function(apiToken) &#123;</span></div><div class="line"><span class="comment">//  return new UnicornLauncher(apiToken);</span></div><div class="line"><span class="comment">//&#125;]);</span></div><div class="line"></div><div class="line">myApp.service(<span class="string">'unicornLauncher'</span>, [<span class="string">"apiToken"</span>, UnicornLauncher]);</div></pre></td></tr></table></figure>
</li>
<li><p>provider recipe</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">myApp.provider(<span class="string">'unicornLauncher'</span>, <span class="function">function <span class="title">UnicornLauncherProvider</span><span class="params">()</span> </span>&#123;</div><div class="line">  var useTinfoilShielding = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">  <span class="keyword">this</span>.useTinfoilShielding = function(value) &#123;</div><div class="line">    useTinfoilShielding = !!value;</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">this</span>.$get = [<span class="string">"apiToken"</span>, <span class="function">function <span class="title">unicornLauncherFactory</span><span class="params">(apiToken)</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// let's assume that the UnicornLauncher constructor was also changed to</span></div><div class="line">    <span class="comment">// accept and use the useTinfoilShielding argument</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> UnicornLauncher(apiToken, useTinfoilShielding);</div><div class="line">  &#125;];</div><div class="line">&#125;);</div><div class="line"></div><div class="line">myApp.config([<span class="string">"unicornLauncherProvider"</span>, function(unicornLauncherProvider) &#123;</div><div class="line">  unicornLauncherProvider.useTinfoilShielding(<span class="keyword">true</span>);</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
</li>
</ul>
<table class="table table-bordered code-table ng-scope" border="1"><br><thead><br><tr><br><th>Features / Recipe type</th><br><th>Factory</th><br><th>Service</th><br><th>Value</th><br><th>Constant</th><br><th>Provider</th><br></tr><br></thead><br><tbody><br><tr><br><td>can have dependencies</td><br><td class="success">yes</td><br><td class="success">yes</td><br><td class="error">no</td><br><td class="error">no</td><br><td class="success">yes</td><br></tr><br><tr><br><td>uses type friendly injection</td><br><td class="error">no</td><br><td class="success">yes</td><br><td class="success">yes<em></em></td><br><td class="success">yes</td><br><td class="error">no</td><br></tr><br><tr><br><td>object available in config phase</td><br><td class="error">no</td><br><td class="error">no</td><br><td class="error"><span style="background-color: #99cc00;">no</span></td><br><td class="success"><span style="background-color: #99cc00;">yes</span></td><br><td class="success">yes**</td><br></tr><br><tr><br><td>can create functions</td><br><td class="success">yes</td><br><td class="success">yes</td><br><td class="success">yes</td><br><td class="success">yes</td><br><td class="success">yes</td><br></tr><br><tr><br><td>can create primitives</td><br><td class="success">yes</td><br><td class="error">no</td><br><td class="success">yes</td><br><td class="success">yes</td><br><td class="success">yes</td><br></tr><br></tbody><br></table>

<h4 id="Specialized-object"><a href="#Specialized-object" class="headerlink" title="Specialized object"></a>Specialized object</h4><p>The instructions for the injector to create these special objects (with the exception of the Controller objects) use the Factory recipe behind the scenes.</p>
<p>Since the directives are registered via the Factory recipe, we can use the same syntax as with factories.</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">myApp.directive(<span class="string">'myPlanet'</span>, [<span class="string">'planetName'</span>, <span class="function">function <span class="title">myPlanetDirectiveFactory</span><span class="params">(planetName)</span> </span>&#123;</div><div class="line">  <span class="comment">// directive definition object</span></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    restrict: <span class="string">'E'</span>,</div><div class="line">    scope: &#123;&#125;,</div><div class="line">    link: function($scope, $element) &#123; $element.text(<span class="string">'Planet: '</span> + planetName); &#125;</div><div class="line">  &#125;</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
<p>Using Factory recipes, you can also define Angular’s filters and animations, but the controllers are a bit special.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">myApp.controller(<span class="string">'DemoController'</span>, [<span class="string">'clientId'</span>, <span class="function">function <span class="title">DemoController</span><span class="params">(clientId)</span> </span>&#123;</div><div class="line">  <span class="keyword">this</span>.clientId = clientId;</div><div class="line">&#125;]);</div></pre></td></tr></table></figure></p>
<p>Unlike services, controllers are not singletons.</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/12/javascript-scope-and-context/" itemprop="url">
                  JavaScript scopes and context
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-05-12T17:06:39+08:00" content="2015-05-12">
              2015-05-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Javascript/" itemprop="url" rel="index">
                    <span itemprop="name">Javascript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/12/javascript-scope-and-context/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/05/12/javascript-scope-and-context/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="scope-vs-context"><a href="#scope-vs-context" class="headerlink" title="scope vs. context"></a>scope vs. context</h3><p>Both two terms are related to function.</p>
<p>Every function invocation has both a scope and a context associated with it. Functions can be adopted for various contexts and scope can be encapsulated and preserved.</p>
<p>Fundamentally, scope is <strong>function-based</strong> while context is <strong>object-based</strong>.</p>
<ul>
<li>Scope pertains to the variable access of a function when it is invoked and is unique to each invocation.</li>
<li>Context is always the value of the <code>this</code> keyword which is a reference to the object that “owns” the currently executing code.<iframe width="560" height="315" src="https://www.youtube.com/embed/hDT3IbvH-9I" frameborder="0" allowfullscreen="allowfullscreen"></iframe>

</li>
</ul>
<h3 id="scope"><a href="#scope" class="headerlink" title="scope"></a>scope</h3><p>A variable can be defined in either local or global scope, which establishes the variables’ accessibility from different scopes during runtime.</p>
<p>Javascript has no <del><strong>block scope</strong></del>.</p>
<p>All scopes in JavaScript are created with <code>function Scope</code> <em>only</em>, they aren’t created by <code>for</code> or <code>while</code> loops or expression statements like <code>if</code> or <code>switch</code>.</p>
<h4 id="global-scope"><a href="#global-scope" class="headerlink" title="global scope"></a>global scope</h4><p>This is the top level scope. Any variable declared outside of a function body will live throughout runtime and can be accessed and altered in any scope.</p>
<h4 id="local-scope"><a href="#local-scope" class="headerlink" title="local scope"></a>local scope</h4><p>New functions = new local scope - that’s the rule.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Scope A - global</span></div><div class="line"><span class="keyword">var</span> myFunction = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// Scope B - local</span></div><div class="line">  <span class="keyword">var</span> myOtherFunction = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// Scope C - local</span></div><div class="line">  &#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="scope-chain"><a href="#scope-chain" class="headerlink" title="scope chain"></a>scope chain</h4><p>Each function defined has its own nested scope, and any function defined within another function has a local scope which is linked to the outer function.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">first</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    second();</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">second</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        third();</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">third</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            fourth();</div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">fourth</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="comment">// do something</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;   </div><div class="line">&#125;</div><div class="line">first();</div></pre></td></tr></table></figure>
<h3 id="quot-this-quot-context"><a href="#quot-this-quot-context" class="headerlink" title="&quot;this&quot; context"></a><code>&quot;this&quot;</code> context</h3><p>Context is most often determined by how a function is invoked. When a function is called as a method of an object, <code>this</code> is set to the object the method is called on.</p>
<p>invoke no-bound function</p>
<ul>
<li>bind <code>this</code> to <code>window</code> (by default) by invoking unbound function</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dog</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">  <span class="keyword">var</span> that = <span class="keyword">this</span>;</div><div class="line">  <span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span> == that);</div><div class="line">  &#125;;</div><div class="line">  bar();</div><div class="line"></div><div class="line">  <span class="keyword">this</span>.bar = bar;</div><div class="line">  <span class="keyword">this</span>.bar();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> Dog();</div></pre></td></tr></table></figure>
<ul>
<li>bind <code>this</code> by <code>new</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.drink = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Cat(); <span class="comment">// this -&gt; window</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat();</div><div class="line">cat.drink(); <span class="comment">// this -&gt; cat</span></div></pre></td></tr></table></figure>
<ul>
<li>bind <code>this</code> by specifying function to object property</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    foo: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        alert(<span class="keyword">this</span> === obj);    </div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">obj.foo(); <span class="comment">// true</span></div></pre></td></tr></table></figure>
<ul>
<li>Changing scope with <code>.call()</code>, <code>.apply()</code> and <code>.bind()</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">name, age</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name;</div><div class="line">  <span class="keyword">this</span>.age = age;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> john = &#123;</div><div class="line">  dept: <span class="string">'dev'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line">foo.apply(john, [<span class="string">'John'</span>, <span class="number">32</span>]);</div><div class="line"><span class="comment">//foo.call(obj, 'Richard', 32);</span></div><div class="line"><span class="built_in">console</span>.log(john); <span class="comment">// -&amp;gt; Object &#123;dept: "dev", name: "John", age: 32&#125;</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> tom = &#123;</div><div class="line">  dept: <span class="string">'test'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> bar = foo.bind(tom, <span class="string">'Tom'</span>, <span class="number">28</span>); <span class="comment">// just bind, not call</span></div><div class="line"><span class="built_in">console</span>.log(tom); <span class="comment">// Object &#123;dept: "test"&#125;</span></div><div class="line"><span class="comment">// do something else</span></div><div class="line"><span class="comment">// ...</span></div><div class="line">bar();</div><div class="line"><span class="built_in">console</span>.log(tom); <span class="comment">// Object &#123;dept: "test", name: "Tom", age: 28&#125;</span></div></pre></td></tr></table></figure>
<h3 id="Execution-Context"><a href="#Execution-Context" class="headerlink" title="Execution Context"></a>Execution Context</h3><p>This terminology is defined by ECMA specification. Don’t confuse it with the “<code>this</code>“ context.</p>
<p>JavaScript is a single threaded language, meaning only one task can be executed at a time. When the JavaScript interpreter initially executes code, it first enters into a global execution context by default. Each invocation of a function from this point on will result in the creation of a new execution context.</p>
<p>Each time a new execution context is created it is appended to the top of the <strong><em>execution stack</em></strong>.</p>
<p>An execution context can be divided into a creation and execution phase. In the creation phase, the interpreter will first create a <em>variable object</em> (also called an <em>activation object</em>) that is composed of all the variables, function declarations, and arguments defined inside the execution context. From there the <em>scope chain</em> is initialized next, and the value of <code>this</code> is determined last. Then in the execution phase, code is interpreted and executed.</p>
<h3 id="closure"><a href="#closure" class="headerlink" title="closure"></a>closure</h3><p>Accessing variables outside of the immediate lexical scope creates a closure.</p>
<p>It says, a closure is formed when a nested function is defined inside of another function, allowing access to the outer functions variables.</p>
<p>A simple illustration:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">aa</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> bb = <span class="string">'hello '</span>;</div><div class="line">    <span class="keyword">var</span> cc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> bb + <span class="string">"world"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>cc</code> as a function accesses its immediate outer scope. That creates a closure.</p>
<hr>
<p>Returning the nested function allows you to maintain access to the local variables, arguments, and inner function declarations of its outer function. This encapsulation allows us to hide and preserve the execution context from outside scopes while exposing a public interface and thus is subject to further manipulation.</p>
<p>A more practical example:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> sayHello = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> text = <span class="string">'Hello, '</span> + name;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(text);</div><div class="line">  &#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">sayHello(<span class="string">"Richard"</span>)();</div></pre></td></tr></table></figure>
<p>One of the most popular types of closures is what is widely known as the <em>module pattern</em>; it allows you to emulate public, private, and privileged members:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> Module = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> privateProperty = <span class="string">'foo'</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">privateMethod</span>(<span class="params">args</span>)</span>&#123;</div><div class="line">        <span class="comment">// do something</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line"></div><div class="line">        publicProperty: <span class="string">''</span>,</div><div class="line"></div><div class="line">        publicMethod: <span class="function"><span class="keyword">function</span>(<span class="params">args</span>)</span>&#123;</div><div class="line">            <span class="comment">// do something</span></div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        privilegedMethod: <span class="function"><span class="keyword">function</span>(<span class="params">args</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> privateMethod(args);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>References:</p>
<ol>
<li><a href="http://ryanmorr.com/understanding-scope-and-context-in-javascript/" target="_blank" rel="external">http://ryanmorr.com/understanding-scope-and-context-in-javascript/</a></li>
<li><a href="http://toddmotto.com/everything-you-wanted-to-know-about-javascript-scope/" target="_blank" rel="external">http://toddmotto.com/everything-you-wanted-to-know-about-javascript-scope/</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/12/javascript-prototype-proto-vs-prototype/" itemprop="url">
                  JavaScript prototype: __proto__ vs. prototype
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-05-12T15:35:15+08:00" content="2015-05-12">
              2015-05-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Javascript/" itemprop="url" rel="index">
                    <span itemprop="name">Javascript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/12/javascript-prototype-proto-vs-prototype/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/05/12/javascript-prototype-proto-vs-prototype/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Javascript is a prototype-based language. It resolve property using prototype chains.</p>
<h3 id="Prototype-chains-aka-prototype-inheritance"><a href="#Prototype-chains-aka-prototype-inheritance" class="headerlink" title="Prototype chains (aka prototype inheritance)"></a>Prototype chains (aka prototype inheritance)</h3><p><img src="/media/prototype-chains.png" alt="prototype-chains"></p>
<h3 id="The-proto-property"><a href="#The-proto-property" class="headerlink" title="The proto property"></a>The <strong>proto</strong> property</h3><p><strong>proto</strong> is the internal property of an object, it points to the prototype object of the object and is used for property look-up. Every object has a <strong>proto</strong> perperty and its relevant prototype object. But it maybe null, which means the object has no prototype object.</p>
<h3 id="function-as-constructor"><a href="#function-as-constructor" class="headerlink" title="function as constructor"></a>function as constructor</h3><p>In JavaScript you create an instance of a function like this:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function">function <span class="title">Foo</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="keyword">this</span>.kind = ‘foo’</div><div class="line">&#125;</div><div class="line"></div><div class="line">var foo = <span class="keyword">new</span> Foo(); </div><div class="line">foo.kind <span class="comment">//=&amp;gt; ‘foo’</span></div></pre></td></tr></table></figure></p>
<p>Behind this scenes it is like doing something like this:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function">function <span class="title">Foo</span><span class="params">()</span> </span>&#123;</div><div class="line">  var <span class="keyword">this</span> = &#123;&#125;; <span class="comment">// this is not valid, just for illustration</span></div><div class="line">  <span class="keyword">this</span>.__proto__ = Foo.prototype;</div><div class="line"></div><div class="line">  <span class="keyword">this</span>.kind = ‘foo’</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>But keep in mind that the implicit ‘<strong>this</strong>’ is only assigned to a new object when using ‘<strong>new</strong>’. If you forget ‘<strong>new</strong>’ keyword then ‘<strong>this</strong>’ will be the global object.</p>
<h3 id="the-‘function-prototype’"><a href="#the-‘function-prototype’" class="headerlink" title="the ‘function prototype’"></a>the ‘function prototype’</h3><p>Every function in JavaScript has a special property called ‘<strong>prototype</strong>’. To avoid confusion, we call it “function prototype”.</p>
<p>Basically, this object is provided at run-time by Javascript engine. This object has a property called “constructor” which points to the function itself.</p>
<p>It is used to<strong> build <code>__proto__</code></strong> when you create an object with <code>new</code> keyword.</p>
<h3 id="Javascript-object-model"><a href="#Javascript-object-model" class="headerlink" title="Javascript object model"></a>Javascript object model</h3><p>Now we illustrate the complete relations for prototype:</p>
<p><img src="/media/js-prototype.png" alt="js-prototype"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/08/web-vulnerability-issues-xss-csrf-sql-injection/" itemprop="url">
                  web vulnerability issues: XSS, CSRF, SQL Injection
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-05-08T20:25:02+08:00" content="2015-05-08">
              2015-05-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Security/" itemprop="url" rel="index">
                    <span itemprop="name">Security</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/08/web-vulnerability-issues-xss-csrf-sql-injection/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/05/08/web-vulnerability-issues-xss-csrf-sql-injection/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="XSS-Cross-Site-Scripting"><a href="#XSS-Cross-Site-Scripting" class="headerlink" title="XSS (Cross Site Scripting)"></a>XSS (Cross Site Scripting)</h3><p>XSS enables attackers to <strong>inject client-side script</strong> into Web pages viewed by other users.</p>
<p><img src="/media/Diagram-Describing-Blind-XSS-Attack.gif" alt="Diagram-Describing-Blind-XSS-Attack"></p>
<p>Simple solution: escape all users’ input data, include HTML, Javascript</p>
<h3 id="CSRF-Cross-Site-Request-Forgery"><a href="#CSRF-Cross-Site-Request-Forgery" class="headerlink" title="CSRF (Cross Site Request Forgery)"></a>CSRF (Cross Site Request Forgery)</h3><p>CSRF is an attack which forces an end user to execute unwanted actions on a web application in which he/she is currently authenticated.</p>
<p><img src="/media/csrf.png" alt="csrf"></p>
<p>Simple solution:</p>
<ol>
<li>insert hidden field for csrf_token, and verify every form post.</li>
<li>insert CSRF token in the response header, and need users to send back it with the post data.</li>
<li>always verify the referer header<br><img src="/media/web-security-owasp-project-csrf-threat-and-solutions-31-638.jpg" alt="web-security-owasp-project-csrf-threat-and-solutions-31-638"></li>
</ol>
<h3 id="SQL-Injection"><a href="#SQL-Injection" class="headerlink" title="SQL Injection"></a>SQL Injection</h3>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/08/websphere-sso-how-to/" itemprop="url">
                  WebSphere SSO how-to
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-05-08T13:19:49+08:00" content="2015-05-08">
              2015-05-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/SSO/" itemprop="url" rel="index">
                    <span itemprop="name">SSO</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/08/websphere-sso-how-to/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/05/08/websphere-sso-how-to/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="SSO定义"><a href="#SSO定义" class="headerlink" title="SSO定义"></a><strong>SSO定义</strong></h3><p>单点登录的英文名称为Single Sign-On，简写为SSO。在用户有权限访问的多个系统间，只要用户在其中一个系统做过认证(Authentication)后，就不用再次做认证即可以访问其他系统。</p>
<p>IBM对SSO有一个形象的解释：“单点登录、全网漫游”。</p>
<h4 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a><strong>实现原理</strong></h4><p>目前主流SSO的实现方案中实现机制不尽相同，大体分为Cookie机制和Session机制两大类。</p>
<h5 id="基于Session的机制"><a href="#基于Session的机制" class="headerlink" title="基于Session的机制"></a><strong>基于Session的机制</strong></h5><p>WebLogic通过Session共享认证信息。Session是一种服务器端机制，当客户端访问服务器时，服务器为客户端创建一个唯一的SessionID，以使在整个交互过程中始终保持状态，而交互的信息则可由应用自行指定，因此用Session方式实现SSO，不能在多个浏览器之间实现单点登录，但却可以跨域。</p>
<h5 id="基于Cookie的机制"><a href="#基于Cookie的机制" class="headerlink" title="基于Cookie的机制"></a><strong>基于Cookie的机制</strong></h5><p>WebSphere通过Cookie记录认证信息。Cookie是一种客户端机制，它存储的内容主要包括: 名字、值、过期时间、路径和域，路径与域合在一起就构成了Cookie的作用范围，因此用Cookie方式可实现SSO，但域名必须相同。目前大部分SSO产品采用的是Cookie机制，WAS、CAS也是如此。</p>
<p>注意，这种Cookie机制要求实现单点登录的应用，其域名必须是相同的。例如：a.bankcomm.com, b.bankcomm.com就可以经过配置后实现SSO。</p>
<h3 id="WAS-SSO机制介绍"><a href="#WAS-SSO机制介绍" class="headerlink" title="WAS SSO机制介绍"></a><strong>WAS SSO机制介绍</strong></h3><h4 id="WAS-SSO机制原理"><a href="#WAS-SSO机制原理" class="headerlink" title="WAS SSO机制原理"></a><strong>WAS SSO机制原理</strong></h4><p>WAS使用Cookie实现单点登录的原理图如图4所示。</p>
<p><img src="/media/sso-1.jpg" alt="sso-1"></p>
<p>图 4  使用Cookie实现单点登录的原理图</p>
<ul>
<li>某个应用程序首先要发起第1次认证。第一次访问应用程序时会显示登录页面。</li>
<li>用户在登录页面中，输入用户名和密码。</li>
<li>然后应用服务器会对用户名和密码进行认证。认证本身并不是应用服务器的功能，因此，通常会引入某种认证机制。认证机制可以有很多种，例如自己写一个认证程序，或者使用一些标准的认证方法，例如LDAP或者数据库等等。在大多数情况下，会使用LDAP进行认证。这是因为LDAP在处理用户登录方面，有很多独特的优势。</li>
<li>认证通过之后，页面重定向，回到Web应用。Web应用此时就完成了成功的登录。</li>
<li>然后应用服务器会在客户端创建一个Cookie，Cookie里面保存了LTPA令牌。Cookie是在用户的客户端，而不是服务端创建一个Cookie。这个Cookie是一个加密的Cookie，其中保存了用户登录的信息。</li>
<li>如果用户此时希望进入其他Web应用程序，此时WAS不再要求用户输入用户名和密码，而是首先自动寻找Cookie，根据Cookie中保存的信息，进行登录。登录之后，WAS重定向回到用户的应用程序。<br>这样，就不再需要用户继续输入用户名和密码，从而实现了单点登录。</li>
</ul>
<p>这种单点登录体系中，并没有通过http进行密码的传递（但是有用户名的传递），因此是十分安全的。</p>
<h5 id="LDAP简介"><a href="#LDAP简介" class="headerlink" title="LDAP简介"></a><strong>LDAP简介</strong></h5><p>LDAP是英文“Lightweight Directory Access Protocol”的简称，中文翻译为轻量级目录访问协议。它是一种因特网上的访问协议，主要用于从服务器上检索信息。</p>
<p>LDAP服务器用来保存信息，中文有时候也称为目录服务。数据库使用“表”来储存数据，可以把一个数据库想象为日常生活中的“表格”。而LDAP用“树”来存储数据，可以把它想象为日常生活中的“电话号码簿页”，或者干脆把LDAP想象为大家常用的文件系统，就是由文件夹和文件组成的那种树形结构。</p>
<p>由于LDAP的结构方式不同，因此LDAP有一个很特殊的特性，就是查询数据的速度特别快，但是写数据的速度较慢。LDAP的另一个特性就是比较适合于按照层次组织信息，例如企业的组织结构等。</p>
<p>由于LDAP的查询速度比数据库快，因此经常用于诸如地址簿、用户帐号存储、组织结构信息、域名解析系统等需要大量查询的领域。</p>
<p>首先，我们可以很清楚地看到，LDAP是按照树形目录进行组织的。</p>
<p>假设公司的域名是macromedia.com，则LDAP首先使用域名作为整个树的根，并且用dc=com，dc=macromedia这样的标记来进行标注。dc的意思指“Domain Component”。LDAP中以后会大量使用这些令人费解的缩写。</p>
<p>假设某天macromedia.com这个公司和apple.com这个公司合并，按照LDAP的树形结构，只不过多了一个分叉，而不会导致整棵树需要重新组织，这就是LDAP的好处之一。</p>
<p>dc节点的后面，就是ou节点。ou是Organizational Unit的缩写，可以把ou想象为文件夹，它是用来容纳其他节点的。ou可以对应部门、组或者任何要包含其他节点的东西。</p>
<p>ou下面的节点，可以是另一个ou，也可以是cn节点。cn是“Common Name”的缩写，它是树叶节点，可以把它对比为文件系统中的文件。cn节点通常用来存储用户的信息，例如某个用户的地址等。</p>
<p>这样，各个节点按照树形组织起来，就变成了图5的样子。</p>
<p><img src="/media/sso-2.jpg" alt="sso-2"></p>
<p>图 5  LDAP结构示意图</p>
<h5 id="LTPA简介"><a href="#LTPA简介" class="headerlink" title="LTPA简介"></a><strong>LTPA简介</strong></h5><p>LTPA(Lightweight Third Party Authentication)技术是IBM的标准。当某用户访问某WebSphere URL时,系统会提示他输入用户名和口令进行登录。这时用户可以输入他的唯一标识符,通过验证后,Web服务器将把该用户的Web 浏览器中显示的Web 站点内容发送回来。在后台,WebSphere入口网站服务器将会建立包含已鉴别使用者认证的单点登录Cookie,并且会一直发送该cookie，而浏览器通常的默认设置是允许接收cookie的,因此用户的浏览器将保存这个cookie。 LTPA cookie是临时的,只在浏览器内存中存留,用户如果关闭浏览器,cookie就会被永久删除。LTPA cookie的特点如下：</p>
<p>(1)LTPA cookie是一种典型的浏览器cookie,它保存的信息表示该用户已经进行了登录。所有的浏览器cookies都有名称等标准属性。LTPA cookie特有的名称是LtpaToken。当配置 SSO时,在配置实用工具中,通常将LTPA cookie称为SSO LTPA“令牌”。LTPA cookie有一个被编码值,隐藏起cookie中包含的重要信息并且通过Internet传输。</p>
<p>(2)LTPA cookie 具有典型的浏览器cookie的相关域的信息，LTPA的实现依赖于具有域信息的浏览器cookies，因此，通常SSO环境必须部署到单一DNS域中,即每台服务器都在同一DNS域中。</p>
<p>(3)在用户已经登录并且该用户的浏览器接收到 LTPA cookie以后,在HTTP通信中不再需要进行特定的配置,浏览器运行的标准方法就是浏览器将自动发送该cookie。浏览器不断地向任何正确的DNS域中的URL目标发送HTTP请求，通过这种途径不断地向外发送LPTA cookie。当SSO服务接收到HTTP请求并且发现请求中包含了LTPA cookie时,服务器将验证cookie，随即可知道该cookie属于哪一位已经登录的用户，服务器就可以允许这个用户对这台服务器进行适当的访问。浏览器的任务就是确定在什么时候应该随同HTTP通信一起发出LTPA cookie。当用户浏览到一个不在同一DNS域中的URL时, 因为该cookie不适用于这个新的DNS域,浏览器则不会发送 LTPA cookie,新的DNS目标的接收服务器就不知道用户是谁,这时会提示用户输入他的用户名和口令。</p>
<p>(4)LTPA cookie是安全的,因为服务器在创建它时，使用一组加密密钥进行了安全加密。加密密钥用于对cookie进行编码,编码后的cookie传送到用户浏览器,而浏览器只对有加密密钥的cookie进行解码和验证cookie的完整性,并随时检测cookie是否被篡改过。在SSO环境中的所有服务器必须共享同一个加密密钥。当SSO服务器接收到HTTP请求并发现其中包含LTPA cookie时,就使用它共享的加密密钥副本验证cookie,这时有效的cookie信息就使服务器能够识别出登录的用户。</p>
<p>SSO服务器使用的安全加密确保了没有任何伪造cookie的机会。没有加密密钥,其他非法 的cookie不会通过验证,伪造的cookie将被忽略。因此，SSO服务器不会被入侵。</p>
<p>在WebSphere Portal环境中,LTPA加密密钥通常在配置SSO时由WebSphere 创建。管理员可以将密钥导出到文件中,然后转移该文件到其他的SSO服务器（例如Domino）,在那里导入密钥。系统的管理维护人员应该非常小心地处理密钥文件,把所有的副本保护好。</p>
<h5 id="LTPA生成机制"><a href="#LTPA生成机制" class="headerlink" title="LTPA生成机制"></a><strong>LTPA生成机制</strong></h5><p>LTPA由以下部分组成：</p>
<ul>
<li>LTPA token 版本（4字节）</li>
<li>创建时间（8字节）</li>
<li>过期时间（8字节）</li>
<li>用户名（可变长度）</li>
<li>LTPA 密钥（20字节）</li>
<li>接下来分别说明各部分的具体内容：</li>
<li>LTPA token 版本，例如0×0001</li>
<li>创建时间和过期时间为以十六进制方式表示的 Unix time，例如 2009-04-09 13:52:42 (GMT +8) = 1239256362 = 49DD8D2A。过期时间为 创建时间 + SSO 配置文档的过期时间（LTPA_TokenExpiration域）</li>
<li>用户名为 Names 中用户文档的 FullName 域值</li>
<li>Domino LTPA 密钥通过 Base64编码后，保存在 SSO 配置文档的 LTPA_Secret 域中。<br><img src="/media/sso-3.jpg" alt="sso-3"></li>
</ul>
<p>图 6  LTPA结构示意图</p>
<p>在这里当然不能将密钥直接发送给浏览器，所以将上述部分合并起来（如上图），计算 SHA-1 校验和。</p>
<p><img src="/media/sso-4.jpg" alt="sso-4"></p>
<p>图 7  LTPA 密钥Base64编码图</p>
<p>然后用 SHA-1 校验和替换掉 LTPA 密钥，最后再将内容通过 Base64 编码，形成最终的LTPA Token发送给浏览器（如上图）。这样如果 cookie 中的任何内容被修改，校验和就不对了，达到了防篡改的效果。</p>
<h5 id="LTPA验证机制"><a href="#LTPA验证机制" class="headerlink" title="LTPA验证机制"></a><strong>LTPA验证机制</strong></h5><p>WAS根据事先导入的密钥KEY文件，解密LTPA Token内容，验证LTPA是否有效，并判断该LTPA是否超时。</p>
<p>如果LTPA验证通过，将获取LTPA中的用户信息，并再次与LDAP服务器进行验证该用户的有效性。</p>
<h4 id="自定义认证实现方式"><a href="#自定义认证实现方式" class="headerlink" title="自定义认证实现方式"></a><strong>自定义认证实现方式</strong></h4><h5 id="实现原理-1"><a href="#实现原理-1" class="headerlink" title="实现原理"></a><strong>实现原理</strong></h5><p><img src="/media/sso-5.jpg" alt="sso-5"></p>
<p>自定义认证可以通过WAS中使用“独立定制注册表”方式实现认证。</p>
<p>通过在WAS控制台中指定实现了 com.ibm.websphere.security 包中的 UserRegistry 接口的定制注册表（需要开发自定义实现类），但要求用户自定义实现类必须实现com.ibm.websphere.security.UserRegistry的接口。</p>
<p>基于这个原理，我们可以自己编写一个java类，在接口实现中连接LDAP进行认证（可根据需要访问LDAP业务密码等信息），然后WAS再按照原先方式生成LTPA。</p>
<h5 id="配置方式"><a href="#配置方式" class="headerlink" title="配置方式"></a><strong>配置方式</strong></h5><h6 id="配置使用“独立定制注册表”"><a href="#配置使用“独立定制注册表”" class="headerlink" title="配置使用“独立定制注册表”"></a><strong>配置使用“独立定制注册表”</strong></h6><p><img src="/media/sso-6.jpg" alt="sso-6"></p>
<h6 id="配置“独立定制注册表”使用的“定制注册表类名”等信息"><a href="#配置“独立定制注册表”使用的“定制注册表类名”等信息" class="headerlink" title="配置“独立定制注册表”使用的“定制注册表类名”等信息"></a><strong>配置“独立定制注册表”使用的“定制注册表类名”等信息</strong></h6><p><img src="/media/sso-7.jpg" alt="sso-7"></p>
<h6 id="与WAS自带LDAP方式比较"><a href="#与WAS自带LDAP方式比较" class="headerlink" title="与WAS自带LDAP方式比较"></a><strong>与WAS自带LDAP方式比较</strong></h6><p>&nbsp;</p>
<p><img src="/media/284e6e10c9f9.jpg" alt=""></p>
<h4 id="配置方式-1"><a href="#配置方式-1" class="headerlink" title="配置方式"></a><strong>配置方式</strong></h4><h5 id="各业务系统端环境配置"><a href="#各业务系统端环境配置" class="headerlink" title="各业务系统端环境配置"></a><strong>各业务系统端环境配置</strong></h5><h6 id="修改web-xml"><a href="#修改web-xml" class="headerlink" title="修改web.xml"></a><strong>修改web.xml</strong></h6><p>设置应用端的web.xml，使得业务平台可以通过SSO访问资源，下例中红色部分就配置了允许访问的资源。<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;security-constraint&amp;gt;</div><div class="line">    &amp;lt;web-resource-collection&amp;gt;</div><div class="line">        &amp;lt;web-resource-name&amp;gt;sso_GUIP&amp;lt;/web-resource-name&amp;gt;</div><div class="line">        &amp;lt;url-pattern&amp;gt;/abf_comm/default4portal.jsp&amp;lt;/url-pattern&amp;gt;</div><div class="line">        &amp;lt;url-pattern&amp;gt;/abf_comm/main.jsp&amp;lt;/url-pattern&amp;gt;</div><div class="line">        &amp;lt;url-pattern&amp;gt;/abf_comm/<span class="keyword">default</span>.jsp&amp;lt;/url-pattern&amp;gt;</div><div class="line">        &amp;lt;url-pattern&amp;gt;/common/fromITC.jsp&amp;lt;/url-pattern&amp;gt;</div><div class="line">        &amp;lt;url-pattern&amp;gt;/itc_agent/agentsync/export.jsp&amp;lt;/url-pattern&amp;gt;</div><div class="line">    &amp;lt;/web-resource-collection&amp;gt;</div><div class="line">    &amp;lt;auth-constraint&amp;gt;</div><div class="line">        &amp;lt;role-name&amp;gt;AllAuthUser&amp;lt;/role-name&amp;gt;</div><div class="line">    &amp;lt;/auth-constraint&amp;gt;</div><div class="line">    &amp;lt;user-data-constraint&amp;gt;</div><div class="line">        &amp;lt;transport-guarantee&amp;gt;NONE&amp;lt;/transport-guarantee&amp;gt;</div><div class="line">    &amp;lt;/user-data-constraint&amp;gt;</div><div class="line">&amp;lt;/security-constraint&amp;gt;</div></pre></td></tr></table></figure></p>
<h5 id="业务平台端环境配置"><a href="#业务平台端环境配置" class="headerlink" title="业务平台端环境配置"></a><strong>业务平台端环境配置</strong></h5><h6 id="修改web-xml-1"><a href="#修改web-xml-1" class="headerlink" title="修改web.xml"></a><strong>修改web.xml</strong></h6><p>需要在web.xml安全认证配置部分中增加用户登录的URL，红色部分需要根据应用修改，修改为允许访问的资源<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;security-constraint&amp;gt;</div><div class="line">    &amp;lt;web-resource-collection&amp;gt;</div><div class="line">        &amp;lt;web-resource-name&amp;gt;sso_EUIF&amp;lt;/web-resource-name&amp;gt;</div><div class="line">        &amp;lt;url-pattern&amp;gt;/abf_comm/default4portal.jsp&amp;lt;/url-pattern&amp;gt;</div><div class="line">    &amp;lt;/web-resource-collection&amp;gt;</div><div class="line">    &amp;lt;auth-constraint&amp;gt;</div><div class="line">        &amp;lt;role-name&amp;gt;AllAuthUser&amp;lt;/role-name&amp;gt;</div><div class="line">    &amp;lt;/auth-constraint&amp;gt;</div><div class="line">    &amp;lt;user-data-constraint&amp;gt;</div><div class="line">        &amp;lt;transport-guarantee&amp;gt;NONE&amp;lt;/transport-guarantee&amp;gt;</div><div class="line">    &amp;lt;/user-data-constraint&amp;gt;</div><div class="line">&amp;lt;/security-constraint&amp;gt;</div><div class="line">&amp;lt;login-config&amp;gt;</div><div class="line">    &amp;lt;auth-method&amp;gt;FORM&amp;lt;/auth-method&amp;gt;</div><div class="line">    &amp;lt;form-login-config&amp;gt;</div><div class="line">        &amp;lt;form-login-page&amp;gt;/abf_comm/login4portal.jsp&amp;lt;/form-login-page&amp;gt;</div><div class="line">        &amp;lt;form-error-page&amp;gt;/abf_comm/loginfailed4portal.jsp&amp;lt;/form-error-page&amp;gt;</div><div class="line">    &amp;lt;/form-login-config&amp;gt;</div><div class="line">&amp;lt;/login-config&amp;gt;</div><div class="line">&amp;lt;security-role&amp;gt;</div><div class="line">    &amp;lt;role-name&amp;gt;AllAuthUser&amp;lt;/role-name&amp;gt;</div><div class="line">&amp;lt;/security-role&amp;gt;</div></pre></td></tr></table></figure></p>
<p>修改welcome页面配置，这页面是登陆成功后系统指向的页面。<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;welcome-file-list&amp;gt;</div><div class="line">    &amp;lt;welcome-file&amp;gt;/abf_comm/default4portal.jsp&amp;lt;/welcome-file&amp;gt;</div><div class="line">&amp;lt;/welcome-file-list&amp;gt;</div></pre></td></tr></table></figure></p>
<p><strong>重启应用服务器</strong></p>
<p>正确设置上述配置后，需要重新启动应用服务器。</p>
<h4 id="WAS环境配置（将根据WAS7版本进行更新）"><a href="#WAS环境配置（将根据WAS7版本进行更新）" class="headerlink" title="WAS环境配置（将根据WAS7版本进行更新）"></a><strong>WAS环境配置（将根据WAS7版本进行更新）</strong></h4><h5 id="设置WAS的LTPA协议"><a href="#设置WAS的LTPA协议" class="headerlink" title="设置WAS的LTPA协议"></a><strong>设置WAS的LTPA协议</strong></h5><p>进入WAS控制台，URL是<a href="http://IP:consoleport/admin,输入安装时设置的用户名密码。" target="_blank" rel="external">http://IP:consoleport/admin,输入安装时设置的用户名密码。</a></p>
<p>&nbsp;</p>
<h6 id="设置安全角色到用户-组映射"><a href="#设置安全角色到用户-组映射" class="headerlink" title="设置安全角色到用户/组映射"></a><strong>设置安全角色到用户/组映射</strong></h6><p><img src="/media/sso-8.jpg" alt="sso-8"></p>
<p><img src="/media/sso-9.jpg" alt="sso-9"></p>
<h6 id="点击进入“安全管理、应用程序和基础结构”，设置安全性"><a href="#点击进入“安全管理、应用程序和基础结构”，设置安全性" class="headerlink" title="点击进入“安全管理、应用程序和基础结构”，设置安全性"></a><strong>点击进入“安全管理、应用程序和基础结构”，设置安全性</strong></h6><p><img src="/media/sso-10.jpg" alt="sso-10"></p>
<h6 id="设置LDAP连接"><a href="#设置LDAP连接" class="headerlink" title="设置LDAP连接"></a><strong>设置LDAP连接</strong></h6><p><img src="/media/sso-11.jpg" alt="sso-11"></p>
<h6 id="设置域名"><a href="#设置域名" class="headerlink" title="设置域名"></a><strong>设置域名</strong></h6><p><img src="/media/sso-12.jpg" alt="sso-12"></p>
<h6 id="需要导入密钥文件，密钥文件可以从其他的was的控制台导出。"><a href="#需要导入密钥文件，密钥文件可以从其他的was的控制台导出。" class="headerlink" title="需要导入密钥文件，密钥文件可以从其他的was的控制台导出。"></a><strong>需要导入密钥文件，密钥文件可以从其他的was的控制台导出。</strong></h6><p><img src="/media/sso-13.jpg" alt="sso-13"></p>
<h6 id="保存配置"><a href="#保存配置" class="headerlink" title="保存配置"></a><strong>保存配置</strong></h6><p><img src="/media/sso-14.jpg" alt="sso-14"></p>
<p>注意：任何修改都需要保存到主配置才能生效。</p>
<h5 id="设置WAS的Session的cookie值"><a href="#设置WAS的Session的cookie值" class="headerlink" title="设置WAS的Session的cookie值"></a><strong>设置WAS的Session的cookie值</strong></h5><h6 id="不同应用系统配置唯一Cookie值，防止多应用集成session丢失"><a href="#不同应用系统配置唯一Cookie值，防止多应用集成session丢失" class="headerlink" title="不同应用系统配置唯一Cookie值，防止多应用集成session丢失"></a><strong>不同应用系统配置唯一Cookie值，防止多应用集成session丢失</strong></h6><p><img src="/media/sso-15.jpg" alt="sso-15"></p>
<h5 id="重启应用服务器"><a href="#重启应用服务器" class="headerlink" title="重启应用服务器"></a><strong>重启应用服务器</strong></h5><p>进入应用服务器所在目录，重新启动服务器。</p>
<p>以WAS为例，需要输入如下命令：</p>
<p>#cd /epost/was61/IBM/WebSphere/AppServer/profiles/[profileName]/bin</p>
<p>停止server</p>
<p>./stopServer.sh server1 -username wpsadmin -password password</p>
<p>启动server</p>
<p>./startServer.sh server1</p>
<h4 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a><strong>使用方式</strong></h4><h5 id="要求及条件"><a href="#要求及条件" class="headerlink" title="要求及条件"></a><strong>要求及条件</strong></h5><ul>
<li>所有系统的底层平台都是采用WebSphere</li>
<li>系统本身的认证交给WebSphere底层平台来做</li>
<li>所有系统采用同一个LDAP或数据一致的LDAP来做认证</li>
<li>所有服务器必须在同一个网络域中</li>
<li>用全域名方式访问</li>
<li>所有服务器必须保证时间一致</li>
</ul>
<h5 id="场景描述"><a href="#场景描述" class="headerlink" title="场景描述"></a><strong>场景描述</strong></h5><p><img src="/media/sso-16.jpg" alt="sso-16"></p>
<p>1) 用户成功登录新一代UI；</p>
<p>2) 在用户的浏览器cookie值中保存WAS生成SSO加密信息(LTPA令牌)；</p>
<p>3) 用户通过新一代UI系统访问其它系统资源；</p>
<p>4) 由于浏览器cookie中保存SSO加密信息，且不过期，所以用户不需要登录，而由各个系统验证LTPA令牌达到访问业务系统资源的目的。</p>
<h5 id="安全性分析"><a href="#安全性分析" class="headerlink" title="安全性分析"></a><strong>安全性分析</strong></h5><h5 id="优势"><a href="#优势" class="headerlink" title="优势"></a><strong>优势</strong></h5><ul>
<li>WAS提供的SSO解决方案中只传递用户名，不传递密码，保证了密码安全。</li>
<li>LTPA经过加密处理，不会被暴露在外部；即使token被截取，如果没有密钥和口令，也无法获取到其中的内容。</li>
<li>最新版的WAS Ltpa使用先进的加密算法：Random salt；</li>
<li>强 AES 密码；</li>
<li>对数据签名；</li>
<li>对数据加密</li>
</ul>
<h5 id="存在的风险"><a href="#存在的风险" class="headerlink" title="存在的风险"></a>存在的风险</h5><p>WAS SSO机制安全性依赖于密钥（KEY）文件、密钥口令以及有权限读取LDAP信息的帐号和密码。如果这三项全部被人获得，其即可仿造一个在WAS信任域中的系统，并仿造用户信息。</p>
<p>需要做好密钥文件及口令的保管工作，并做好LDAP访问权限的管理，可预防此类风险的发生。</p>
<p>另外，此风险在实际操作过程中难度较大，不容易出现。</p>
<h3 id="附录一：常见SSO方案介绍"><a href="#附录一：常见SSO方案介绍" class="headerlink" title="附录一：常见SSO方案介绍"></a><strong>附录一：常见SSO方案介绍</strong></h3><h4 id="使用统一单点登录机制"><a href="#使用统一单点登录机制" class="headerlink" title="使用统一单点登录机制"></a><strong>使用统一单点登录机制</strong></h4><p>前提是所有系统所使用的底层平台必须是同一家公司的，而且系统本身的认证(Authentication)会交给底层平台来做。</p>
<p>WAS的SSO方案就属于这样类型，WAS和Domino等都是IBM的产品，都基于统一的SSO机制，所以它们可以直接支持统一单点登录机制。</p>
<p><img src="/media/sso-17.jpg" alt="sso-17"></p>
<p>图 1  使用统一单点登录机制方案图</p>
<h4 id="使用第三方系统来做单点登录"><a href="#使用第三方系统来做单点登录" class="headerlink" title="使用第三方系统来做单点登录"></a><strong>使用第三方系统来做单点登录</strong></h4><p>例如IBM Tivoli Access Manager或者Netegrity iteminder。</p>
<p><img src="/media/sso-18.jpg" alt="sso-18"></p>
<p>图 2  使用第三方系统来做单点登录方案图</p>
<h4 id="利用用户名-密码映射-maping-的方式"><a href="#利用用户名-密码映射-maping-的方式" class="headerlink" title="利用用户名/密码映射(maping)的方式"></a><strong>利用用户名/密码映射(maping)的方式</strong></h4><p>如果有系统提供映射方式的单点登录功能，例如WebSphere Portal Server。</p>
<p><img src="/media/sso-19.jpg" alt="sso-19"></p>
<p>图 3  利用用户名/密码映射(mappiing)的方式方案图</p>
<h4 id="其他方式"><a href="#其他方式" class="headerlink" title="其他方式"></a><strong>其他方式</strong></h4><p>各个系统约定SSO规则，如：各系统判断cookie里面是否存在用户信息以及加密串，从而实现SSO登录。</p>
<h3 id="附录二：单点登录产品介绍"><a href="#附录二：单点登录产品介绍" class="headerlink" title="附录二：单点登录产品介绍"></a><strong>附录二：单点登录产品介绍</strong></h3><h4 id="商业SSO软件"><a href="#商业SSO软件" class="headerlink" title="商业SSO软件"></a><strong>商业SSO软件</strong></h4><p>1) 专门的SSO商业软件</p>
<p>主要有：Netgrity的Siteminder，已经被CA收购。Novell 公司的iChain。RSA公司的ClearTrust等。</p>
<p>2) 门户产品供应商自己的SSO产品，</p>
<p>如： IBM 的Tivoli Access Manager，WAS自带的SSO解决方案，BEA的WLES，Sun 公司的identity Server，Oracle公司的OID等。</p>
<p>上述商业软件一般适用于客户对SSO的需求很高，并且企业内部采用WAS、Domino、SAP、Sieble等系统比较多的情况下。单点登录产品通常需要在应用软件中增加代理模块，而商业SSO产品主要针对大型软件制作了代码模块。</p>
<h4 id="开源SSO软件"><a href="#开源SSO软件" class="headerlink" title="开源SSO软件"></a><strong>开源SSO软件</strong></h4><p>1) Opensso</p>
<p> <a href="https://opensso.dev.java.net/" target="_blank" rel="external">https://opensso.dev.java.net/</a></p>
<p> OpenSSO基于Sun Java System Access Manager，是Sun公司支持的一个开源的SSO项目。</p>
<p> OpenSSO体系结构设计合理，功能比较强大。然而缺点是客户端支持不够广泛，似乎只是对基于J2EE的应用支持的比较好。</p>
<p>2) josso</p>
<p> <a href="http://www.josso.org/" target="_blank" rel="external">http://www.josso.org/</a></p>
<p> 这是另一个Java写的单点登录产品，通常认为比OpenSSO更成熟一些。</p>
<p> JOSSO支持的客户端包括Java，PHP和ASP。</p>
<p>3) CAS</p>
<p> <a href="http://www.ja-sig.org/products/cas/" target="_blank" rel="external">http://www.ja-sig.org/products/cas/</a></p>
<p> 这是耶鲁大学开发的单点登录产品。</p>
<p> CAS的优点很多，例如设计理念先进、体系结构合理、配置简单、客户端支持广泛、技术成熟等等。以后我们还要仔细介绍。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/08/unified-identity-access-control-system/" itemprop="url">
                  Unified Identity & Access Control system
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-05-08T13:14:50+08:00" content="2015-05-08">
              2015-05-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Project-Architecture/" itemprop="url" rel="index">
                    <span itemprop="name">Project Architecture</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/08/unified-identity-access-control-system/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/05/08/unified-identity-access-control-system/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>The target of this system is to build a unified user registry, enterprise organization hierarchy tree, a centralized point for internal user logon and authentication, a flexible Role-Based access control model and an integrated SSO strategy for all other in-house application.</p>
<p>This is the big picture:</p>
<p><img src="/media/euac.jpg" alt="euac"></p>
<h3 id="user-registry-and-organization-tree"><a href="#user-registry-and-organization-tree" class="headerlink" title="user registry and organization tree"></a>user registry and organization tree</h3><p>We build a central repository for employee information except their passwords(these are stored in LDAP for convenient look-up and security). These user information includes all kinds of static attributes related to an employee, like the positions, status, department…a long list.</p>
<p>We also sort out a whole organization tree, which represent the hierarchy relations between a department and another, like upper level or subordinate. These relations are especially useful for some application like workflow which exists very commonly in some office tasks.</p>
<p>So we regard the user information and organization is the pre-condition for enterprise integration and process optimization. Yes, it’s the foundation and infrastructure for enterprise applications.</p>
<p>We maintain these information in one central place to ensure its integrity. But we share these data and synchronized them with some applications. These applications own their local copy of these information and do querying locally for performance.</p>
<h3 id="identity-autentication"><a href="#identity-autentication" class="headerlink" title="identity / autentication"></a>identity / autentication</h3><p>Because we store the user name and password in LDAP. So the identification mainly depends on this service.</p>
<p>Keeping user name and password in LDAP is because we think the security and look-up performance concern. A dedicated server for the authentication makes things simple. And this is also the traditional way to implement identification.</p>
<h3 id="RBAC-Role-Based-Access-Control"><a href="#RBAC-Role-Based-Access-Control" class="headerlink" title="RBAC(Role-Based Access Control)"></a>RBAC(Role-Based Access Control)</h3><p>Another important thing for a big enterprise is the access control. If we distribute the access control into the applications themselves, even hard-code these logic instead of configuring them in a declarative way, that will be difficult to mange and there are some risks for security issues. After all, we cannot expect all our applications to make a enough emphasis on the access control problems.</p>
<p>So we implement a centralized access control model. We configure all kinds of application-specific function control in one shared place – the management console of our system, and in the development of these applications, the developers just need to apply these rules.</p>
<p>Basically, it’s according to the stable RBAC principal. We define:</p>
<p>1. a Role has many Functions. Functions represent the operations of user, basically you can think its a URL.</p>
<p>2. a User can have many Roles and a Role can have many users.</p>
<p>3. We also define Menu for some function which is regards the entry point for some module. And the menu has a hierarchy and can form a menu tree. This is useful to organization the functions of the application.</p>
<p>All these relations are stored in one place and can be share to specified application. Internal we support multiple applications, different applications configure their own profile and synchronized their own part of data.</p>
<h3 id="SSO"><a href="#SSO" class="headerlink" title="SSO"></a>SSO</h3><p>We use the cookie-based WebSphere SSO solution. Because websphere application server is the standard application server in my previous company and nearly every J2EE web application uses it.</p>
<p>The following is the basic implementation.</p>
<p><a href="/media/sso.jpg"><img src="/media/sso.jpg" alt="sso"></a></p>
<p>&nbsp;</p>
<p>You can see from the above figure, we use LDAP for an user registry. And any application needing SSO must do some configuration in their websphere management console to get the ability of SSO.</p>
<p>Obviously, this solution has some limitations:</p>
<ol>
<li>all the application must be under the same domain and accessed by domain name.</li>
<li>all the backend application server must be websphere app server.</li>
<li>use the shared user registry is a precondition.</li>
<li>time must be synchronized so that the timeout of the logon session can be determined</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/07/jndi-how-to/" itemprop="url">
                  JNDI how-to
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-05-07T10:09:04+08:00" content="2015-05-07">
              2015-05-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JNDI-LDAP/" itemprop="url" rel="index">
                    <span itemprop="name">JNDI, LDAP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/07/jndi-how-to/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/05/07/jndi-how-to/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>JNDI - Java Naming and Directory Interface</p>
<h3 id="Object-storing"><a href="#Object-storing" class="headerlink" title="Object storing"></a>Object storing</h3><p>There are several ways an object satisfies the condition to be bound to a JDNI context.</p>
<ul>
<li>serializable objects: <code>Serializable</code></li>
<li>referenceable objects and references: <code>Reference, ObjectFactory, Referenceable, RefAddr</code></li>
<li>objects with attributes: <code>DirContext</code></li>
<li>remote objects: <code>Remote</code><br>&nbsp;</li>
</ul>
<p>Let’s look at the real life example: how we bind DataSource and UserTransaction to a JNDI context</p>
<h4 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> com.mysql.jdbc.jdbc2.optional;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MysqlDataSource</span> <span class="keyword">extends</span> <span class="title">ConnectionPropertiesImpl</span> <span class="keyword">implements</span> <span class="title">DataSource</span>, <span class="title">Referenceable</span>, <span class="title">Serializable</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//....</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Reference <span class="title">getReference</span><span class="params">()</span> <span class="keyword">throws</span> NamingException </span>&#123;</div><div class="line">        String factoryName = <span class="string">"com.mysql.jdbc.jdbc2.optional.MysqlDataSourceFactory"</span>;</div><div class="line">        Reference ref = <span class="keyword">new</span> Reference(<span class="keyword">this</span>.getClass().getName(), factoryName, (String)<span class="keyword">null</span>);</div><div class="line">        ref.add(<span class="keyword">new</span> StringRefAddr(<span class="string">"user"</span>, <span class="keyword">this</span>.getUser()));</div><div class="line">        ref.add(<span class="keyword">new</span> StringRefAddr(<span class="string">"password"</span>, <span class="keyword">this</span>.password));</div><div class="line">        ref.add(<span class="keyword">new</span> StringRefAddr(<span class="string">"serverName"</span>, <span class="keyword">this</span>.getServerName()));</div><div class="line">        ref.add(<span class="keyword">new</span> StringRefAddr(<span class="string">"port"</span>, <span class="string">""</span> + <span class="keyword">this</span>.getPort()));</div><div class="line">        ref.add(<span class="keyword">new</span> StringRefAddr(<span class="string">"databaseName"</span>, <span class="keyword">this</span>.getDatabaseName()));</div><div class="line">        ref.add(<span class="keyword">new</span> StringRefAddr(<span class="string">"url"</span>, <span class="keyword">this</span>.getUrl()));</div><div class="line">        ref.add(<span class="keyword">new</span> StringRefAddr(<span class="string">"explicitUrl"</span>, String.valueOf(<span class="keyword">this</span>.explicitUrl)));</div><div class="line"></div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            <span class="keyword">this</span>.storeToRef(ref);</div><div class="line">            <span class="keyword">return</span> ref;</div><div class="line">        &#125; <span class="keyword">catch</span> (SQLException var4) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NamingException(var4.getMessage());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//....</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Yes, it implements <code>Referenceable</code>, and defines an <code>ObjectFactory</code>: <code>com.mysql.jdbc.jdbc2.optional.MysqlDataSourceFactory</code></p>
<h4 id="H2"><a href="#H2" class="headerlink" title="H2"></a>H2</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> org.h2.jdbcx;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcDataSource</span> <span class="keyword">extends</span> <span class="title">TraceObject</span> <span class="keyword">implements</span> <span class="title">XADataSource</span>, <span class="title">DataSource</span>, <span class="title">ConnectionPoolDataSource</span>, <span class="title">Serializable</span>, <span class="title">Referenceable</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//....</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Reference <span class="title">getReference</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.debugCodeCall(<span class="string">"getReference"</span>);</div><div class="line">        String var1 = JdbcDataSourceFactory.class.getName();</div><div class="line">        Reference var2 = <span class="keyword">new</span> Reference(<span class="keyword">this</span>.getClass().getName(), var1, (String)<span class="keyword">null</span>);</div><div class="line">        var2.add(<span class="keyword">new</span> StringRefAddr(<span class="string">"url"</span>, <span class="keyword">this</span>.url));</div><div class="line">        var2.add(<span class="keyword">new</span> StringRefAddr(<span class="string">"user"</span>, <span class="keyword">this</span>.userName));</div><div class="line">        var2.add(<span class="keyword">new</span> StringRefAddr(<span class="string">"password"</span>, <span class="keyword">this</span>.convertToString(<span class="keyword">this</span>.passwordChars)));</div><div class="line">        var2.add(<span class="keyword">new</span> StringRefAddr(<span class="string">"loginTimeout"</span>, String.valueOf(<span class="keyword">this</span>.loginTimeout)));</div><div class="line">        var2.add(<span class="keyword">new</span> StringRefAddr(<span class="string">"description"</span>, <span class="keyword">this</span>.description));</div><div class="line">        <span class="keyword">return</span> var2;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//....</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>It also implements <code>Referenceable</code>, and defines an <code>ObjectFactory</code>: <code>org.h2.jdbcx.JdbcDataSourceFactory</code></p>
<h4 id="JBoss-JTA"><a href="#JBoss-JTA" class="headerlink" title="JBoss JTA"></a>JBoss JTA</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> com.arjuna.ats.internal.jta.transaction.arjunacore;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserTransactionImple</span> <span class="keyword">extends</span> <span class="title">BaseTransaction</span> <span class="keyword">implements</span> <span class="title">UserTransaction</span>, <span class="title">ObjectFactory</span> </span>&#123;</div><div class="line">    <span class="comment">//....</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>You can see, <code>UserTrancation</code> implmentation class <code>UserTransactionImple</code> doesn’t implement <code>Referenceable</code>, but actions as <code>ObjectFactory</code>.</p>
<p>Now, let’s look at the bind code:<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> com.arjuna.ats.jta.utils;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JNDIManager</span> </span>&#123;</div><div class="line">    <span class="comment">//....</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bindJTAUserTransactionImplementation</span><span class="params">(InitialContext initialContext)</span> <span class="keyword">throws</span> NamingException </span>&#123;</div><div class="line">        String utImplementation = getUserTransactionImplementationClassname();</div><div class="line">        Reference ref = <span class="keyword">new</span> Reference(utImplementation, utImplementation, (String)<span class="keyword">null</span>);</div><div class="line">        initialContext.rebind(getUserTransactionJNDIName(), ref);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//....</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Yes, JBoss JTA binds <code>UserTransaction</code> using Reference with its <code>ObjectFactory</code>. As said above, <code>UserTransactionImple</code> is both the bound target and the <code>ObjectFactory</code>.</p>
<h3 id="Object-binding"><a href="#Object-binding" class="headerlink" title="Object binding"></a>Object binding</h3><p>So once the object can be bound, the binding operation is simple.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">context.bind(<span class="string">"cn=favorite"</span>, fruit);</div></pre></td></tr></table></figure></p>
<h3 id="Object-lookup-list-search"><a href="#Object-lookup-list-search" class="headerlink" title="Object lookup / list / search"></a>Object lookup / list / search</h3><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">context.lookup(..)</div></pre></td></tr></table></figure>
<p>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/05/classloader/" itemprop="url">
                  ClassLoader
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-05-05T14:20:23+08:00" content="2015-05-05">
              2015-05-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JVM/" itemprop="url" rel="index">
                    <span itemprop="name">JVM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/05/classloader/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/05/05/classloader/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="class-loader"><a href="#class-loader" class="headerlink" title="class loader"></a>class loader</h3><h4 id="Delegation-Principal"><a href="#Delegation-Principal" class="headerlink" title="Delegation Principal"></a>Delegation Principal</h4><blockquote>
<p>Class loaders request their parent to load the class first before attempting to load it themselves.<br><img src="/media/classloader1.jpg" alt="classloader1">           <img src="/media/classloader2.jpg" alt="classloader2"></p>
</blockquote>
<h4 id="Visibility-Principal"><a href="#Visibility-Principal" class="headerlink" title="Visibility Principal"></a>Visibility Principal</h4><blockquote>
<p>Classes loaded by the parent class loaders have visibility into classes loaded by its children down the hierarchy, but the reverse is not true<br><img src="/media/classloader3.jpg" alt="classloader3"></p>
</blockquote>
<h4 id="Uniqueness-Principal"><a href="#Uniqueness-Principal" class="headerlink" title="Uniqueness Principal"></a>Uniqueness Principal</h4><blockquote>
<p>When a class loader loads a class, the child class loaders in the hierarchy will never reload the class again. Hence uniqueness is maintained.<br>&nbsp;</p>
</blockquote>
<p>Although this, you are easy to violate this by manually loading the class. Thus, in a classloader hierarchy, there exists two Class with the same qualified name but loaded by different classloaders.</p>
<p>Then if you cast them, a ClassCastException will be thrown.</p>
<p>&nbsp;</p>
<h3 id="class-loading-ways"><a href="#class-loading-ways" class="headerlink" title="class loading ways"></a>class loading ways</h3><ul>
<li>explicitly invoke new XXX()</li>
<li>load its subclass, then the parent class will be also loaded</li>
<li>dynamically load class: Class.forName(“com.ss.xx.XXX”)<br>&nbsp;</li>
</ul>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/28/html-5/" itemprop="url">
                  HTML 5
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-28T23:27:29+08:00" content="2015-04-28">
              2015-04-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/HTML5/" itemprop="url" rel="index">
                    <span itemprop="name">HTML5</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/28/html-5/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/28/html-5/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="new-elements"><a href="#new-elements" class="headerlink" title="new elements"></a>new elements</h3><h4 id="amp-lt-figure-amp-gt-and-lt-figcaption-amp-gt"><a href="#amp-lt-figure-amp-gt-and-lt-figcaption-amp-gt" class="headerlink" title="&amp;lt;figure&amp;gt; and &lt;figcaption&amp;gt;"></a><code>&amp;lt;figure&amp;gt;</code> and &lt;<code>figcaption&amp;gt;</code></h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;figure id=<span class="string">"fig1"</span>&amp;gt;</div><div class="line">    &amp;lt;figcaption&amp;gt;Fig.1 Screen Reader Support <span class="keyword">for</span> WAI-ARIA&amp;lt;/figcaption&amp;gt;</div><div class="line">    &amp;lt;img src=<span class="string">"http://img2.cache.netease.com/cnews/2015/4/28/201504281107026599c.jpg"</span> alt=<span class="string">"JAWS: Landmarks 1/1, Forms 4/5 … "</span>&amp;gt;</div><div class="line">&amp;lt;/figure&amp;gt;</div></pre></td></tr></table></figure>
<h4 id="amp-lt-mark-amp-gt"><a href="#amp-lt-mark-amp-gt" class="headerlink" title="&amp;lt;mark&amp;gt;"></a><code>&amp;lt;mark&amp;gt;</code></h4><p>This tag is very useful for the highlight of searching result.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;h1&amp;gt;Yes, You Can Use &amp;lt;mark&amp;gt;HTML5&amp;lt;/mark&amp;gt; Today!&amp;lt;/h1&amp;gt;</div></pre></td></tr></table></figure></p>
<h4 id="amp-lt-progress-amp-gt-and-lt-meter-amp-gt"><a href="#amp-lt-progress-amp-gt-and-lt-meter-amp-gt" class="headerlink" title="&amp;lt;progress&amp;gt; and &lt;meter&amp;gt;"></a><code>&amp;lt;progress&amp;gt;</code> and &lt;<code>meter&amp;gt;</code></h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;progress max=<span class="string">"100"</span> value=<span class="string">"0"</span>&amp;gt;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;meter value=<span class="string">"50"</span> min=<span class="string">"0"</span> max=<span class="string">"400"</span> low=<span class="string">"60"</span> high=<span class="string">"300"</span> title=<span class="string">"gigabytes"</span>&amp;gt;</div><div class="line">&amp;lt;meter value=<span class="string">"150"</span> min=<span class="string">"0"</span> max=<span class="string">"400"</span> low=<span class="string">"60"</span> high=<span class="string">"300"</span> title=<span class="string">"gigabytes"</span>&amp;gt;</div><div class="line">&amp;lt;meter value=<span class="string">"350"</span> min=<span class="string">"0"</span> max=<span class="string">"400"</span> low=<span class="string">"60"</span> high=<span class="string">"300"</span> title=<span class="string">"gigabytes"</span>&amp;gt;</div></pre></td></tr></table></figure>
<p>the low and high are the thresholds. When in the range, the color is green, otherwise the color is yellow.</p>
<h4 id="lt-time-gt"><a href="#lt-time-gt" class="headerlink" title="&lt;time&gt;"></a>&lt;time&gt;</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;time datetime=<span class="string">"2015-10-12"</span>&amp;gt;<span class="number">12</span> October of <span class="keyword">this</span> year&amp;lt;/time&amp;gt;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;!-- month --&amp;gt;</div><div class="line">&amp;lt;time&amp;gt;<span class="number">2015</span>-<span class="number">11</span>&amp;lt;/time&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;!-- date --&amp;gt;</div><div class="line">&amp;lt;time&amp;gt;<span class="number">2015</span>-<span class="number">11</span>-<span class="number">12</span>&amp;lt;/time&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;!-- yearless date --&amp;gt;</div><div class="line">&amp;lt;time&amp;gt;<span class="number">11</span>-<span class="number">12</span>&amp;lt;/time&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;!-- time --&amp;gt;</div><div class="line">&amp;lt;time&amp;gt;<span class="number">14</span>:<span class="number">54</span>:<span class="number">39</span>&amp;lt;/time&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;!-- floating date and time --&amp;gt;</div><div class="line">&amp;lt;time&amp;gt;<span class="number">2015</span>-<span class="number">11</span>-<span class="number">12</span>T14:<span class="number">54</span>:<span class="number">39</span>&amp;lt;/time&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;!-- time-zone offset --&amp;gt;</div><div class="line">&amp;lt;time&amp;gt;-<span class="number">0800</span>&amp;lt;/time&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;!-- global date and time --&amp;gt;</div><div class="line">&amp;lt;time&amp;gt;<span class="number">2015</span>-<span class="number">11</span>-<span class="number">12</span>T06:<span class="number">54</span>:<span class="number">39.929</span>-<span class="number">0800</span>&amp;lt;/time&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;!-- week --&amp;gt;</div><div class="line">&amp;lt;time&amp;gt;<span class="number">2015</span>-W46&amp;lt;/time&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;!-- duration --&amp;gt;</div><div class="line">&amp;lt;time&amp;gt;<span class="number">4</span>h <span class="number">18</span>m <span class="number">3</span>s&amp;lt;/time&amp;gt;</div></pre></td></tr></table></figure>
<h4 id="lt-dl-gt-lt-dt-gt-lt-dd-gt"><a href="#lt-dl-gt-lt-dt-gt-lt-dd-gt" class="headerlink" title="&lt;dl&gt; &lt;dt&gt; &lt;dd&gt;"></a>&lt;dl&gt; &lt;dt&gt; &lt;dd&gt;</h4><p>This is called “description lists” or “association lists.”<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;dl&amp;gt;</div><div class="line">  &amp;lt;dt&amp;gt;Selector:&amp;lt;/dt&amp;gt;</div><div class="line">  &amp;lt;dd&amp;gt;<span class="function">The <span class="title">element</span><span class="params">(s)</span> targeted.&amp;lt</span>;/dd&amp;gt;</div><div class="line">  &amp;lt;dt&amp;gt;Property:&amp;lt;/dd&amp;gt;</div><div class="line">  &amp;lt;dd&amp;gt;The feature used to add styling to the targeted element, defined before a colon.&amp;lt;/dd&amp;gt;</div><div class="line">  &amp;lt;dt&amp;gt;Value:&amp;lt;/dd&amp;gt;</div><div class="line">  &amp;lt;dd&amp;gt;The value given to the specified property, declared after the colon.&amp;lt;/dd&amp;gt;</div><div class="line">&amp;lt;/dl&amp;gt;</div></pre></td></tr></table></figure></p>
<h4 id="lt-details-gt"><a href="#lt-details-gt" class="headerlink" title="&lt;details&gt;"></a>&lt;details&gt;</h4><p>This tag is very useful to implement initially hidden “see more” .<br><figure class="highlight"><table><tr><td class="code"><pre><div class="line">&amp;lt;details&amp;gt;</div><div class="line">  &amp;lt;summary&amp;gt;Some Magazines of Note&amp;lt;/summary&amp;gt;</div><div class="line">  &amp;lt;ul&amp;gt;</div><div class="line">    &amp;lt;li&amp;gt;&amp;lt;cite&amp;gt;Bird Watcher's Digest&amp;lt;/cite&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">    &amp;lt;li&amp;gt;&amp;lt;cite&amp;gt;Rower's Weekly&amp;lt;/cite&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">    &amp;lt;li&amp;gt;&amp;lt;cite&amp;gt;Fishing Monthly&amp;lt;/cite&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">  &amp;lt;/ul&amp;gt;</div><div class="line">&amp;lt;/details&amp;gt;</div></pre></td></tr></table></figure></p>
<h4 id="lt-ol-reversed-start-”3”-gt"><a href="#lt-ol-reversed-start-”3”-gt" class="headerlink" title="&lt;ol reversed start=”3”&gt;"></a>&lt;ol reversed start=”3”&gt;</h4><figure class="highlight"><table><tr><td class="code"><pre><div class="line">&amp;lt;ol reversed&amp;gt;</div><div class="line">    &amp;lt;li&amp;gt;&amp;lt;cite&amp;gt;Bird Watcher's Digest&amp;lt;/cite&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">    &amp;lt;li&amp;gt;&amp;lt;cite&amp;gt;Rower's Weekly&amp;lt;/cite&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">    &amp;lt;li&amp;gt;&amp;lt;cite&amp;gt;Fishing Monthly&amp;lt;/cite&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">&amp;lt;/ol&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;ol start="4"&amp;gt;</div><div class="line">    &amp;lt;li&amp;gt;&amp;lt;cite&amp;gt;Bird Watcher's Digest&amp;lt;/cite&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">    &amp;lt;li&amp;gt;&amp;lt;cite&amp;gt;Rower's Weekly&amp;lt;/cite&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">    &amp;lt;li&amp;gt;&amp;lt;cite&amp;gt;Fishing Monthly&amp;lt;/cite&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">&amp;lt;/ol&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;ol start="4" reversed&amp;gt;</div><div class="line">    &amp;lt;li&amp;gt;&amp;lt;cite&amp;gt;Bird Watcher's Digest&amp;lt;/cite&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">    &amp;lt;li&amp;gt;&amp;lt;cite&amp;gt;Rower's Weekly&amp;lt;/cite&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">    &amp;lt;li&amp;gt;&amp;lt;cite&amp;gt;Fishing Monthly&amp;lt;/cite&amp;gt;&amp;lt;/li&amp;gt;</div><div class="line">&amp;lt;/ol&amp;gt;</div></pre></td></tr></table></figure>
<h4 id="Scoped-Styles"><a href="#Scoped-Styles" class="headerlink" title="Scoped Styles"></a>Scoped Styles</h4><p>The scoped style is only valid for the specified element and its children.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;h1&amp;gt;Page Title&amp;lt;/h1&amp;gt;</div><div class="line">&amp;lt;article&amp;gt;</div><div class="line">  &amp;lt;style scoped&amp;gt;</div><div class="line">    h1 &#123;</div><div class="line">      color: blue;</div><div class="line">    &#125;</div><div class="line">  &amp;lt;/style&amp;gt;</div><div class="line">  &amp;lt;h1&amp;gt;Article Title&amp;lt;/h1&amp;gt;</div><div class="line">  &amp;lt;p&amp;gt;Article content.&amp;lt;/p&amp;gt;</div><div class="line">&amp;lt;/article&amp;gt;</div></pre></td></tr></table></figure></p>
<h4 id="the-deley-and-async-attribute-of-Scripts"><a href="#the-deley-and-async-attribute-of-Scripts" class="headerlink" title="the deley and async attribute of Scripts"></a>the <code>deley</code> and <code>async</code> attribute of Scripts</h4><p>Using <code>defer</code> specifies that the browser should wait until the page’s markup is parsed before loading the script.</p>
<p>The new <code>async</code> attribute allows you to specify that a script should load asynchronously.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"xxx.js"</span> async&amp;gt;&amp;lt;/script&amp;gt;</div></pre></td></tr></table></figure></p>
<h4 id="responsive-image"><a href="#responsive-image" class="headerlink" title="responsive image"></a>responsive image</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;picture src=<span class="string">""</span> srcset=<span class="string">""</span> sizes=<span class="string">""</span> &amp;gt;</div><div class="line"></div><div class="line">&amp;lt;img src=<span class="string">""</span> srcset=<span class="string">""</span> size=<span class="string">""</span> &amp;gt;</div></pre></td></tr></table></figure>
<h4 id="others"><a href="#others" class="headerlink" title="others"></a>others</h4><ul>
<li>&lt;dialog&gt;</li>
<li>&lt;a href=”1.pdf” dowload&gt;download this document&lt;/a&gt;</li>
<li>&lt;iframe sandbox seemless&gt;&lt;/iframe&gt;</li>
<li>&lt;menu&gt; &lt;menulist&gt;</li>
<li>&lt;address&gt;</li>
</ul>
<h3 id="HTML5-form"><a href="#HTML5-form" class="headerlink" title="HTML5 form"></a>HTML5 form</h3><h4 id="lt-input-required-gt"><a href="#lt-input-required-gt" class="headerlink" title="&lt;input required&gt;"></a>&lt;input required&gt;</h4><h4 id="lt-input-placeholder-””-gt"><a href="#lt-input-placeholder-””-gt" class="headerlink" title="&lt;input placeholder=””&gt;"></a>&lt;input placeholder=””&gt;</h4><h4 id="lt-input-pattern-””-gt"><a href="#lt-input-pattern-””-gt" class="headerlink" title="&lt;input pattern=””&gt;"></a>&lt;input pattern=””&gt;</h4><h4 id="lt-input-disabled-gt"><a href="#lt-input-disabled-gt" class="headerlink" title="&lt;input disabled&gt;"></a>&lt;input disabled&gt;</h4><h4 id="lt-input-readonly-gt"><a href="#lt-input-readonly-gt" class="headerlink" title="&lt;input readonly&gt;"></a>&lt;input readonly&gt;</h4><h4 id="lt-datalist-gt"><a href="#lt-datalist-gt" class="headerlink" title="&lt;datalist&gt;"></a>&lt;datalist&gt;</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;input type=<span class="string">"color"</span> list=<span class="string">"colors"</span> id=<span class="string">"favcolor"</span> name=<span class="string">"favcolor"</span>/&amp;gt;</div><div class="line">&amp;lt;datalist id=<span class="string">"colors"</span>&amp;gt;</div><div class="line">    &amp;lt;option value=<span class="string">"#0000FF"</span> label=<span class="string">"blue"</span>/&amp;gt;</div><div class="line">    &amp;lt;option value=<span class="string">"#008000"</span> label=<span class="string">"green"</span>/&amp;gt;</div><div class="line">    &amp;lt;option value=<span class="string">"#ff0000"</span> label=<span class="string">"red"</span>/&amp;gt;</div><div class="line">    &amp;lt;option value=<span class="string">"#663399"</span> label=<span class="string">"RebeccaPurple"</span>/&amp;gt;</div><div class="line">&amp;lt;/datalist&amp;gt;</div></pre></td></tr></table></figure>
<p>&nbsp;</p>
<h4 id="autofocus-Attribute"><a href="#autofocus-Attribute" class="headerlink" title="autofocus Attribute"></a><code>autofocus</code> Attribute</h4><h4 id="new-input-type"><a href="#new-input-type" class="headerlink" title="new input type"></a>new input type</h4><ul>
<li><code>search</code></li>
<li><code>email</code></li>
<li><code>url</code></li>
<li><code>tel</code></li>
<li><code>date</code></li>
<li><code>time</code></li>
<li><code>number</code></li>
<li><code>range</code></li>
<li><code>color</code></li>
</ul>
<h4 id="lt-form-novalidate-amp-gt"><a href="#lt-form-novalidate-amp-gt" class="headerlink" title="&lt;form novalidate&amp;gt;"></a>&lt;form <code>novalidate&amp;gt;</code></h4>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/28/git-basics/" itemprop="url">
                  Git basics
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-28T13:50:15+08:00" content="2015-04-28">
              2015-04-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Version-Control/" itemprop="url" rel="index">
                    <span itemprop="name">Version Control</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/28/git-basics/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/28/git-basics/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><a href="http://think-like-a-git.net/" target="_blank" rel="external">http://think-like-a-git.net/</a></li>
<li><a href="http://marklodato.github.io/visual-git-guide/index-en.html" target="_blank" rel="external">http://marklodato.github.io/visual-git-guide/index-en.html</a></li>
<li><a href="https://www.atlassian.com/git/tutorials/" target="_blank" rel="external">https://www.atlassian.com/git/tutorials/</a></li>
</ul>
<h3 id="local-repository"><a href="#local-repository" class="headerlink" title="local repository"></a>local repository</h3><h4 id="checkout"><a href="#checkout" class="headerlink" title="checkout"></a>checkout</h4><h5 id="checkout-lt-branch-gt"><a href="#checkout-lt-branch-gt" class="headerlink" title="checkout &lt;branch&gt;"></a>checkout &lt;branch&gt;</h5><blockquote>
<p>switch branch<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">git checkout dev</div></pre></td></tr></table></figure></p>
</blockquote>
<p><img src="/media/checkout-branch.png" alt="checkout-branch"></p>
<h5 id="checkout-lt-commit-gt-files"><a href="#checkout-lt-commit-gt-files" class="headerlink" title="checkout &lt;commit&gt; [files]"></a>checkout &lt;commit&gt; [files]</h5><blockquote>
<p>&lt;commit&gt; is HEAD by default. The current branch doesn’t change, without moving the HEAD pointer location.</p>
<p>copy the &lt;commit&gt; tree to index tree and working tree.<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">git checkout HEAD</div><div class="line">git checkout HEAD^</div><div class="line">git checkout HEAD~<span class="number">3</span> <span class="number">1</span>.txt</div><div class="line">git checkout a47c3</div></pre></td></tr></table></figure></p>
</blockquote>
<p><img src="/media/chckout-files.png" alt="chckout-files"></p>
<h4 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h4><h5 id="reset-lt-commit-gt-files"><a href="#reset-lt-commit-gt-files" class="headerlink" title="reset &lt;commit&gt; [files]"></a>reset &lt;commit&gt; [files]</h5><blockquote>
<p>move the HEAD, and copying &lt;commit&gt; tree to index or working tree.</p>
<p>three mode:</p>
<p>–soft: no copy. move HEAD</p>
<p>–mixed: copy to index only. move HEAD   = reverse <code>git add</code></p>
<p>–hard: copy to index and working tree. move HEAD<br>&nbsp;<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">git reset HEAD^<span class="number">3</span></div><div class="line">git reset HEAD <span class="number">1</span>.txt  = reset -- <span class="number">1</span>.txt</div><div class="line">git reset HEAD^ <span class="number">1</span>.txt</div></pre></td></tr></table></figure></p>
</blockquote>
<p><img src="/media/reset-commit.png" alt="reset-commit"></p>
<h4 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h4><h5 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h5><p>working &lt;=&gt; index</p>
<h5 id="git-diff-–cache"><a href="#git-diff-–cache" class="headerlink" title="git diff –cache"></a>git diff –cache</h5><p>index &lt;=&gt; HEAD</p>
<h5 id="git-diff-HEAD"><a href="#git-diff-HEAD" class="headerlink" title="git diff HEAD"></a>git diff HEAD</h5><p>working &lt;=&gt; HEAD</p>
<h5 id="git-diff-HEAD-1"><a href="#git-diff-HEAD-1" class="headerlink" title="git diff HEAD^^"></a>git diff HEAD^^</h5><p>working &lt;=&gt; HEAD^^</p>
<h5 id="git-diff-da985-b325c"><a href="#git-diff-da985-b325c" class="headerlink" title="git diff da985 b325c"></a>git diff da985 b325c</h5><p>da985 &lt;=&gt; b325c</p>
<h5 id="git-diff-lt-branch-gt"><a href="#git-diff-lt-branch-gt" class="headerlink" title="git diff &lt;branch&gt;"></a>git diff &lt;branch&gt;</h5><p>working &lt;=&gt; &lt;branch&gt; HEAD</p>
<p><img src="/media/git-diff.png" alt="git-diff"></p>
<h4 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h4><h5 id="fast-forward-merge"><a href="#fast-forward-merge" class="headerlink" title="fast-forward merge"></a>fast-forward merge</h5><p><img src="/media/ff-merge.png" alt="ff-merge"></p>
<h5 id="3-way-merge"><a href="#3-way-merge" class="headerlink" title="3-way merge"></a>3-way merge</h5><p><img src="/media/3-way-merge.png" alt="3-way-merge"></p>
<h4 id="cherry-pick-and-rebase"><a href="#cherry-pick-and-rebase" class="headerlink" title="cherry-pick and rebase"></a>cherry-pick and rebase</h4><p><img src="/media/cherry-pick.png" alt="cherry-pick"></p>
<p><img src="/media/rebase.png" alt="rebase"></p>
<h3 id="remote-repository"><a href="#remote-repository" class="headerlink" title="remote repository"></a>remote repository</h3><h4 id="remote"><a href="#remote" class="headerlink" title="remote"></a>remote</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">remote</div><div class="line">remote -v</div><div class="line"></div><div class="line">remote add &amp;lt;remote_repo_name&amp;gt; &amp;lt;url&amp;gt;</div><div class="line">git remote add origin git<span class="meta">@github</span>.com:richdyang/<span class="number">1</span>.git</div></pre></td></tr></table></figure>
<h4 id="push"><a href="#push" class="headerlink" title="push"></a>push</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">push -u &amp;lt;remote_repo_name&amp;gt; &amp;lt;branch&amp;gt;</div><div class="line">push</div></pre></td></tr></table></figure>
<h4 id="pull"><a href="#pull" class="headerlink" title="pull"></a>pull</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">git pull</div></pre></td></tr></table></figure>
<p>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/25/spring-framework-context-services/" itemprop="url">
                  Spring framework - context services
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-25T20:17:32+08:00" content="2015-04-25">
              2015-04-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/25/spring-framework-context-services/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/25/spring-framework-context-services/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Bean-Lifecycle-Mangement"><a href="#Bean-Lifecycle-Mangement" class="headerlink" title="Bean Lifecycle Mangement"></a>Bean Lifecycle Mangement</h3><p>&nbsp;</p>
<p><img src="/media/spring-bean-lifecycle.jpg" alt="spring-bean-lifecycle"><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> context.lifecycle;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.BeansException;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.BeanClassLoaderAware;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.BeanNameAware;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.DisposableBean;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.InitializingBean;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContextAware;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</div><div class="line"><span class="keyword">import</span> javax.annotation.PreDestroy;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LifecycleExposureBean</span> <span class="keyword">implements</span> <span class="title">BeanNameAware</span>, <span class="title">BeanClassLoaderAware</span>, <span class="title">ApplicationContextAware</span>, <span class="title">InitializingBean</span>, <span class="title">DisposableBean</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String injectedProperty;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInjectedProperty</span><span class="params">(String injectedProperty)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Injection: injectedProperty = ["</span> + injectedProperty + <span class="string">"]"</span>);</div><div class="line">        <span class="keyword">this</span>.injectedProperty = injectedProperty;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//----------------context aware-------------------------</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBeanName</span><span class="params">(String beanName)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"BeanNameAware: beanName = ["</span> + beanName + <span class="string">"]"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBeanClassLoader</span><span class="params">(ClassLoader classLoader)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"BeanClassLoaderAware: classLoader = ["</span> + classLoader + <span class="string">"]"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setApplicationContext</span><span class="params">(ApplicationContext applicationContext)</span> <span class="keyword">throws</span> BeansException </span>&#123;</div><div class="line">        System.out.println(<span class="string">"ApplicationAware: applicationContext = ["</span> + applicationContext + <span class="string">"]"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//----------------initialization hook-------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@PostConstruct</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postContructCallBack</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"@PostContruc: Post contruct invocation"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        System.out.println(<span class="string">"IntializingBean: afterPropertiesSet() called"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initMethod</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"init-method: called"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//----------------destroy hook-------------------------</span></div><div class="line">    <span class="meta">@PreDestroy</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">preDestroy</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"@PreDestory: called"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        System.out.println(<span class="string">"DisposableBean: destroy() called"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroyMethod</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"destroy-method: called"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        GenericXmlApplicationContext context = <span class="keyword">new</span> GenericXmlApplicationContext(<span class="string">"classpath:spring-lifecycle.xml"</span>);</div><div class="line"></div><div class="line">        context.destroy();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&amp;gt;</div><div class="line">&amp;lt;beans xmlns=<span class="string">"http://www.springframework.org/schema/beans"</span></div><div class="line">       xmlns:p=<span class="string">"http://www.springframework.org/schema/p"</span></div><div class="line">       xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">       xsi:schemaLocation=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&amp;gt;</div><div class="line"></div><div class="line">       &amp;lt;bean <span class="class"><span class="keyword">class</span></span>=<span class="string">"context.lifecycle.LifecycleExposureBean"</span> init-method=<span class="string">"initMethod"</span> destroy-method=<span class="string">"destroyMethod"</span>&amp;gt;</div><div class="line">              &amp;lt;property name=<span class="string">"injectedProperty"</span> value=<span class="string">"This is the value of injected property"</span> /&amp;gt;</div><div class="line">       &amp;lt;/bean&amp;gt;</div><div class="line">&amp;lt;/beans&amp;gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>Injection: injectedProperty = [This is the value of injected property]</p>
<p>BeanNameAware: beanName = [context.lifecycle.LifecycleExposureBean#0]</p>
<p>BeanClassLoaderAware: classLoader = [sun.misc.Launcher$AppClassLoader@330bedb4]</p>
<p>ApplicationAware: applicationContext = [org.springframework.context.support.GenericXmlApplicationContext@18769467: startup date [Sat Apr 25 19:38:10 CST 2015]; root of context hierarchy]</p>
<p>IntializingBean: afterPropertiesSet() called</p>
<p>init-method: called</p>
<p>DisposableBean: destroy() called</p>
<p>destroy-method: called</p>
</blockquote>
<h3 id="FactoryBean"><a href="#FactoryBean" class="headerlink" title="FactoryBean"></a>FactoryBean</h3><p>When a bean depends on some beans which cannot be simply intialized by using <code>new</code></p>
<ul>
<li>implement <code>FactoryBean&amp;lt;T&amp;gt;</code></li>
<li>specify <code>&lt;span class=&quot;FontName1&quot;&gt;factory-bean&lt;/span&gt;</code> and <code>&lt;span class=&quot;FontName1&quot;&gt;factory-method&lt;/span&gt;</code></li>
</ul>
<h3 id="PropertyEditor"><a href="#PropertyEditor" class="headerlink" title="PropertyEditor"></a>PropertyEditor</h3><p>In String, PropertyEditior is mainly used as a kind of converter from String to POJO JavaBean.</p>
<p>You implement your custom PropertyEditor for the specified JavaBean class, and then configure it using <code>org.springframework.beans.factory.config.CustomEditorConfigurer</code><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomBean</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> String firstName;</div><div class="line">    <span class="keyword">private</span> String lastName;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomBean</span><span class="params">(String firstName, String lastName)</span> </span>&#123;</div><div class="line">    	<span class="keyword">this</span>.firstName = firstName;</div><div class="line">    	<span class="keyword">this</span>.lastName = lastName;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">    	<span class="keyword">return</span> <span class="string">"First name: "</span> + firstName + <span class="string">", last name: "</span> + lastName;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomBeanEditor</span> <span class="keyword">extends</span> <span class="title">PropertyEditorSupport</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAsText</span><span class="params">(String text)</span> </span>&#123;</div><div class="line">        String[] segs = text.split(<span class="string">" "</span>);</div><div class="line">        CustomBean customBean = <span class="keyword">new</span> CustomBean(segs[<span class="number">0</span>], segs[<span class="number">1</span>]);</div><div class="line"></div><div class="line">        setValue(customBean);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;bean id=<span class="string">"customEditorConfigurer"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"org.springframework.beans.factory.config.CustomEditorConfigurer"</span>&amp;gt;</div><div class="line">	&amp;lt;property name=<span class="string">"customEditors"</span>&amp;gt;</div><div class="line">		&amp;lt;map&amp;gt;</div><div class="line">			&amp;lt;entry key=<span class="string">"context.propertyeditor.CustomBean"</span> value=<span class="string">"context.propertyeditor.CustomBeanEditor"</span> /&amp;gt;</div><div class="line">		&amp;lt;/map&amp;gt;</div><div class="line">	&amp;lt;/property&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div></pre></td></tr></table></figure>
<h3 id="ApplicationContext-capabilities"><a href="#ApplicationContext-capabilities" class="headerlink" title="ApplicationContext capabilities"></a>ApplicationContext capabilities</h3><p>Basically, AppliationContext has more extra capabilities than BeanFactory.</p>
<p>You can regard ApplicationContext as a <code>MessageSource</code>, an <code>ApplicationEventPublisher</code>, a <code>ResourceLoader</code>.</p>
<h4 id="MessageSource"><a href="#MessageSource" class="headerlink" title="MessageSource"></a>MessageSource</h4><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">&amp;lt;bean id=<span class="string">"messageSource"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"org.springframework.context.support.ResourceBundleMessageSource"</span>&amp;gt;</div><div class="line">    &amp;lt;property name=<span class="string">"basenames"</span>&amp;gt;</div><div class="line">        &amp;lt;list&amp;gt;</div><div class="line">            &amp;lt;value&amp;gt;message&amp;lt;/value&amp;gt;</div><div class="line">        &amp;lt;/list&amp;gt;</div><div class="line">    &amp;lt;/property&amp;gt;</div><div class="line">&amp;lt;/bean&amp;gt;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">GenericXmlApplicationContext context = <span class="keyword">new</span> GenericXmlApplicationContext(<span class="string">"classpath:spring-messagesource.xml"</span>);</div><div class="line"></div><div class="line">String name = <span class="string">"Richard"</span>;</div><div class="line">String greeting = context.getMessage(<span class="string">"greeting"</span>, <span class="keyword">new</span> String[]&#123;name&#125;, Locale.US);</div><div class="line">String greetingCN = context.getMessage(<span class="string">"greeting"</span>, <span class="keyword">new</span> String[]&#123;name&#125;, Locale.CHINA);</div><div class="line"></div><div class="line">System.out.println(<span class="string">"greeting = ["</span> + greeting + <span class="string">"]"</span>);</div><div class="line">System.out.println(<span class="string">"greetingCN = ["</span> + greetingCN + <span class="string">"]"</span>);</div></pre></td></tr></table></figure>
<p>Then I have two message file: message_en_US.properties and message_zh_CN<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">greeting=你好, &#123;<span class="number">0</span>&#125;！</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">greeting=How is it going, &#123;<span class="number">0</span>&#125;?</div></pre></td></tr></table></figure>
<p>Output:</p>
<blockquote>
<p>greeting = [How is it going, Richard?]</p>
<p>greetingCN = [你好, Richard！]</p>
</blockquote>
<h4 id="Application-Events"><a href="#Application-Events" class="headerlink" title="Application Events"></a>Application Events</h4><p><code>ApplicationEvent</code>  – derive from java.util.<code>EventObject</code></p>
<p><code>ApplicationListener&amp;lt;T&amp;gt;</code> interface</p>
<p><code>ApplicationEventPublisher.publishEvent()</code></p>
<p><code>ApplicationContext</code> implements <code>ApplicationEventPublisher</code> interface</p>
<h4 id="resource-accessing"><a href="#resource-accessing" class="headerlink" title="resource accessing"></a>resource accessing</h4><p>org.springframework.core.io.Resource</p>
<p>ResourceLoader</p>
<p>ApplicationContext implements ResourceLoader</p>
<h4 id="Environment-and-PropertySource-Abstraction"><a href="#Environment-and-PropertySource-Abstraction" class="headerlink" title="Environment and PropertySource Abstraction"></a>Environment and PropertySource Abstraction</h4><p>Environment –&gt; PropertySource<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line">ConfigurableEnvironment env =&amp;amp;nbsp;ctx.getEnvironment();</div><div class="line">MutablePropertySources propertySources =&amp;amp;nbsp;env.getPropertySources();</div><div class="line"></div><div class="line">Map appMap =&amp;amp;nbsp;<span class="keyword">new</span> HashMap();</div><div class="line">appMap.put(<span class="string">"application.home"</span>, <span class="string">"application_home"</span>);</div><div class="line"></div><div class="line">propertySources.addLast(<span class="keyword">new</span> MapPropertySource(<span class="string">"application_properties"</span>, appMap));</div></pre></td></tr></table></figure></p>
<p>For the <span class="FontName1">PropertySource</span> abstraction, Spring will access the properties in the following default order:<a id="cXXX.328"></a></p>
<ul>
<li>System properties for the running JVM (-Dxxxx)</li>
<li>Environment variables (like JAVA_HOME, Path)</li>
<li>Application-defined properties<br>Most of time, we use PropertyPlaceHolder<figure class="highlight"><table><tr><td class="code"><pre><div class="line">&amp;lt;beans xmlns="http://www.springframework.org/schema/beans"</div><div class="line">    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</div><div class="line">    xmlns:context="http://www.springframework.org/schema/context"</div><div class="line">    xsi:schemaLocation="http://www.springframework.org/schema/beans</div><div class="line">        http://www.springframework.org/schema/beans/spring-beans.xsd</div><div class="line">        http://www.springframework.org/schema/context</div><div class="line">        http://www.springframework.org/schema/context/spring-context.xsd"&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;context:property-placeholder location="classpath:application.properties"/&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;bean id="somebean" class="com.apress.prospring4.ch4.AppProperty"&amp;gt;</div><div class="line">        &amp;lt;property name="applicationHome" value="$&#123;application.home&#125;"/&amp;gt;</div><div class="line">        &amp;lt;property name="userHome" value="$&#123;user.home&#125;"&amp;gt;&amp;lt;/property&amp;gt;</div><div class="line">    &amp;lt;/bean&amp;gt;</div><div class="line">&amp;lt;/beans&amp;gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>You can see, once you get the properties, you can use them in configuration files using <code>{....}</code></p>
<p>&nbsp;</p>
<h3 id="Profiles"><a href="#Profiles" class="headerlink" title="Profiles"></a>Profiles</h3><p>Basically, a <em>profile</em> instructs Spring to configure only the<span class="FontName1">ApplicationContext</span> that was defined when the specified profile was active.</p>
<ul>
<li>How to associated with a profile?<figure class="highlight"><table><tr><td class="code"><pre><div class="line">&amp;lt;beans xmlns="http://www.springframework.org/schema/beans"</div><div class="line">    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</div><div class="line">    xsi:schemaLocation="http://www.springframework.org/schema/beans</div><div class="line">        http://www.springframework.org/schema/beans/spring-beans.xsd"</div><div class="line">        profile="devProfile"&amp;gt;</div><div class="line">...</div><div class="line">&amp;lt;/bean&amp;gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>Those beans in the file should be instantiated only when the specified profile is <span class="FontName1">active. If its profile is not active, actually these beans will not be initialized.</span></p>
<ul>
<li>How to activate</li>
</ul>
<ol>
<li>JVM argument <span class="FontName1">-Dspring.profiles.active=”devProfile”</span></li>
<li>ctx.getEnvironment().setActiveProfiles(“devProfile”)</li>
</ol>
<p>### </p>
<p>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/23/whats-the-difference-between-getname-getsimplename-getcanonicalname-of-class/" itemprop="url">
                  what's the difference between getName(), getSimpleName(), getCanonicalName() of Class?
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-23T19:02:25+08:00" content="2015-04-23">
              2015-04-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Q-A/" itemprop="url" rel="index">
                    <span itemprop="name">Q/A</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/23/whats-the-difference-between-getname-getsimplename-getcanonicalname-of-class/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/23/whats-the-difference-between-getname-getsimplename-getcanonicalname-of-class/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">//primitive</span></div><div class="line">System.out.println(<span class="keyword">int</span>.class.getName());</div><div class="line">System.out.println(<span class="keyword">int</span>.class.getCanonicalName());</div><div class="line">System.out.println(<span class="keyword">int</span>.class.getSimpleName());</div><div class="line"></div><div class="line">System.out.println();</div><div class="line"></div><div class="line"><span class="comment">//class</span></div><div class="line">System.out.println(String.class.getName());</div><div class="line">System.out.println(String.class.getCanonicalName());</div><div class="line">System.out.println(String.class.getSimpleName());</div><div class="line"></div><div class="line">System.out.println();</div><div class="line"></div><div class="line"><span class="comment">//inner class</span></div><div class="line">System.out.println(HashMap.SimpleEntry.class.getName());</div><div class="line">System.out.println(HashMap.SimpleEntry.class.getCanonicalName());</div><div class="line">System.out.println(HashMap.SimpleEntry.class.getSimpleName());</div><div class="line"></div><div class="line">System.out.println();</div><div class="line"></div><div class="line"><span class="comment">//anonymous inner class</span></div><div class="line">System.out.println(<span class="keyword">new</span> Serializable()&#123;&#125;.getClass().getName());</div><div class="line">System.out.println(<span class="keyword">new</span> Serializable()&#123;&#125;.getClass().getCanonicalName());</div><div class="line">System.out.println(<span class="keyword">new</span> Serializable()&#123;&#125;.getClass().getSimpleNam());</div></pre></td></tr></table></figure>
<p>&nbsp;</p>
<p>Prints:</p>
<blockquote>
<p>int</p>
<p>int</p>
<p>int</p>
<p>java.lang.String</p>
<p>java.lang.String</p>
<p>String</p>
<p>java.util.AbstractMap$SimpleEntry</p>
<p>java.util.AbstractMap.SimpleEntry</p>
<p>SimpleEntry</p>
<p>ClassnameTest$1</p>
<p>null<br>There’s an empty line in the last block where getSimpleName returns an empty string.</p>
</blockquote>
<p>The upshot looking at this is:</p>
<p>the name is the name that you’d use to dynamically load the class with, for example, a call to Class.forName with the default classloader.<br>the canonical name is the name that would be used in an import statement and uniquely identifies the class. Might be useful during toString or logging operations.<br>the simple name loosely identifies the class, again might be useful during toString or logging operations but is not guaranteed to be unique.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/23/whats-the-difference-between-getpath-getabsolutepath-and-getcanonicalpath/" itemprop="url">
                  What's the difference between getPath(), getAbsolutePath(), and getCanonicalPath()?
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-23T18:56:07+08:00" content="2015-04-23">
              2015-04-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Q-A/" itemprop="url" rel="index">
                    <span itemprop="name">Q/A</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/23/whats-the-difference-between-getpath-getabsolutepath-and-getcanonicalpath/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/23/whats-the-difference-between-getpath-getabsolutepath-and-getcanonicalpath/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Consider these filenames:</p>
<ul>
<li>C:\temp\file.txt - This is a path, an absolute path, and a canonical path.</li>
<li>.\file.txt - This is a path. It’s neither an absolute path nor a canonical path.</li>
<li>C:\temp\myapp\bin..\..\file.txt - This is a path and an absolute path. It’s not a canonical path.<br>A canonical path is always an absolute path.</li>
</ul>
<p>Converting from a path to a canonical path makes it absolute (usually tack on the current working directory so e.g. ./file.txt becomes c:/temp/file.txt). The canonical path of a file just “purifies” the path, removing and resolving stuff like ..\ and resolving symlinks (on unixes).</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/22/what-does-0-0-0-0-mean/" itemprop="url">
                  what does 0.0.0.0 mean?
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-22T22:46:26+08:00" content="2015-04-22">
              2015-04-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Q-A/" itemprop="url" rel="index">
                    <span itemprop="name">Q/A</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/22/what-does-0-0-0-0-mean/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/22/what-does-0-0-0-0-mean/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>0.0.0.0, in server context, means “<strong>all IP addresses on the local machine</strong>“ (in fact probably, “all IPv4 addresses on the local machine”). So, if your webserver machine has two ip addresses, 192.168.1.1 and 10.1.2.1, and you allow a webserver daemon like apache to listen on 0.0.0.0, it will be reachable at both of those IPs. But only to what can contact those IPs and the web port(s).</p>
<p>The only thing is that you cannot say “<strong><del>all addresses should have acces<em>s</em></del></strong>“ – that’s done in your firewall(s) and/or the server software and/or other security layers like tcpwrappers.</p>
<p>&nbsp;</p>
<p>Note that, in a different context (routing) 0.0.0.0 usually means the default route (the route to “the rest of” the internet, aside from routes in your local network etc.).</p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/22/algorithm-training-from-codility/" itemprop="url">
                  algorithm training from codility
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-04-22T15:00:22+08:00" content="2015-04-22">
              2015-04-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/04/22/algorithm-training-from-codility/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/04/22/algorithm-training-from-codility/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="TRAINING"><a href="#TRAINING" class="headerlink" title="TRAINING"></a>TRAINING</h3><h4 id="counting-elements"><a href="#counting-elements" class="headerlink" title="counting elements"></a>counting elements</h4><p>When every value of the element in a numeric array is in range. We can get a counter array of which the index of every element is the value and the value is the counter.</p>
<p><img src="/media/counter-array.png" alt="counter-array"></p>
<h4 id="Prefix-Sums"><a href="#Prefix-Sums" class="headerlink" title="Prefix Sums"></a>Prefix Sums</h4><p>Prefix sums array defines as:</p>
<p><img src="/media/prefix-sums-array.png" alt="prefix-sums-array"></p>
<p>So prefix sums array is very useful to compute the sum of any array slice (contiguous segments of array).</p>
<p>For example:</p>
<p>sum(a<sub>2</sub>…a<sub>5</sub>) = p<sub>6</sub> - p<sub>2</sub></p>
<ul>
<li><p><strong>minimum sum of slice</strong><br>sort the prefix sum, and find the minimum difference between neighbor elements.</p>
</li>
<li><p><strong>maximum sum of slice</strong><br>the difference between the max and min of the prefix sum.</p>
</li>
</ul>
<h4 id="leader"><a href="#leader" class="headerlink" title="leader"></a>leader</h4><p>The leader of this sequence is the element whose value occurs more than n/2 times.The array can have zero or only one leader.</p>
<p><img src="/media/leader.png" alt="leader"></p>
<p>A property is:</p>
<p>After removing a pair of elements of different values, the leader remain the same.</p>
<p>Let’s validate it:</p>
<ul>
<li>if the two elements contain one leader, then the original leader occurs &gt; n/2 - 1 = (n-2)/2 in the left (n-2) elements, so it’s still the leader of the rest.</li>
<li>if the two elements contain no leader, then the original leader occurs &gt; n/2 = (n-2)/2 +1 &gt; (n-2)/2 in the left elements, so it’s still the leader of the rest.<br><img src="/media/leader-1.png" alt="leader-1">           or    <img src="/media/leader-2.png" alt="leader-2"></li>
</ul>
<p>So we loop the array, and every time we remove a pair of elements, if the two equals, we reserve; if not, we remove safely.</p>
<p>The left elements MUST be all the same. But they are just candidate. We need to validate in the original elements.</p>
<p>This algorithm is O(n).</p>
<p><img src="/media/leader-3.png" alt="leader-3"><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Leader</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">leader</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> N = a.length;</div><div class="line">        <span class="keyword">int</span> size = <span class="number">0</span>; <span class="comment">// stack size</span></div><div class="line">        <span class="keyword">int</span> top = -<span class="number">1</span>; <span class="comment">// top value</span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(size == <span class="number">0</span>) &#123;</div><div class="line">                size += <span class="number">1</span>;</div><div class="line">                top = a[i];</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">if</span>(top != a[i]) &#123;</div><div class="line">                    size -= <span class="number">1</span>;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    size += <span class="number">1</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> cadidate = top;</div><div class="line"></div><div class="line">        <span class="comment">// validation</span></div><div class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(a[i] == cadidate) &#123;</div><div class="line">                count++;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> (count &amp;gt; N/<span class="number">2</span>) ? cadidate : -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] a = &#123;<span class="number">4</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">5</span>&#125;;</div><div class="line"></div><div class="line">        System.out.println(leader(a));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="prime-and-composite-numbers"><a href="#prime-and-composite-numbers" class="headerlink" title="prime and composite numbers"></a>prime and composite numbers</h4><p>This kind of algorithm is based on one divisor, we can find the <span style="text-decoration: underline;"><strong>symmetric</strong></span> divisor.</p>
<h5 id="counting-divisors"><a href="#counting-divisors" class="headerlink" title="counting divisors"></a>counting divisors</h5><p><img src="/media/counting-divisors.png" alt="counting-divisors"></p>
<p>for 1 to<span style="font-family: 'comic sans ms', sans-serif;"> √n<span style="font-family: arial, helvetica, sans-serif;">, divide and count it.</span></span></p>
<h5 id="Primality-test"><a href="#Primality-test" class="headerlink" title="Primality test"></a>Primality test</h5><p>for 2 to <span style="font-family: 'comic sans ms', sans-serif;">√n</span>, divide and check it.</p>
<h5 id="Sieve-of-Eratosthenes"><a href="#Sieve-of-Eratosthenes" class="headerlink" title="Sieve of Eratosthenes"></a>Sieve of Eratosthenes</h5><h4 id="Caterpillar-method"><a href="#Caterpillar-method" class="headerlink" title="Caterpillar method"></a>Caterpillar method</h4><p><img src="/media/caterpillar.png" alt="caterpillar">   <img src="/media/caterpillar-image.png" alt="caterpillar-image"></p>
<p>This idea is a reminiscent of movements of a caterpillar (毛虫).</p>
<ul>
<li>if we can, we move the right end (front) forward and increase the size of the caterpillar;</li>
<li>otherwise, we move the left end (back) forward and decrease the size of the caterpillar.</li>
</ul>
<h4 id="Greedy-algorithms"><a href="#Greedy-algorithms" class="headerlink" title="Greedy algorithms"></a>Greedy algorithms</h4><p>Greedy programming is a method by which a solution is determined based on making the locally optimal choice at any given moment.</p>
<p>The greedy method of solving a task may or may not be the best approach</p>
<h3 id="PROBLEM-SET"><a href="#PROBLEM-SET" class="headerlink" title="PROBLEM SET"></a>PROBLEM SET</h3><p><a href="http://www.martinkysel.com/codility-solutions/" target="_blank" rel="external">http://www.martinkysel.com/codility-solutions/</a></p>
<h4 id="Time-Complexity"><a href="#Time-Complexity" class="headerlink" title="Time Complexity"></a>Time Complexity</h4><h5 id="TapeEquilibrium"><a href="#TapeEquilibrium" class="headerlink" title="TapeEquilibrium"></a><a href="https://codility.com/demo/take-sample-test/tape_equilibrium" target="_blank" rel="external">TapeEquilibrium</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Minimize the value |(A[0] + … + A[P-1]) – (A[P] + … + A[N-1])|.</p>
<p><strong>Complexity</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>In the first run I compute the left part up to the point i and the overall sum <em>last</em>. Then I compute the minimal difference between 0..i and i+1..n.</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> TapeEquilibrium;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A non-empty zero-indexed array A consisting of N integers is given. Array A represents numbers on a tape.</div><div class="line"></div><div class="line">Any integer P, such that 0 &amp;lt; P &amp;lt; N, splits this tape into two non-empty parts: A[0], A[1], ..., A[P − 1] and A[P], A[P + 1], ..., A[N − 1].</div><div class="line"></div><div class="line">The difference between the two parts is the value of: |(A[0] + A[1] + ... + A[P − 1]) − (A[P] + A[P + 1] + ... + A[N − 1])|</div><div class="line"></div><div class="line">In other words, it is the absolute difference between the sum of the first part and the sum of the second part.</div><div class="line"></div><div class="line">For example, consider array A such that:</div><div class="line"></div><div class="line">  A[0] = 3</div><div class="line">  A[1] = 1</div><div class="line">  A[2] = 2</div><div class="line">  A[3] = 4</div><div class="line">  A[4] = 3</div><div class="line">We can split this tape in four places:</div><div class="line"></div><div class="line">P = 1, difference = |3 − 10| = 7</div><div class="line">P = 2, difference = |4 − 9| = 5</div><div class="line">P = 3, difference = |6 − 7| = 1</div><div class="line">P = 4, difference = |10 − 3| = 7</div><div class="line">Write a function:</div><div class="line"></div><div class="line">class Solution &#123; public int solution(int[] A); &#125;</div><div class="line"></div><div class="line">that, given a non-empty zero-indexed array A of N integers, returns the minimal difference that can be achieved.</div><div class="line"></div><div class="line">For example, given:</div><div class="line"></div><div class="line">  A[0] = 3</div><div class="line">  A[1] = 1</div><div class="line">  A[2] = 2</div><div class="line">  A[3] = 4</div><div class="line">  A[4] = 3</div><div class="line">the function should return 1, as explained above.</div><div class="line"></div><div class="line">Assume that:</div><div class="line"></div><div class="line">N is an integer within the range [2..100,000];</div><div class="line">each element of array A is an integer within the range [−1,000..1,000].</div><div class="line">Complexity:</div><div class="line"></div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(N), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.*;</div><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">int</span> N = A.length;</div><div class="line">        <span class="keyword">long</span> sum = <span class="number">0L</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            sum += A[i];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">long</span> diff = Long.MAX_VALUE;</div><div class="line"></div><div class="line">        <span class="keyword">long</span>[] p = <span class="keyword">new</span> <span class="keyword">long</span>[N];</div><div class="line">        p[<span class="number">0</span>] = <span class="number">0L</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            p[i] = p[i-<span class="number">1</span>] + A[i-<span class="number">1</span>];</div><div class="line"></div><div class="line">            <span class="comment">//System.out.println(p[i]);</span></div><div class="line"></div><div class="line">            diff = min(diff, abs(<span class="number">2</span>*p[i] - sum));</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)diff;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-------------------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>&#125;;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> result = solution(A);</div><div class="line">        assertEquals(<span class="number">1</span>, result);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="FrogJmp"><a href="#FrogJmp" class="headerlink" title="FrogJmp"></a><a href="https://codility.com/demo/take-sample-test/frog_jmp" target="_blank" rel="external">FrogJmp</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count minimal number of jumps from position X to Y.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(1);</li>
<li>expected worst-case space complexity is O(1).<br><strong>Execution:</strong></li>
</ul>
<p>Do not use float division if possible!</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> FrogJmp;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A small frog wants to get to the other side of the road. The frog is currently located at position X and wants to get to a position greater than or equal to Y. The small frog always jumps a fixed distance, D.</div><div class="line">Count the minimal number of jumps that the small frog must perform to reach its target.</div><div class="line">Write a function:</div><div class="line">class Solution &#123; public int solution(int X, int Y, int D); &#125;</div><div class="line">that, given three integers X, Y and D, returns the minimal number of jumps from position X to a position equal to or greater than Y.</div><div class="line">For example, given:</div><div class="line">  X = 10</div><div class="line">  Y = 85</div><div class="line">  D = 30</div><div class="line">the function should return 3, because the frog will be positioned as follows:</div><div class="line">after the first jump, at position 10 + 30 = 40</div><div class="line">after the second jump, at position 10 + 30 + 30 = 70</div><div class="line">after the third jump, at position 10 + 30 + 30 + 30 = 100</div><div class="line">Assume that:</div><div class="line">X, Y and D are integers within the range [1..1,000,000,000];</div><div class="line">X ≤ Y.</div><div class="line">Complexity:</div><div class="line">expected worst-case time complexity is O(1);</div><div class="line">expected worst-case space complexity is O(1).</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.InputStreamReader;</div><div class="line"><span class="keyword">import</span> java.util.Random;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> X, <span class="keyword">int</span> Y, <span class="keyword">int</span> D)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">int</span> count = (Y-X) / D;</div><div class="line">        <span class="keyword">int</span> left = (Y-X) % D;</div><div class="line">        <span class="keyword">return</span> left == <span class="number">0</span> ? count : count+<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-------------------------------------------------</span></div><div class="line"></div><div class="line">    <span class="keyword">private</span> Random rdm = <span class="keyword">new</span> Random();</div><div class="line">    <span class="keyword">private</span> BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</div><div class="line"></div><div class="line">    <span class="comment">// [from, to)</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">random</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> rdm.nextInt(to - from) + from;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// A[0]...A[n-1]</span></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">random</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> index = random(<span class="number">0</span>, A.length);</div><div class="line">        <span class="keyword">return</span> A[index];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> X = <span class="number">0</span>, Y = <span class="number">20</span>, D = <span class="number">19</span>;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">2</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(X, Y, D);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> X = <span class="number">0</span>, Y = <span class="number">20</span>, D = <span class="number">20</span>;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(X, Y, D);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> X = <span class="number">0</span>, Y = <span class="number">20</span>, D = <span class="number">21</span>;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(X, Y, D);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> X = <span class="number">10</span>, Y = <span class="number">85</span>, D = <span class="number">30</span>;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">3</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(X, Y, D);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="PermMissingElem"><a href="#PermMissingElem" class="headerlink" title="PermMissingElem"></a><a href="https://codility.com/demo/take-sample-test/perm_missing_elem" target="_blank" rel="external">PermMissingElem</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the missing element in a given permutation.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Sum all elements that should be in the list and sum all elements that actually are in the list. The sum is 0 based, so +1 is required. The first solution using the + operator can cause int overflow in not-python languages. Therefore the use of a binary XOR is adequate.</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> PermMissingElem;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A zero-indexed array A consisting of N different integers is given. The array contains integers in the range [1..(N + 1)], which means that exactly one element is missing.</div><div class="line">Your goal is to find that missing element.</div><div class="line">Write a function:</div><div class="line">class Solution &#123; public int solution(int[] A); &#125;</div><div class="line">that, given a zero-indexed array A, returns the value of the missing element.</div><div class="line">For example, given array A such that:</div><div class="line">  A[0] = 2</div><div class="line">  A[1] = 3</div><div class="line">  A[2] = 1</div><div class="line">  A[3] = 5</div><div class="line">the function should return 4, as it is the missing element.</div><div class="line">Assume that:</div><div class="line">N is an integer within the range [0..100,000];</div><div class="line">the elements of A are all distinct;</div><div class="line">each element of array A is an integer within the range [1..(N + 1)].</div><div class="line">Complexity:</div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(1), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.InputStreamReader;</div><div class="line"><span class="keyword">import</span> java.util.Random;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">long</span> N = A.length;</div><div class="line">        <span class="keyword">long</span> sum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            sum += A[i];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">long</span> missing = (<span class="number">1</span>+(N+<span class="number">1</span>)) * (N+<span class="number">1</span>) /<span class="number">2</span> - sum;</div><div class="line"></div><div class="line">        <span class="keyword">return</span>  (<span class="keyword">int</span>) missing;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------test------------------------------------------------</span></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> N = <span class="number">100001</span>;</div><div class="line">        <span class="keyword">int</span> a = (<span class="number">1</span>+(N+<span class="number">1</span>)) * (N+<span class="number">1</span>) /<span class="number">2</span>;</div><div class="line">        System.out.println(a);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">100000</span>];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; <span class="number">100000</span>; ++i) &#123;</div><div class="line">            A[i] = i+<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        A[<span class="number">0</span>] = <span class="number">100001</span>;</div><div class="line">        System.out.println(A[<span class="number">100000</span>-<span class="number">1</span>]);</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line">        System.out.println(actual);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="Counting-Elements"><a href="#Counting-Elements" class="headerlink" title="Counting Elements"></a>Counting Elements</h4><h5 id="PermCheck"><a href="#PermCheck" class="headerlink" title="PermCheck"></a><a href="https://codility.com/demo/take-sample-test/perm_check" target="_blank" rel="external">PermCheck</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Check whether array N is a permutation.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Mark elements as seen in a boolean array. Elements seen twice or out of bounds of the size indicate that the list is no permutation. The check if the boolean array only contains true elements is not required. This solution only works with permutations starting from 1.</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> PermCheck;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A non-empty zero-indexed array A consisting of N integers is given.</div><div class="line">A permutation is a sequence containing each element from 1 to N once, and only once.</div><div class="line">For example, array A such that:</div><div class="line">    A[0] = 4</div><div class="line">    A[1] = 1</div><div class="line">    A[2] = 3</div><div class="line">    A[3] = 2</div><div class="line">is a permutation, but array A such that:</div><div class="line">    A[0] = 4</div><div class="line">    A[1] = 1</div><div class="line">    A[2] = 3</div><div class="line">is not a permutation, because value 2 is missing.</div><div class="line">The goal is to check whether array A is a permutation.</div><div class="line">Write a function:</div><div class="line">class Solution &#123; public int solution(int[] A); &#125;</div><div class="line">that, given a zero-indexed array A, returns 1 if array A is a permutation and 0 if it is not.</div><div class="line">For example, given array A such that:</div><div class="line">    A[0] = 4</div><div class="line">    A[1] = 1</div><div class="line">    A[2] = 3</div><div class="line">    A[3] = 2</div><div class="line">the function should return 1.</div><div class="line">Given array A such that:</div><div class="line">    A[0] = 4</div><div class="line">    A[1] = 1</div><div class="line">    A[2] = 3</div><div class="line">the function should return 0.</div><div class="line">Assume that:</div><div class="line">N is an integer within the range [1..100,000];</div><div class="line">each element of array A is an integer within the range [1..1,000,000,000].</div><div class="line">Complexity:</div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(N), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.InputStreamReader;</div><div class="line"><span class="keyword">import</span> java.util.Random;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> N = A.length;</div><div class="line">        <span class="keyword">int</span>[] seen = <span class="keyword">new</span> <span class="keyword">int</span>[N + <span class="number">1</span>];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ;i &amp;lt; N; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(A[i] &amp;gt; N) <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// exceeding the range</span></div><div class="line">            seen[A[i]]++;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &amp;lt; N+<span class="number">1</span>; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(seen[i] != <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// seen many times</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------------------test------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">0</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="FrogRiverOne"><a href="#FrogRiverOne" class="headerlink" title="FrogRiverOne"></a><a href="https://codility.com/demo/take-sample-test/frog_river_one" target="_blank" rel="external">FrogRiverOne</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the earliest time when a frog can jump to the other side of a river.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(X)<br><strong>Execution:</strong></li>
</ul>
<p>Mark seen elements as such in a boolean array. I do not like the idea of returning the first second as 0. But specifications are specifications</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> FrogRiverOne;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A small frog wants to get to the other side of a river. The frog is currently located at position 0, and wants to get to position X. Leaves fall from a tree onto the surface of the river.</div><div class="line"></div><div class="line">You are given a non-empty zero-indexed array A consisting of N integers representing the falling leaves. A[K] represents the position where one leaf falls at time K, measured in minutes.</div><div class="line"></div><div class="line">The goal is to find the earliest time when the frog can jump to the other side of the river. The frog can cross only when leaves appear at every position across the river from 1 to X.</div><div class="line"></div><div class="line">For example, you are given integer X = 5 and array A such that:</div><div class="line"></div><div class="line">  A[0] = 1</div><div class="line">  A[1] = 3</div><div class="line">  A[2] = 1</div><div class="line">  A[3] = 4</div><div class="line">  A[4] = 2</div><div class="line">  A[5] = 3</div><div class="line">  A[6] = 5</div><div class="line">  A[7] = 4</div><div class="line">In minute 6, a leaf falls into position 5\. This is the earliest time when leaves appear in every position across the river.</div><div class="line"></div><div class="line">Write a function:</div><div class="line"></div><div class="line">class Solution &#123; public int solution(int X, int[] A); &#125;</div><div class="line"></div><div class="line">that, given a non-empty zero-indexed array A consisting of N integers and integer X, returns the earliest time when the frog can jump to the other side of the river.</div><div class="line"></div><div class="line">If the frog is never able to jump to the other side of the river, the function should return −1.</div><div class="line"></div><div class="line">For example, given X = 5 and array A such that:</div><div class="line"></div><div class="line">  A[0] = 1</div><div class="line">  A[1] = 3</div><div class="line">  A[2] = 1</div><div class="line">  A[3] = 4</div><div class="line">  A[4] = 2</div><div class="line">  A[5] = 3</div><div class="line">  A[6] = 5</div><div class="line">  A[7] = 4</div><div class="line">the function should return 6, as explained above.</div><div class="line"></div><div class="line">Assume that:</div><div class="line"></div><div class="line">N and X are integers within the range [1..100,000];</div><div class="line">each element of array A is an integer within the range [1..X].</div><div class="line">Complexity:</div><div class="line"></div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(X), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Arrays;</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> X, <span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> N = A.length;</div><div class="line">        <span class="keyword">boolean</span>[] seen = <span class="keyword">new</span> <span class="keyword">boolean</span>[X+<span class="number">1</span>]; <span class="comment">// [0] ignore</span></div><div class="line">        Arrays.fill(seen, <span class="keyword">false</span>);</div><div class="line">        <span class="keyword">int</span> has_seen = <span class="number">0</span>;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(seen[A[i]] == <span class="keyword">false</span>) &#123;</div><div class="line">                seen[A[i]] = <span class="keyword">true</span>;</div><div class="line">                has_seen++;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">if</span>(has_seen == X) <span class="keyword">return</span> i;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------------------test------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> X = <span class="number">5</span>;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">6</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(X, A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> X = <span class="number">5</span>;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">7</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(X, A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="MaxCounters"><a href="#MaxCounters" class="headerlink" title="MaxCounters"></a><a href="https://codility.com/demo/take-sample-test/max_counters" target="_blank" rel="external">MaxCounters</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Calculate the values of counters after applying all alternating operations: increase counter by 1; set value of all counters to current maximum.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N+M);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>The idea is to perform the specified operation as stated. It is not required to iterate over the whole array if a new value is set for all the values. Just save the value and check it when an increase on that position is performed.</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> MaxCounters;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">You are given N counters, initially set to 0, and you have two possible operations on them:</div><div class="line">increase(X) − counter X is increased by 1,</div><div class="line">max counter − all counters are set to the maximum value of any counter.</div><div class="line">A non-empty zero-indexed array A of M integers is given. This array represents consecutive operations:</div><div class="line">if A[K] = X, such that 1 ≤ X ≤ N, then operation K is increase(X),</div><div class="line">if A[K] = N + 1 then operation K is max counter.</div><div class="line">For example, given integer N = 5 and array A such that:</div><div class="line">    A[0] = 3</div><div class="line">    A[1] = 4</div><div class="line">    A[2] = 4</div><div class="line">    A[3] = 6</div><div class="line">    A[4] = 1</div><div class="line">    A[5] = 4</div><div class="line">    A[6] = 4</div><div class="line">the values of the counters after each consecutive operation will be:</div><div class="line">    (0, 0, 1, 0, 0)</div><div class="line">    (0, 0, 1, 1, 0)</div><div class="line">    (0, 0, 1, 2, 0)</div><div class="line">    (2, 2, 2, 2, 2)</div><div class="line">    (3, 2, 2, 2, 2)</div><div class="line">    (3, 2, 2, 3, 2)</div><div class="line">    (3, 2, 2, 4, 2)</div><div class="line">The goal is to calculate the value of every counter after all operations.</div><div class="line">Write a function:</div><div class="line">class Solution &#123; public int[] solution(int N, int[] A); &#125;</div><div class="line">that, given an integer N and a non-empty zero-indexed array A consisting of M integers, returns a sequence of integers representing the values of the counters.</div><div class="line">The sequence should be returned as:</div><div class="line">a structure Results (in C), or</div><div class="line">a vector of integers (in C++), or</div><div class="line">a record Results (in Pascal), or</div><div class="line">an array of integers (in any other programming language).</div><div class="line">For example, given:</div><div class="line">    A[0] = 3</div><div class="line">    A[1] = 4</div><div class="line">    A[2] = 4</div><div class="line">    A[3] = 6</div><div class="line">    A[4] = 1</div><div class="line">    A[5] = 4</div><div class="line">    A[6] = 4</div><div class="line">the function should return [3, 2, 2, 4, 2], as explained above.</div><div class="line">Assume that:</div><div class="line">N and M are integers within the range [1..100,000];</div><div class="line">each element of array A is an integer within the range [1..N + 1].</div><div class="line">Complexity:</div><div class="line">expected worst-case time complexity is O(N+M);</div><div class="line">expected worst-case space complexity is O(N), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] solution(<span class="keyword">int</span> N, <span class="keyword">int</span>[] A) &#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> M = A.length;</div><div class="line"></div><div class="line">        <span class="keyword">int</span>[] counters = <span class="keyword">new</span> <span class="keyword">int</span>[N];</div><div class="line">        <span class="keyword">int</span> current_max = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> baseline = <span class="number">0</span>; <span class="comment">// new starting point</span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &amp;lt; M; ++k) &#123;</div><div class="line">            <span class="keyword">if</span>(A[k] &amp;lt;= N) &#123;</div><div class="line">                counters[A[k]-<span class="number">1</span>] = Math.max(counters[A[k]-<span class="number">1</span>], baseline);</div><div class="line">                counters[A[k]-<span class="number">1</span>]++;</div><div class="line">                current_max = Math.max(counters[A[k]-<span class="number">1</span>], current_max);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                baseline = current_max;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            counters[i] = Math.max(counters[i], baseline);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> counters;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------------------test------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> N = <span class="number">5</span>;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">4</span>&#125;;</div><div class="line">        <span class="keyword">int</span>[] expected = &#123;<span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>&#125;;</div><div class="line"></div><div class="line">        <span class="keyword">int</span>[] actual = solution(N, A);</div><div class="line"></div><div class="line">        assertArrayEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="MissingInteger"><a href="#MissingInteger" class="headerlink" title="MissingInteger"></a><a href="https://codility.com/demo/take-sample-test/missing_integer" target="_blank" rel="external">MissingInteger</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the minimal positive integer not occurring in a given sequence.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>You only need to consider the first (N) positive integers. In this specification 0 does not count as a valid candidate! Any value that is below 1 or above N can be ignored.</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> MissingInteger;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">Write a function:</div><div class="line">class Solution &#123; public int solution(int[] A); &#125;</div><div class="line">that, given a non-empty zero-indexed array A of N integers, returns the minimal positive integer that does not occur in A.</div><div class="line">For example, given:</div><div class="line">  A[0] = 1</div><div class="line">  A[1] = 3</div><div class="line">  A[2] = 6</div><div class="line">  A[3] = 4</div><div class="line">  A[4] = 1</div><div class="line">  A[5] = 2</div><div class="line">the function should return 5.</div><div class="line">Assume that:</div><div class="line">N is an integer within the range [1..100,000];</div><div class="line">each element of array A is an integer within the range [−2,147,483,648..2,147,483,647].</div><div class="line">Complexity:</div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(N), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> N = A.length;</div><div class="line">        <span class="keyword">boolean</span>[] seen = <span class="keyword">new</span> <span class="keyword">boolean</span>[N+<span class="number">1</span>]; <span class="comment">// [0] ignored</span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i= <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(A[i] &amp;gt; <span class="number">0</span> &amp;amp;&amp;amp; A[i] &amp;lt;= N) &#123;</div><div class="line">                seen[A[i]] = <span class="keyword">true</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &amp;lt; N+<span class="number">1</span>; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(seen[i] == <span class="keyword">false</span>) <span class="keyword">return</span> i;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> N+<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------------------test------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">5</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;-<span class="number">2</span>, <span class="number">29</span>, -<span class="number">9</span>, <span class="number">0</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="Prefix-Sums-1"><a href="#Prefix-Sums-1" class="headerlink" title="Prefix Sums"></a>Prefix Sums</h4><h5 id="PassingCars"><a href="#PassingCars" class="headerlink" title="PassingCars"></a><a href="https://codility.com/demo/take-sample-test/passing_cars" target="_blank" rel="external">PassingCars</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count the number of passing cars on the road.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Count all cars heading in one direction (west). Each car heading the other direction (east) passes all cars that went west so far. Note that east cars at the beginning of the list pass no cars! Also do not forget the upper limit!</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> PassingCars;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A non-empty zero-indexed array A consisting of N integers is given. The consecutive elements of array A represent consecutive cars on a road.</div><div class="line"></div><div class="line">Array A contains only 0s and/or 1s:</div><div class="line"></div><div class="line">0 represents a car traveling east,</div><div class="line">1 represents a car traveling west.</div><div class="line">The goal is to count passing cars. We say that a pair of cars (P, Q), where 0 ≤ P &amp;lt; Q &amp;lt; N, is passing when P is traveling to the east and Q is traveling to the west.</div><div class="line"></div><div class="line">For example, consider array A such that:</div><div class="line"></div><div class="line">  A[0] = 0</div><div class="line">  A[1] = 1</div><div class="line">  A[2] = 0</div><div class="line">  A[3] = 1</div><div class="line">  A[4] = 1</div><div class="line">We have five pairs of passing cars: (0, 1), (0, 3), (0, 4), (2, 3), (2, 4).</div><div class="line"></div><div class="line">Write a function:</div><div class="line"></div><div class="line">class Solution &#123; public int solution(int[] A); &#125;</div><div class="line"></div><div class="line">that, given a non-empty zero-indexed array A of N integers, returns the number of pairs of passing cars.</div><div class="line"></div><div class="line">The function should return −1 if the number of pairs of passing cars exceeds 1,000,000,000.</div><div class="line"></div><div class="line">For example, given:</div><div class="line"></div><div class="line">  A[0] = 0</div><div class="line">  A[1] = 1</div><div class="line">  A[2] = 0</div><div class="line">  A[3] = 1</div><div class="line">  A[4] = 1</div><div class="line">the function should return 5, as explained above.</div><div class="line"></div><div class="line">Assume that:</div><div class="line"></div><div class="line">N is an integer within the range [1..100,000];</div><div class="line">each element of array A is an integer that can have one of the following values: 0, 1.</div><div class="line">Complexity:</div><div class="line"></div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(1), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> N = A.length;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> east_cars = <span class="number">0</span>; <span class="comment">//before current, how many cars head east?</span></div><div class="line">        <span class="keyword">int</span> cnt_passing = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N; ++i) &#123;</div><div class="line">            <span class="keyword">if</span>(A[i] == <span class="number">0</span>) &#123;</div><div class="line">                east_cars++;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                cnt_passing += east_cars;</div><div class="line">                <span class="keyword">if</span>(cnt_passing &amp;gt; <span class="number">1000000000</span>) <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> cnt_passing;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------------------test------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">5</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="GenomicRangeQuery"><a href="#GenomicRangeQuery" class="headerlink" title="GenomicRangeQuery"></a><a href="https://codility.com/demo/take-sample-test/genomic_range_query" target="_blank" rel="external">GenomicRangeQuery</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the minimal nucleotide from a range of sequence DNA.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N+M);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Remember the last position on which was the genome (A, C, G, T) was seen. If the distance between Q and P is lower than the distance to the last seen genome, we have found the right candidate.</p>
<p><strong>Solution:</strong></p>
<h5 id="MinAvgTwoSlice"><a href="#MinAvgTwoSlice" class="headerlink" title="MinAvgTwoSlice"></a><a href="https://codility.com/demo/take-sample-test/min_avg_two_slice" target="_blank" rel="external">MinAvgTwoSlice</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the minimal average of any slice containing at least two elements.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Every slice must be of size two or three. Slices of bigger sizes are created from such smaller slices. Therefore should any bigger slice have an optimal value, all sub-slices must be the same, for this case to hold true. Should this not be true, one of the sub-slices must be the optimal slice. The others being bigger. Therefore we check all possible slices of size 2/3 and return the smallest one. The first such slice is the correct one, do not use &lt;=!</p>
<p><strong>Solution:</strong><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> MinAvgTwoSlice;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">A non-empty zero-indexed array A consisting of N integers is given. A pair of integers (P, Q), such that 0 ≤ P &amp;lt; Q &amp;lt; N, is called a slice of array A (notice that the slice contains at least two elements). The average of a slice (P, Q) is the sum of A[P] + A[P + 1] + ... + A[Q] divided by the length of the slice. To be precise, the average equals (A[P] + A[P + 1] + ... + A[Q]) / (Q − P + 1).</div><div class="line">For example, array A such that:</div><div class="line">    A[0] = 4</div><div class="line">    A[1] = 2</div><div class="line">    A[2] = 2</div><div class="line">    A[3] = 5</div><div class="line">    A[4] = 1</div><div class="line">    A[5] = 5</div><div class="line">    A[6] = 8</div><div class="line">contains the following example slices:</div><div class="line">slice (1, 2), whose average is (2 + 2) / 2 = 2;</div><div class="line">slice (3, 4), whose average is (5 + 1) / 2 = 3;</div><div class="line">slice (1, 4), whose average is (2 + 2 + 5 + 1) / 4 = 2.5.</div><div class="line">The goal is to find the starting position of a slice whose average is minimal.</div><div class="line">Write a function:</div><div class="line">class Solution &#123; public int solution(int[] A); &#125;</div><div class="line">that, given a non-empty zero-indexed array A consisting of N integers, returns the starting position of the slice with the minimal average. If there is more than one slice with a minimal average, you should return the smallest starting position of such a slice.</div><div class="line">For example, given array A such that:</div><div class="line">    A[0] = 4</div><div class="line">    A[1] = 2</div><div class="line">    A[2] = 2</div><div class="line">    A[3] = 5</div><div class="line">    A[4] = 1</div><div class="line">    A[5] = 5</div><div class="line">    A[6] = 8</div><div class="line">the function should return 1, as explained above.</div><div class="line">Assume that:</div><div class="line">N is an integer within the range [2..100,000];</div><div class="line">each element of array A is an integer within the range [−10,000..10,000].</div><div class="line">Complexity:</div><div class="line">expected worst-case time complexity is O(N);</div><div class="line">expected worst-case space complexity is O(N), beyond input storage (not counting the storage required for input arguments).</div><div class="line">Elements of input arrays can be modified.</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"><span class="comment">// you can also use imports, for example:</span></div><div class="line"><span class="comment">// import java.util.*;</span></div><div class="line"></div><div class="line"><span class="comment">// you can use System.out.println for debugging purposes, e.g.</span></div><div class="line"><span class="comment">// System.out.println("this is a debug message");</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</div><div class="line">        <span class="comment">// write your code in Java SE 8</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> N = A.length;</div><div class="line">        <span class="keyword">int</span> min_start_index = <span class="number">0</span>;</div><div class="line">        <span class="keyword">double</span> min_average = Integer.MAX_VALUE;</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &amp;lt; N-<span class="number">1</span>; ++i) &#123;</div><div class="line">            <span class="keyword">double</span> avg = (A[i] + A[i+<span class="number">1</span>]) / <span class="number">2.0</span>;</div><div class="line">            <span class="keyword">if</span>(avg &amp;lt; min_average) &#123;</div><div class="line">                min_start_index = i;</div><div class="line">                min_average = avg;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(i+<span class="number">2</span> &amp;lt; N) &#123;</div><div class="line">                avg = (A[i] + A[i+<span class="number">1</span>] + A[i+<span class="number">2</span>]) / <span class="number">3.0</span>;</div><div class="line">                <span class="keyword">if</span>(avg &amp;lt; min_average) &#123;</div><div class="line">                    min_start_index = i;</div><div class="line">                    min_average = avg;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> min_start_index;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//-----------------------test------------------------------------</span></div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] A = &#123;<span class="number">4</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">8</span>&#125;;</div><div class="line">        <span class="keyword">int</span> expected = <span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> actual = solution(A);</div><div class="line"></div><div class="line">        assertEquals(expected, actual);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>&nbsp;</p>
<h5 id="CountDiv"><a href="#CountDiv" class="headerlink" title="CountDiv"></a><a href="https://codility.com/demo/take-sample-test/count_div" target="_blank" rel="external">CountDiv</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Compute number of integers divisible by k in range [a..b].</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(1);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>This little check required a bit of experimentation. One needs to start from the first valid value that is bigger than A and a multiply of K.</p>
<p><strong>Solution:</strong></p>
<h4 id="Sorting"><a href="#Sorting" class="headerlink" title="Sorting"></a>Sorting</h4><h5 id="Triangle"><a href="#Triangle" class="headerlink" title="Triangle"></a><a href="https://codility.com/demo/take-sample-test/triangle" target="_blank" rel="external">Triangle</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Determine whether a triangle can be built from a given set of edges.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N));</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>By sorting the array, we have guaranteed that P+R &lt; Q and Q+R &lt; P (because R is always the biggest). Now what remains, is the proof that P+Q &gt; R, that can be found out by traversing the array. The chance to find such a combination is with three adjacent values as they provide the highest P and Q.</p>
<p><strong>Solution:</strong></p>
<h5 id="Distinct"><a href="#Distinct" class="headerlink" title="Distinct "></a><a href="https://codility.com/demo/take-sample-test/distinct" target="_blank" rel="external">Distinct </a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Compute number of distinct values in an array.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N * log(N));</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Sorting in both C++ and Python takes N log N time. We know that for this particular problem sorting the array will be the dominant runtime complexity. This is the case for the second python solution. What about the other ones?</p>
<p>The first solution is a neat pythonic way of solving a distinct entries problem. The set is implemented as a hash table so it is possible that it will degrade to a linked list. Therefore the actual worst case would be N^2.</p>
<p>This is not the case with C++ (as code 3 shows). The std set is a Red-Black Tree and therefore has insertion complexity of log N. (overall N log N)</p>
<p><strong>Solution:</strong></p>
<h5 id="MaxProductOfThree"><a href="#MaxProductOfThree" class="headerlink" title="MaxProductOfThree"></a><a href="https://codility.com/demo/take-sample-test/max_product_of_three" target="_blank" rel="external">MaxProductOfThree</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Maximize A[P] <em> A[Q] </em> A[R] for any triplet (P, Q, R).</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N));</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>After sorting the largest product can be found as a combination of the last three elements. Additionally, two negative numbers add to a positive, so by multiplying the two largest negatives with the largest positive, we get another candidate. If all numbers are negative, the three largest (closest to 0) still get the largest element!</p>
<p><strong>Solution:</strong></p>
<h5 id="NumberOfDiscIntersections"><a href="#NumberOfDiscIntersections" class="headerlink" title="NumberOfDiscIntersections"></a>NumberOfDiscIntersections</h5><h4 id="Stacks-and-Queues"><a href="#Stacks-and-Queues" class="headerlink" title="Stacks and Queues"></a>Stacks and Queues</h4><h5 id="Brackets"><a href="#Brackets" class="headerlink" title="Brackets"></a><a href="https://codility.com/demo/take-sample-test/brackets" target="_blank" rel="external">Brackets</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Determine whether a given string of parentheses is properly nested.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Put every opening bracket on a stack. If a closing bracket is not the same as the top stack bracket, the string is not properly nested.</p>
<p><strong>Solution:</strong></p>
<h5 id="Nesting"><a href="#Nesting" class="headerlink" title="Nesting"></a><span style="text-decoration: underline;">Nesting</span></h5><p><strong>Short Problem Definition:</strong></p>
<p>Determine whether given string of parentheses is properly nested.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Because there is only one type of brackets, the problem is easier than <a href="http://www.martinkysel.com/codility-brackets-solution/" title="Codility ‘Brackets’ Solution" target="_blank" rel="external">Brackets</a>. Just check if there is always a opening bracket before a closing one.</p>
<h5 id="StoneWall"><a href="#StoneWall" class="headerlink" title="StoneWall"></a><a href="https://codility.com/demo/take-sample-test/stone_wall" target="_blank" rel="external">StoneWall</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Cover “Manhattan skyline” using the minimum number of rectangles.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>The explanation to this challenge has been posted on the Codility web, you can read it <a href="http://blog.codility.com/2012/06/sigma-2012-codility-programming.html" target="_blank" rel="external">here</a>.</p>
<p><strong>Solution:</strong></p>
<h5 id="Fish"><a href="#Fish" class="headerlink" title="Fish"></a><a href="https://codility.com/demo/take-sample-test/fish" target="_blank" rel="external">Fish</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>N voracious fish are moving along a river. Calculate how many fish are alive.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Put all downstream swimming fishes on a stack. Any upstream swimming fish has to fight(eat) all fishes on the stack. If there is no fish on the stack, the fish survives. If the stack has some downstream fishes at the end, they also survive.</p>
<p><strong>Solution:</strong></p>
<h4 id="Leader"><a href="#Leader" class="headerlink" title="Leader"></a>Leader</h4><h5 id="Dominator"><a href="#Dominator" class="headerlink" title="Dominator"></a><a href="https://codility.com/demo/take-sample-test/dominator" target="_blank" rel="external">Dominator</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find an index of an array such that its value occurs at more than half of indices in the array.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>As explained in the training material…</p>
<p><strong>Solution:</strong></p>
<h5 id="EquiLeader"><a href="#EquiLeader" class="headerlink" title="EquiLeader"></a><a href="https://codility.com/demo/take-sample-test/equi_leader" target="_blank" rel="external">EquiLeader</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the index S such that the leaders of the sequences A[0], A[1], …, A[S] and A[S + 1], A[S + 2], …, A[N – 1] are the same.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Get the leader as in the training material. Afterwards check every position if both sides have enough leader occurrences.</p>
<p><strong>Solution:</strong></p>
<h4 id="Maximum-Slice-Problem"><a href="#Maximum-Slice-Problem" class="headerlink" title="Maximum Slice Problem"></a>Maximum Slice Problem</h4><h5 id="MaxProfit"><a href="#MaxProfit" class="headerlink" title="MaxProfit"></a><a href="https://codility.com/demo/take-sample-test/max_profit" target="_blank" rel="external">MaxProfit</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Given a log of stock prices compute the maximum possible earning.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Keep the minimal value up to day. The profit on day i is_ profit[i] – min<em>profit</em>.</p>
<p><strong>Solution:</strong></p>
<h5 id="MaxSliceSum"><a href="#MaxSliceSum" class="headerlink" title="MaxSliceSum"></a><a href="https://codility.com/demo/take-sample-test/max_slice_sum" target="_blank" rel="external">MaxSliceSum</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find a maximum sum of a compact subsequence of array elements.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>The only difference to the example given by Codility is the minimal slice length, which is 1.</p>
<p><strong>Solution:</strong></p>
<h5 id="MaxDoubleSliceSum"><a href="#MaxDoubleSliceSum" class="headerlink" title="MaxDoubleSliceSum"></a><a href="https://codility.com/demo/take-sample-test/max_double_slice_sum" target="_blank" rel="external">MaxDoubleSliceSum</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the maximal sum of any double slice.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>To solve this task, you need to keep track of two slice arrays. The optimal double slice can be found at an index that has the maximal sum of those two arrays. It can not be the 0th or the last index.</p>
<p><strong>Solution:</strong></p>
<h4 id="Prime-and-composite-numbers"><a href="#Prime-and-composite-numbers" class="headerlink" title="Prime and composite numbers"></a>Prime and composite numbers</h4><h5 id="MinPerimeterRectangle"><a href="#MinPerimeterRectangle" class="headerlink" title="MinPerimeterRectangle"></a><a href="https://codility.com/demo/take-sample-test/min_perimeter_rectangle" target="_blank" rel="external">MinPerimeterRectangle</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the minimal perimeter of any rectangle whose area equals N.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(sqrt(N));</li>
<li>expected worst-case space complexity is O(1).<br><strong>Execution:</strong></li>
</ul>
<p>Trivial search for the largest prime.</p>
<h5 id="CountFactors"><a href="#CountFactors" class="headerlink" title="CountFactors"></a><a href="https://codility.com/demo/take-sample-test/count_factors" target="_blank" rel="external">CountFactors</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count factors of given number N.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(sqrt(N));</li>
<li>expected worst-case space complexity is O(1).<br><strong>Execution:</strong></li>
</ul>
<p>This example can be found in the lesson document.</p>
<h5 id="Peaks"><a href="#Peaks" class="headerlink" title="Peaks"></a><a href="https://codility.com/demo/take-sample-test/peaks" target="_blank" rel="external">Peaks</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>A non-empty zero-indexed array A consisting of N integers is given. A peak is an array element which is larger than its neighbors.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(log(N)));</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>I first compute all peaks. Because each block must contain a peak I start from the end and try to find a integral divisor sized block. If each block contains a peak I return the size.</p>
<p><strong>Solution:</strong></p>
<h5 id="Flags"><a href="#Flags" class="headerlink" title="Flags"></a><span style="text-decoration: underline;">Flags</span></h5><h4 id="Sieve-or-Eratosthenes"><a href="#Sieve-or-Eratosthenes" class="headerlink" title="Sieve or Eratosthenes"></a>Sieve or Eratosthenes</h4><h5 id="CountSemiprimes"><a href="#CountSemiprimes" class="headerlink" title="CountSemiprimes"></a><a href="https://codility.com/demo/take-sample-test/count_semiprimes" target="_blank" rel="external">CountSemiprimes</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count the semiprime numbers in the given range [a..b]</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(log(N))+M);</li>
<li>expected worst-case space complexity is O(N+M)<br><strong>Execution:</strong></li>
</ul>
<p>First get all semiprimes from an adaptation of the Sieve of Eratosthenes. Because we will be computing the difference many times a prefix sum is adequate. Get the number of semiprimes up to the point. The index P is decreased by 1 because we want to know all primes that start from P.</p>
<p><strong>Solution:</strong></p>
<h5 id="CountNonDivisible"><a href="#CountNonDivisible" class="headerlink" title="CountNonDivisible"></a><a href="https://codility.com/demo/take-sample-test/count_non_divisible" target="_blank" rel="external">CountNonDivisible</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Calculate the number of elements of an array that are not divisors of each element.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N));</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Using the Sieve of Eratosthenes, you generate divisors for all input elements of A. If a given number x is a divisor of element <em>(x*N == element)</em>, then N also is a divisor. <em>(N = element//x).</em> After all divisors are computed, we simply subtract those (multiplied by their counts or 0) from the total number of elements in A.</p>
<p><strong>Solution:</strong></p>
<h4 id="Euclidean-Algorithm"><a href="#Euclidean-Algorithm" class="headerlink" title="Euclidean Algorithm"></a>Euclidean Algorithm</h4><h5 id="ChocolatesByNumbers"><a href="#ChocolatesByNumbers" class="headerlink" title="ChocolatesByNumbers"></a><a href="https://codility.com/demo/take-sample-test/chocolates_by_numbers" target="_blank" rel="external">ChocolatesByNumbers</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>There are N chocolates in a circle. Count the number of chocolates you will eat.</p>
<p>&nbsp;</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(log(N+M));</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>N and M meet at their least common multiply. Dividing this LCM by M gets the number of steps(chocolates) that can be eaten.</p>
<p><strong>Solution:</strong></p>
<h5 id="CommonPrimeDivisors"><a href="#CommonPrimeDivisors" class="headerlink" title="CommonPrimeDivisors"></a><a href="https://codility.com/demo/take-sample-test/common_prime_divisors" target="_blank" rel="external">CommonPrimeDivisors</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Check whether two numbers have the same prime divisors.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(Z*log(max(A)+max(B))<sup>2</sup>);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>I will post an explaining image soon!</p>
<p><strong>Solution:</strong></p>
<h4 id="Fibonacci-Numbers"><a href="#Fibonacci-Numbers" class="headerlink" title="Fibonacci Numbers"></a>Fibonacci Numbers</h4><h5 id="FibFrog"><a href="#FibFrog" class="headerlink" title="FibFrog"></a><a href="https://codility.com/demo/take-sample-test/fib_frog" target="_blank" rel="external">FibFrog</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count the minimum number of jumps required for a frog to get to the other side of a river.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N))</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>This problem can be solved by in a Dynamic Programming way. You need to know the optimal count of jumps that can reach a given leaf. You get those by either reaching the leaf from the first shore or by reaching it from another leaf.</p>
<p>The N*log(N) time complexity is given by the fact, that there are approximately log(N) Fibonacci numbers up to N and you visit each position once.</p>
<p>As for the sequence hack: there are 26 Fibonacci numbers smaller than 100k, so I just preallocate an array of this size.</p>
<p><strong>Solution:</strong></p>
<h5 id="Ladder"><a href="#Ladder" class="headerlink" title="Ladder"></a><a href="https://codility.com/demo/take-sample-test/ladder" target="_blank" rel="external">Ladder</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count the number of different ways of climbing to the top of a ladder.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(L)</li>
<li>expected worst-case space complexity is O(L)<br><strong>Execution:</strong></li>
</ul>
<p>We first compute the Fibonacci sequence for the first L+2 numbers. The first two numbers are used only as fillers, so we have to index the sequence as A[idx]+1 instead of A[idx]-1. The second step is to replace the modulo operation by removing all but the n lowest bits. A discussion can be found on <a href="http://stackoverflow.com/a/6670766" title="Mod of power 2" target="_blank" rel="external">Stack Overflow</a>.</p>
<p><strong>Solution:</strong></p>
<h4 id="Binary-Search"><a href="#Binary-Search" class="headerlink" title="Binary Search"></a>Binary Search</h4><h5 id="MinMaxDivision"><a href="#MinMaxDivision" class="headerlink" title="MinMaxDivision"></a><a href="https://codility.com/demo/take-sample-test/min_max_division" target="_blank" rel="external">MinMaxDivision</a></h5><h5 id="Short-Problem-Definition"><a href="#Short-Problem-Definition" class="headerlink" title="Short Problem Definition:"></a>Short Problem Definition:</h5><p>Divide array A into K blocks and minimize the largest sum of any block.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N+M));</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Binary search for the minimal size of a block. A valid block can be checked in a boolean fashion. Two special cases can be sped up (courtesy to <a href="http://codesays.com/2014/solution-to-min-max-division-by-codility/" target="_blank" rel="external">CodeSays</a>). At the time of writing (19.9.2014) do not use the variable passed to the solution function as M! It is NOT the maximum element in the test cases! The specification says, that no element is larger than M, yet there is not guarantee that M == max(A).</p>
<p><strong>Solution:</strong></p>
<h5 id="NailingPlanks"><a href="#NailingPlanks" class="headerlink" title="NailingPlanks"></a><a href="https://codility.com/demo/take-sample-test/nailing_planks" target="_blank" rel="external">NailingPlanks</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count the minimum number of nails that allow a series of planks to be nailed..</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O((N+M)*log(M));</li>
<li>expected worst-case space complexity is O(M)<br><strong>Execution:</strong></li>
</ul>
<p>The solution gets 100/100, but I am skeptical. The runtime is rather O(N <em> (log(M)+M)) than O((N+M)</em>log(M)).  Maybe it can be proven that the execution of the linear scan will never have to scan all possible positions. I also violate the space complexity by creating a copy of A+B.</p>
<p><strong>Solution:</strong></p>
<h4 id="Caterpillar-method-1"><a href="#Caterpillar-method-1" class="headerlink" title="Caterpillar method"></a>Caterpillar method</h4><h5 id="AbsDistinct"><a href="#AbsDistinct" class="headerlink" title="AbsDistinct"></a><a href="https://codility.com/demo/take-sample-test/abs_distinct" target="_blank" rel="external">AbsDistinct</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Compute number of distinct absolute values of sorted array elements.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Additional storage is allowed. Therefore a simple python solution will suffice.</p>
<p><strong>Solution:</strong></p>
<h5 id="CountDistinctSlices"><a href="#CountDistinctSlices" class="headerlink" title="CountDistinctSlices"></a><a href="https://codility.com/demo/take-sample-test/count_distinct_slices" target="_blank" rel="external">CountDistinctSlices</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Count the number of distinct slices (containing only unique numbers).</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(M)<br><strong>Execution:</strong></li>
</ul>
<p>Using the caterpillar method I expand the caterpillar to the right as long as a duplicate element is found. The right side has to retract as long as this duplicate element has been eliminated from the next slice. An observation showed that the number of sub-slices is equal to front-back+1.</p>
<p><strong>Solution:</strong></p>
<h5 id="CountTriangles"><a href="#CountTriangles" class="headerlink" title="CountTriangles"></a><a href="https://codility.com/demo/take-sample-test/count_triangles" target="_blank" rel="external">CountTriangles</a></h5><p><strong>Short Problem Definition:</strong></p>
<p><span class="task-synopsis">Count the number of triangles that can be built from a given set of edges.</span></p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N<sup>2</sup>);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Apply the caterpillar method. We know that in a sorted array every position between Q and R will be bigger than Q and therefore P+Q will be bigger than R. I therefore either increment Q if P+Q is not larger than R or increment R as far as possible.</p>
<p><strong>Solution:</strong></p>
<h5 id="MinAbsSumOfTwo"><a href="#MinAbsSumOfTwo" class="headerlink" title="MinAbsSumOfTwo"></a><a href="https://codility.com/demo/take-sample-test/min_abs_sum_of_two" target="_blank" rel="external">MinAbsSumOfTwo</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find the minimal absolute value of a sum of two elements.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N));</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>Using the caterpillar method on a sorted list.</p>
<p><strong>Solution:</strong></p>
<h4 id="Greedy-algorithms-1"><a href="#Greedy-algorithms-1" class="headerlink" title="Greedy algorithms"></a>Greedy algorithms</h4><h5 id="TieRopes"><a href="#TieRopes" class="headerlink" title="TieRopes"></a><a href="https://codility.com/demo/take-sample-test/tie_ropes" target="_blank" rel="external">TieRopes</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Tie adjacent ropes to achieve the maximum number of ropes of length &gt;= K.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>I am a bit skeptical about the correctness of my solution. It gets 100/100 through…</p>
<p><strong>Solution:</strong></p>
<h5 id="MaxNonoverlappingSegments"><a href="#MaxNonoverlappingSegments" class="headerlink" title="MaxNonoverlappingSegments"></a><a href="https://codility.com/demo/take-sample-test/max_nonoverlapping_segments" target="_blank" rel="external">MaxNonoverlappingSegments</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find a maximal set of non((-))overlapping segments.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N)</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>This can be solved by using greedy search. The beginning of the next segment must come strictly after its predecessor.</p>
<p><strong>Solution:</strong></p>
<h4 id="Dynamic-Programming"><a href="#Dynamic-Programming" class="headerlink" title="Dynamic Programming"></a>Dynamic Programming</h4><h5 id="NumberSolitaire"><a href="#NumberSolitaire" class="headerlink" title="NumberSolitaire"></a><a href="https://codility.com/demo/take-sample-test/number_solitaire" target="_blank" rel="external">NumberSolitaire</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>In a given array, find the subset of maximal sum in which the distance between consecutive elements is at most 6.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Prototypical Dynamic Programming. Remember all sub-solutions and use them to compute the next step. I prefixed the array by 6 min_values to use the same computation for the whole algorithm (besides the first). Do not forget to set the minimal_value small enough to handle a purely negative input array.</p>
<p><strong>Solution:</strong></p>
<h5 id="MinAbsSum"><a href="#MinAbsSum" class="headerlink" title="MinAbsSum"></a><span style="text-decoration: underline;"><span style="line-height: 1.5;">MinAbsSum</span></span></h5><h4 id="Future-Training"><a href="#Future-Training" class="headerlink" title="Future Training"></a>Future Training</h4><h5 id="BinaryGap"><a href="#BinaryGap" class="headerlink" title="BinaryGap"></a><a href="https://codility.com/demo/take-sample-test/binary_gap" target="_blank" rel="external">BinaryGap</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find longest sequence of zeros in binary representation of an integer.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(log(N));</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>The solution is straight-forward! Use of binary shift.</p>
<p><strong>Solution:</strong></p>
<h5 id="StrSymmetryPoint"><a href="#StrSymmetryPoint" class="headerlink" title="StrSymmetryPoint"></a><a href="https://codility.com/demo/take-sample-test/str_symmetry_point" target="_blank" rel="external">StrSymmetryPoint</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find a symmetry point of a string, if any.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(length(S));</li>
<li>expected worst-case space complexity is O(1) (not counting the storage required for input arguments).<br><strong>Execution:</strong></li>
</ul>
<p>This problem gave me a lot of headache. It is so trivial I that over-complicated it. I thought that you should find a symmetry point at any possible position, ignoring the residual characters. You would obviously try to maximize the length of this symmetrical sub-array. I was not able to come with any O(S) algorithm for this problem derivation. So just to remind you,<strong> this problem is a simple palindrome check</strong>. Additionally, you drop all evenly sized strings as their symmetry point is between the indexes.</p>
<p><strong>Solution:</strong></p>
<h5 id="OddOccurencesInArray"><a href="#OddOccurencesInArray" class="headerlink" title="OddOccurencesInArray"></a><a href="https://codility.com/demo/take-sample-test/odd_occurrences_in_array" target="_blank" rel="external">OddOccurencesInArray</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Find value that occurs in odd number of elements.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(1)<br><strong>Execution:</strong></li>
</ul>
<p>This problem can be found in many algorithm books. A xor A cancels itself and B xor 0 is B. Therefore A xor A xor B xor C xor C is B.</p>
<p><strong>Solution:</strong></p>
<h5 id="TreeHeight"><a href="#TreeHeight" class="headerlink" title="TreeHeight"></a><a href="https://codility.com/demo/take-sample-test/tree_height" target="_blank" rel="external">TreeHeight</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Compute the height of a binary link-tree.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N);</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>The height of a tree is the maximal height +1 of its subtrees. In this specification a tree with just the root node has a height of 0.</p>
<p><strong>Solution:</strong></p>
<h5 id="ArrayInversionCount"><a href="#ArrayInversionCount" class="headerlink" title="ArrayInversionCount"></a><a href="https://codility.com/demo/take-sample-test/array_inversion_count" target="_blank" rel="external">ArrayInversionCount</a></h5><p><strong>Short Problem Definition:</strong></p>
<p>Compute number of inversion in an array.</p>
<p><strong>Complexity:</strong></p>
<ul>
<li>expected worst-case time complexity is O(N*log(N));</li>
<li>expected worst-case space complexity is O(N)<br><strong>Execution:</strong></li>
</ul>
<p>Any sorting algorithm with a NlogN runtime will do the trick. It is important to count all (remaining) bigger elements on the left side. Do not forget to check for the maximal return value!</p>
<p><strong>Solution:</strong></p>
<h4 id="Challenges"><a href="#Challenges" class="headerlink" title="Challenges"></a>Challenges</h4><ul>
<li><a href="http://www.martinkysel.com/codility-sqlsegmentssum-kalium-2015-solution/" target="_blank" rel="external">Kalium 2015 – SqlSegmentsSum</a></li>
<li>Boron 2013 – Flags</li>
<li><a href="http://www.martinkysel.com/codility-wireburnouts-2012-psi-solution/" title="Codility ‘WireBurnouts’ 2012 Psi Solution" target="_blank" rel="external">Psi 2012 – Wire Burnouts</a></li>
<li><a href="http://www.martinkysel.com/codility-cannonballs-2012-chi-solution/" target="_blank" rel="external">Chi 2012 – Cannon Balls</a></li>
<li><a href="http://www.martinkysel.com/codility-stonewall-solution/" title="Codility ‘StoneWall’ Solution" target="_blank" rel="external">Sigma 2012 – StoneWall</a></li>
<li>Delta 2011 – MinAbsSum</li>
<li><a href="http://www.martinkysel.com/codility-number-of-disc-intersections-2010-beta-solution/" target="_blank" rel="external">Beta 2010 – NumberOfDiscIntersections</a></li>
<li><a href="http://www.martinkysel.com/codility-prefixset-2010-alpha-solution/" title="Codility ‘PrefixSet’ 2010 Alpha Solution" target="_blank" rel="external">Alpha 2010 – PrefixSet</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://qph.is.quoracdn.net/main-thumb-27403014-200-azcnfpakpayhgojvmueqcfjeyufbjpcx.jpeg"
               alt="Richard Yang" />
          <p class="site-author-name" itemprop="name">Richard Yang</p>
          <p class="site-description motion-element" itemprop="description">Nothing seek, nothing find</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">131</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">48</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://linkedin.com/in/richdyang" target="_blank" title="Linkedin">
                  
                    <i class="fa fa-fw fa-linkedin"></i>
                  
                  Linkedin
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://github.com/richdyang" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-github-alt"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://bitbucket.org/richdyang" target="_blank" title="Bitbucket">
                  
                    <i class="fa fa-fw fa-bitbucket"></i>
                  
                  Bitbucket
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://stackoverflow.com/users/4344443/richard" target="_blank" title="Stackoverflow">
                  
                    <i class="fa fa-fw fa-stack-overflow"></i>
                  
                  Stackoverflow
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://twitter.com/richdyang" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Richard Yang</span>
</div>

<!--div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div-->

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'richyang';
      var disqus_identifier = 'page/4/index.html';
      var disqus_title = '';

      function run_disqus_script(disqus_script) {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');

      

    </script>
  




  
  

  

  

  
  

  
  
  
  <link rel="stylesheet" href="/vendors/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/vendors/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.0"></script>



</body>
</html>
