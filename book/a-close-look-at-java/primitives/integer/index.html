<!DOCTYPE HTML>
<html lang="en-us">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
    <title> - Chao Yang</title>
    <meta name="keywords" content="Java, Programming, Android, JavaScript, Angular, Kotlin, Swift, iOS, Machine Learning, Big Data">
    
    <meta property="og:title" content="">
    <meta property="og:site_name" content="Chao Yang">
    <meta property="og:image" content="/img/author.jpg"> 
    <meta name="title" content=" - Chao Yang" />
    <meta name="description" content="A Developer in New Zealand"> 
    
    <link rel="shortcut icon" href="http://yangchao.me/img/favicon.ico" />
    <link rel="apple-touch-icon" href="http://yangchao.me/img/apple-touch-icon.png" />
    <link rel="apple-touch-icon-precomposed" href="http://yangchao.me/img/apple-touch-icon.png" />
    <link href="http://yangchao.me/js/vendor/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />
    <link href="http://yangchao.me/js/vendor/fancybox/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />
    <link href="http://yangchao.me/css/main.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
     fancybox: true, 
    motion: true
  };
</script>
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/kotlin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/swift.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/typescript.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
<div class="container one-collumn sidebar-position-left page-home  ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-meta  custom-logo ">

  <div class="custom-logo-site-title">
    <a href="http://yangchao.me/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Chao Yang</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Nothing seek, nothing find</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
    <ul id="menu" class="menu">
      
      
        <li class="menu-item ">
          <a href="http://yangchao.me/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://yangchao.me/books" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />Minibooks
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="https://github.com/richdyang" rel="section">
              <i class="menu-item-icon fa fa-fw fa-code"></i> <br />Projects
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://yangchao.me/resume/cv.pdf" rel="section">
              <i class="menu-item-icon fa fa-fw fa-linkedin"></i> <br />Résumé
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://yangchao.me/post/index.html" rel="section">
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archive
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://yangchao.me/about/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />About
          </a>
        </li>
      
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger"> <i class="menu-item-icon fa fa-search fa-fw"></i> <br /> Search</a>
      </li>
    </ul>
    <div class="site-search">
      <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>

    </div>
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
<section id="posts" class="posts-expand">
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://yangchao.me/book/a-close-look-at-java/primitives/integer/" itemprop="url">
        
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">Published at:</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="0001-01-01">
    0001-01-01
</time>
</span> 
      
       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">Reading:</span>
<span class="leancloud-visitors-count">1472 words ~7min</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    

<p>I don&rsquo;t know if only I feel we become farther away from the machine when using Java. But that&rsquo;s not the truth. Once we need to think of how some more &ldquo;advanced&rdquo; things happen, we cannot bypass it. So getting clear about the mechanism of these underlying representation will help us develop more confidently.</p>

<p>Some people complain that Java is not a pure object-oriented language, because it provides primitives types and they seems to be not well suitable to other features, like generics. But these primitives provide another choice when you just focus on efficiently doing some pure computation in byte or bit level and considering memory overhead in some high performance environment.</p>

<blockquote>
<p>Take an example, when we use the wrapper type as the key of a <code>HashMap</code>, the utilization radio of memory is literally low when we consider the object header of the wrapper object.</p>
</blockquote>

<h3 id="integral-type">integral type</h3>

<p>I believe every Java programmer know integral types are <code>byte</code>, <code>short</code>, <code>int</code>, and <code>long</code>, whose values are 8-bit, 16-bit, 32-bit and 64-bit signed two&rsquo;s-complement integers, respectively, and <code>char</code>, whose values are 16-bit unsigned integers representing UTF-16 code units.</p>

<h4 id="signed-two-s-complement">signed two&rsquo;s complement</h4>

<p>We will take the bit-level representation of <code>byte</code> to intuitively explain what&rsquo;s signed two&rsquo;s complement integer.</p>

<p>In two&rsquo;s complement notation, a non-negative number is represented by its ordinary binary representation with the most significant bit of 0 (aka. sign bit); negative numbers are represented by the two&rsquo;s complement of the absolute value except the most negative number.</p>

<p>For positive: (1 ~ 127)</p>

<table>
<thead>
<tr>
<th align="left">Binary value</th>
<th align="left">Two&rsquo;s complement interpretation</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><strong>0</strong>0000001</td>
<td align="left">1</td>
</tr>

<tr>
<td align="left"><strong>0</strong>0000010</td>
<td align="left">2</td>
</tr>

<tr>
<td align="left">&hellip;</td>
<td align="left">&hellip;</td>
</tr>

<tr>
<td align="left"><strong>0</strong>1111110</td>
<td align="left">126</td>
</tr>

<tr>
<td align="left"><strong>0</strong>1111111</td>
<td align="left">127</td>
</tr>
</tbody>
</table>

<p>For negative: (-1 ~ -127)</p>

<table>
<thead>
<tr>
<th align="left">Binary value</th>
<th align="left">Two&rsquo;s complement interpretation</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><strong>1</strong>0000001</td>
<td align="left">-127</td>
</tr>

<tr>
<td align="left"><strong>1</strong>0000010</td>
<td align="left">-126</td>
</tr>

<tr>
<td align="left">&hellip;</td>
<td align="left">&hellip;</td>
</tr>

<tr>
<td align="left"><strong>1</strong>1111110</td>
<td align="left">-2</td>
</tr>

<tr>
<td align="left"><strong>1</strong>1111111</td>
<td align="left">-1</td>
</tr>
</tbody>
</table>

<p>The positive representation is very intuitive, now let&rsquo;s see how to get the negative representation:</p>

<p>For -127, firstly we get its absolute value 127&rsquo;s binary:  <strong>0</strong>1111111, and then make an additive inverse: <strong>1</strong>0000000 + 1 = <strong>1</strong>0000001. That&rsquo;s it!</p>

<p>But what if -128 and 0? This is the most negative number, which is the exception. Its binary representation is <strong>1</strong>000000. You cannot apply the additive inverse to get its positive, because if that, the result is the same as itself. This feature is just like 0. You even can think of the -128 just like -0 in mathematics where two 0 can exist.</p>

<ul>
<li><strong>0</strong>000000 additive inverse: <strong>1</strong>1111111 + 1 = <strong>0</strong>0000000</li>
<li><strong>1</strong>000000 additive inverse: <strong>0</strong>1111111 + 1 = <strong>1</strong>0000000</li>
</ul>

<h4 id="what-re-the-pitfalls">what&rsquo;re the pitfalls</h4>

<p>Obviously, it can form a cycle like the following figure. This can make the machine always do computations without any complaint about overflow and convert subtraction into addition operations, but it&rsquo;s error prone from the programmer&rsquo;s perspective.</p>

<p><img src="http://yangchao.me/assets/unsigned-two-complement.png" alt="" /></p>

<p>The dangerous region is 127 to -128: one is the most positive and another is the most negative. That&rsquo;s where the overflow and underflow happen.</p>

<ul>
<li>127  + 1  -&gt; -128</li>
<li>-128 - 1  -&gt; 127</li>
</ul>

<p>Now a small quiz is for you:</p>

<blockquote>
<p>How do you print all the <code>byte</code> values?</p>
</blockquote>

<p>The solution firstly coming to you mind may be like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="k">for</span><span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">=</span> <span class="n">Byte</span><span class="o">.</span><span class="na">MIN_VALUE</span><span class="o">;</span> <span class="n">b</span> <span class="o">&lt;=</span> <span class="n">Byte</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">;</span> <span class="o">++</span><span class="n">b</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">b</span> <span class="o">+</span> <span class="s">&#34;: &#34;</span> <span class="o">+</span> <span class="n">BinaryUtil</span><span class="o">.</span><span class="na">binary</span><span class="o">(</span><span class="n">b</span><span class="o">));</span>
<span class="o">}</span></code></pre></div>
<p>Oops! You make a dead loop now. Instead, the following code works.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// this one works
</span><span class="c1"></span><span class="k">for</span><span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">=</span> <span class="n">Byte</span><span class="o">.</span><span class="na">MIN_VALUE</span><span class="o">;;</span> <span class="o">++</span><span class="n">b</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">b</span> <span class="o">+</span> <span class="s">&#34;: &#34;</span> <span class="o">+</span> <span class="n">BinaryUtil</span><span class="o">.</span><span class="na">binary</span><span class="o">(</span><span class="n">b</span><span class="o">));</span>
  <span class="k">if</span><span class="o">(</span><span class="n">b</span> <span class="o">==</span> <span class="n">Byte</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
<span class="o">}</span></code></pre></div>
<p>But this works just when the step is 1. When we go ahead the value with a step of 2 or more, a careful solution has to be think of.</p>

<blockquote>
<p>Guess the result of Math.abs(Integer.MIN_VALUE)? It is still Integer.MIN_VALUE. What!! An absolute is a negative!</p>
</blockquote>

<h1 id="bitwise-and-bit-shift">bitwise and bit shift</h1>

<p>These bitwise operations are usually very useful when resolving some kinds of algorithms.</p>

<h1 id="bitwise">bitwise</h1>

<ul>
<li>complement: <code>~</code></li>
<li>AND: <code>&amp;</code></li>
<li>inclusive OR: <code>|</code></li>
<li>exclusive OR: <code>^</code></li>
</ul>

<p>Some cases:
- set bit: <code>| 1</code>
- clear bit: <code>&amp; 0</code>
- toggle/flip bit: <code>^ 1</code>
- keep unchanged: <code>&amp; 1</code>   or <code>| 0</code>  or <code>^ 0</code></p>

<p>You can combine them:</p>

<ul>
<li><code>word | (1L &lt;&lt; bit)</code>: set bit</li>
<li><code>word &amp; ~(1L &lt;&lt; bit)</code>: clear bit</li>
<li><code>word ^ (1L &lt;&lt; bit)</code>: flip bit</li>
</ul>

<p><code>1L</code> and <code>-1L</code> are most common to be used with bit shift operations.</p>

<ul>
<li><code>1L</code>  =&gt; only last bit is 1</li>
<li><code>-1L</code> =&gt; all bits are 1</li>
</ul>

<h2 id="xor">XOR *</h2>

<p>Exclusive OR is extremely useful in computer science.
- It tells whether two bits are unequal.
- It is an optional bit-flipper (the deciding input chooses whether to invert the data input).
- It tells whether there is an odd number of 1 bits (A ^ B ^ C ^ D ^ E)true if an odd number of the variables are true).</p>

<pre><code>A ^ 0 = A
A ^ A = 0
A ^ B = B ^ A
(A ^ B) ^ C = A ^ (B ^ C)
(B ^ A) ^ A = B
A ^ B ^ A = (A ^ B) ^ A = A ^ (A ^ B) = (A ^ A) ^ B = B
</code></pre>

<h3 id="cipher">cipher</h3>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">String</span> <span class="nf">encode</span><span class="o">(</span><span class="n">String</span> <span class="n">str</span><span class="o">,</span> <span class="kt">int</span> <span class="n">cipher</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">char</span><span class="o">[]</span> <span class="n">chars</span> <span class="o">=</span> <span class="n">str</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">chars</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">chars</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span> <span class="o">(</span><span class="n">cipher</span> <span class="o">^</span> <span class="n">chars</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">chars</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="n">String</span> <span class="nf">decode</span><span class="o">(</span><span class="n">String</span> <span class="n">encodedStr</span><span class="o">,</span> <span class="kt">int</span> <span class="n">cipher</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">encode</span><span class="o">(</span><span class="n">encodedStr</span><span class="o">,</span> <span class="n">cipher</span><span class="o">);</span>
<span class="o">}</span></code></pre></div>
<h3 id="xor-swap">XOR swap</h3>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">swap</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">a</span> <span class="o">^=</span> <span class="n">b</span><span class="o">;</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">^</span> <span class="n">b</span><span class="o">;</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">b</span> <span class="o">^</span> <span class="n">a</span><span class="o">;</span>
<span class="o">}</span></code></pre></div>
<h3 id="xor-linked-list">XOR linked list</h3>

<h1 id="shift">shift</h1>

<ul>
<li>signed left shift: <code>&lt;&lt;</code></li>
<li>signed right shift: <code>&gt;&gt;</code></li>
<li>unsigned right shift: <code>&gt;&gt;&gt;</code></li>
</ul>

<p>What is the different between <code>&gt;&gt;</code> and <code>&gt;&gt;&gt;</code>?<br />
<code>&gt;&gt;</code> uses sign bit to fill the trailing positions after shifting, while <code>&gt;&gt;&gt;</code> always use 0 to fill them. That means, <code>&gt;&gt;</code> won&rsquo;t change the sign from negative to positive.</p>

<p>Some examples:</p>

<ul>
<li><code>0b10000000_00000000_00000000_00000000</code> unsigned right shift</li>
</ul>

<table>
<thead>
<tr>
<th align="left">int</th>
<th align="left">&gt;&gt; 2</th>
<th align="left">&gt;&gt;&gt; 2</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">01000000_00000000_00000000_00000000</td>
<td align="left">00<strong>010000_00000000_00000000_00000000</strong></td>
<td align="left">00<strong>010000_00000000_00000000_00000000</strong></td>
</tr>

<tr>
<td align="left">10000000_00000000_00000000_00000000</td>
<td align="left"><em>11</em><strong>100000_00000000_00000000_00000000</strong></td>
<td align="left">00<strong>100000_00000000_00000000_00000000</strong></td>
</tr>
</tbody>
</table>

<p>Now for the left shift:</p>

<table>
<thead>
<tr>
<th align="left">int</th>
<th align="left">&lt;&lt; 1</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">01000000_00000000_00000000_00000000</td>
<td align="left"><strong>10000000_00000000_00000000_0000000</strong>0</td>
</tr>

<tr>
<td align="left">10000000_00000000_00000000_00000000</td>
<td align="left"><strong>00000000_00000000_00000000_0000000</strong>0</td>
</tr>
</tbody>
</table>

<p>Personally, nearly always use <code>&lt;&lt;</code> and <code>&gt;&gt;&gt;</code>, which is more intuitive.</p>

<h1 id="type-cast">type cast</h1>

<p>4 kinds of integral types can be casted each other.</p>

<h2 id="upcast">upcast</h2>

<p>Upcast is always safe and sign bit can be kept.</p>

<p><strong>The rule</strong>: expand a narrow integer to a wide integer, and use the sign bit to fill the expanded bits.</p>

<table>
<thead>
<tr>
<th align="left">byte upcast</th>
<th align="left">examples</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">byte -&gt; short</td>
<td align="left">0b00111111 -&gt; 0b00000000_<strong>00111111</strong></td>
</tr>

<tr>
<td align="left"></td>
<td align="left">0b10111111 -&gt; 0b11111111_<strong>10111111</strong></td>
</tr>

<tr>
<td align="left">byte -&gt; char</td>
<td align="left">0b00111111 -&gt; 0b00000000_<strong>00111111</strong></td>
</tr>

<tr>
<td align="left"></td>
<td align="left">0b10111111 -&gt; 0b11111111_<strong>10111111</strong></td>
</tr>

<tr>
<td align="left">byte -&gt; int</td>
<td align="left">0b00111111 -&gt; 0b00000000_00000000_00000000_<strong>00111111</strong></td>
</tr>

<tr>
<td align="left"></td>
<td align="left">0b10111111 -&gt; 0b11111111_11111111_11111111_<strong>10111111</strong></td>
</tr>

<tr>
<td align="left">byte -&gt; long</td>
<td align="left">0b00111111 -&gt; 0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_<strong>00111111</strong></td>
</tr>

<tr>
<td align="left"></td>
<td align="left">0b10111111 -&gt; 0b11111111_11111111_11111111_11111111_11111111_11111111_11111111_<strong>10111111</strong></td>
</tr>
</tbody>
</table>

<p>You can see, <code>byte</code> to <code>short</code> and <code>byte</code> to <code>char</code> have the same binary bits. Since <code>char</code> is an unsigned type, so for the same bits, it has a different interpretation.</p>

<table>
<thead>
<tr>
<th align="left">short upcast</th>
<th align="left">examples</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">short -&gt; char</td>
<td align="left">0b00111111_11111111 -&gt; 0b<strong>00111111_11111111</strong></td>
</tr>

<tr>
<td align="left"></td>
<td align="left">0b10111111_11111111 -&gt; 0b<strong>10111111_11111111</strong></td>
</tr>

<tr>
<td align="left">short -&gt; int</td>
<td align="left">0b00111111_11111111 -&gt; 0b00000000_00000000_<strong>00111111_11111111</strong></td>
</tr>

<tr>
<td align="left"></td>
<td align="left">0b10111111_11111111 -&gt; 0b11111111_11111111_<strong>10111111_11111111</strong></td>
</tr>

<tr>
<td align="left">short -&gt; long</td>
<td align="left">0b00111111_11111111 -&gt; 0b00000000_00000000_00000000_00000000_00000000_00000000_<strong>00111111_11111111</strong></td>
</tr>

<tr>
<td align="left"></td>
<td align="left">0b10111111_11111111 -&gt; 0b11111111_11111111_11111111_11111111_11111111_11111111_<strong>10111111_11111111</strong></td>
</tr>
</tbody>
</table>

<p>From <code>short</code> to <code>char</code>, nothing changed.</p>

<table>
<thead>
<tr>
<th align="left">int upcast</th>
<th align="left"></th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">int -&gt; long</td>
<td align="left">0b00111111_11111111_11111111_00000000 -&gt; 0b00000000_00000000_00000000_00000000_<strong>00111111_11111111_11111111_00000000</strong></td>
</tr>

<tr>
<td align="left"></td>
<td align="left">0b10111111_11111111_11111111_00000000 -&gt; 0b11111111_11111111_11111111_11111111_<strong>10111111_11111111_11111111_00000000</strong></td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th align="left">char upcast</th>
<th align="left"></th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">char -&gt; short</td>
<td align="left">0b00111111_11111111 -&gt; 0b<strong>00111111_11111111</strong></td>
</tr>

<tr>
<td align="left"></td>
<td align="left">0b10111111_11111111 -&gt; 0b<strong>10111111_11111111</strong></td>
</tr>

<tr>
<td align="left">char -&gt; int</td>
<td align="left">0b00111111_11111111 -&gt; 0b00000000_00000000_<strong>00111111_11111111</strong></td>
</tr>

<tr>
<td align="left"></td>
<td align="left">0b10111111_11111111 -&gt; 0b00000000_00000000_<strong>10111111_11111111</strong></td>
</tr>

<tr>
<td align="left">char -&gt; long</td>
<td align="left">0b00111111_11111111 -&gt; 0b00000000_00000000_00000000_00000000_00000000_00000000_<strong>00111111_11111111</strong></td>
</tr>

<tr>
<td align="left"></td>
<td align="left">0b10111111_11111111 -&gt; 0b00000000_00000000_00000000_00000000_00000000_00000000_10111111_11111111</td>
</tr>
</tbody>
</table>

<p>You can notice here, <code>char</code> upcasting always fills the expanded bits with 0.</p>

<h2 id="downcast">downcast</h2>

<p>Downcasting is more complicated.</p>

<h1 id="utility-method-of-wrapper-classes">utility method of wrapper classes</h1>

<h2 id="conversion-between-integral-type-and-string">conversion between integral type and string</h2>

<ul>
<li>parseXX(..)/parseUnsigned(..),decode(..)</li>
</ul>

<p><code>parseInt(..)</code> <code>parseLong(..)</code> can convert a string to a <code>int</code> or <code>long</code>. You can specify the radix.&rsquo;</p>

<pre><code>- 2: binary
- 8: octal
- 10: decimal
- 16: hex
</code></pre>

<p><code>decode(..)</code> can directly parse octal, decimal and hex string. It will match the radix specifier: <code>0</code>, <code>0x</code>, <code>0X</code>, <code>#</code>. It finally uses <code>valueOf(..)</code> to get a wrapper type. <code>valueOf(..)</code> further calls <code>parseXX(..)</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kt">long</span> <span class="n">l1</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">parseLong</span><span class="o">(</span><span class="s">&#34;110&#34;</span><span class="o">,</span> <span class="n">8</span><span class="o">);</span> <span class="c1">// 24
</span><span class="c1"></span><span class="kt">long</span> <span class="n">l2</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">parseLong</span><span class="o">(</span><span class="s">&#34;110&#34;</span><span class="o">);</span> <span class="c1">// 110
</span><span class="c1"></span><span class="kt">long</span> <span class="n">l3</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">parseLong</span><span class="o">(</span><span class="s">&#34;110&#34;</span><span class="o">,</span> <span class="n">2</span><span class="o">);</span> <span class="c1">// 6
</span><span class="c1"></span><span class="kt">long</span> <span class="n">l4</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">parseLong</span><span class="o">(</span><span class="s">&#34;110&#34;</span><span class="o">,</span> <span class="n">16</span><span class="o">);</span> <span class="c1">// 272
</span><span class="c1"></span><span class="kt">long</span> <span class="n">l5</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">parseLong</span><span class="o">(</span><span class="s">&#34;-110&#34;</span><span class="o">,</span> <span class="n">16</span><span class="o">);</span> <span class="c1">// -272
</span><span class="c1"></span>
<span class="n">Long</span> <span class="n">ll1</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="s">&#34;110&#34;</span><span class="o">);</span> <span class="c1">// 110
</span><span class="c1"></span><span class="n">Long</span> <span class="n">ll2</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="s">&#34;0110&#34;</span><span class="o">);</span> <span class="c1">// 24
</span><span class="c1"></span><span class="n">Long</span> <span class="n">ll3</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="s">&#34;0x110&#34;</span><span class="o">);</span> <span class="c1">// 272
</span><span class="c1"></span><span class="n">Long</span> <span class="n">ll4</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="s">&#34;0X110&#34;</span><span class="o">);</span> <span class="c1">// 272
</span><span class="c1"></span><span class="n">Long</span> <span class="n">ll5</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="s">&#34;#110&#34;</span><span class="o">);</span> <span class="c1">// 272
</span><span class="c1"></span><span class="n">Long</span> <span class="n">ll3</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="s">&#34;-0x110&#34;</span><span class="o">);</span> <span class="o">//</span> <span class="o">-</span><span class="n">272</span></code></pre></div>
<ul>
<li>toString(..), toHexString(..), toOctalString(..), toBinaryString(..)</li>
</ul>

<h2 id="unsigned-conversion">unsigned conversion</h2>

<ul>
<li>toUnsignedXX(..)</li>
<li>divideUnsigned(..), remainderUnsigned(..)</li>
</ul>

<h2 id="transform">transform</h2>

<ul>
<li>reverse(..), reverseBytes(..)</li>
<li>rotateLeft(..), rotateRight(..)</li>
</ul>

<h2 id="bit-statistics">bit statistics</h2>

<ul>
<li>highestOneBit(..), lowestOneBit(..)</li>
</ul>

<p>These methods return a <code>long</code> like this: except the highest / lowest 1 bit (if exists), the rest bits are all 0. The result is alway the power of 2.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kt">long</span> <span class="n">h1</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">highestOneBit</span><span class="o">(</span><span class="n">0L</span><span class="o">);</span> <span class="c1">// 0
</span><span class="c1"></span><span class="kt">long</span> <span class="n">h2</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">highestOneBit</span><span class="o">(</span><span class="n">5L</span><span class="o">);</span> <span class="c1">// 4
</span><span class="c1"></span><span class="kt">long</span> <span class="n">h3</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">highestOneBit</span><span class="o">(</span><span class="n">7L</span><span class="o">);</span> <span class="c1">// 4
</span><span class="c1"></span><span class="kt">long</span> <span class="n">h4</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">highestOneBit</span><span class="o">(</span><span class="n">15L</span><span class="o">);</span> <span class="c1">// 8
</span><span class="c1"></span>
<span class="kt">long</span> <span class="n">l1</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">lowestOneBit</span><span class="o">(</span><span class="n">0L</span><span class="o">);</span> <span class="c1">// 0
</span><span class="c1"></span><span class="kt">long</span> <span class="n">l2</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">lowestOneBit</span><span class="o">(</span><span class="n">5L</span><span class="o">);</span> <span class="c1">// 1
</span><span class="c1"></span><span class="kt">long</span> <span class="n">l3</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">lowestOneBit</span><span class="o">(</span><span class="n">7L</span><span class="o">);</span> <span class="c1">// 1
</span><span class="c1"></span><span class="kt">long</span> <span class="n">l4</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">lowestOneBit</span><span class="o">(</span><span class="n">15L</span><span class="o">);</span> <span class="c1">// 1
</span><span class="c1"></span><span class="kt">long</span> <span class="n">l5</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">lowestOneBit</span><span class="o">(</span><span class="n">12L</span><span class="o">);</span> <span class="o">//</span> <span class="n">4</span></code></pre></div>
<ul>
<li>numberOfLeadingZeros(..),numberOfTrailingZeros(..)</li>
</ul>

<p>No need to explain.</p>

<ul>
<li>bitCount(..), signum(..)</li>
</ul>

<p>bitCount is the count of 1 bits.</p>

<p>signum function returns: -1 for negative, 0 for 0 and 1 for positive.</p>

<p><img src="http://yangchao.me/assets/signum_function.png" width="200"></p>

<h2 id="simple-math">simple math</h2>

<ul>
<li>sum(..), max(..), min(..)</li>
</ul>

    </div>
    <footer class="post-footer">
     

     <div class="post-nav">
    <div class="post-nav-next post-nav-item">
    
        <a href="http://yangchao.me/book/a-close-look-at-java/string/intern/" rel="next" title="">
        <i class="fa fa-chevron-left"></i> 
        </a>
    
    </div>

    <div class="post-nav-prev post-nav-item">
    
        <a href="http://yangchao.me/book/a-close-look-at-java/primitives/float-point/" rel="prev" title="">
         <i class="fa fa-chevron-right"></i>
        </a>
    
    </div>
</div>
      
     <div class="post-nav">
<div style="border: 1px dashed #e0e0e0; padding: 10px 10px 10px 10px; background-color: #fffeee; background-repeat: no-repeat; background-attachment: scroll; background-position: 1% 50%; -moz-background-size: auto auto; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">
    <div style="float:left;margin-top:0px;">
    <img src="http://yangchao.me/images/qrcode/qrcode_8cm.jpg" width="129px" height="129px"/>
    <div style="text-align:center;">微信扫一扫交流</div>
    </div>
    <div>
        <p style="margin-top:0px;">
            标题：
        <br />作者：<a target="_blank" href="http://yangchao.me/">Chao</a>
        <br />关注：richdyang（CHAO）
        <br />声明：自由转载-非商用-非衍生-保持署名（创作共享3.0许可证）
        </p>
    </div>
</div>
<div class="clear"></div>
</div>
     
     
     




    </footer>
  </article>
</section>

          </div>
        </div>
        <div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>
<aside id="sidebar" class="sidebar">
  <div class="sidebar-inner">

    <section class="site-overview sidebar-panel  sidebar-panel-active ">
      <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
        src="http://yangchao.me/img/author.jpg"
        alt="Chao" />
    <p class="site-author-name" itemprop="name">Chao</p>
    <p class="site-description motion-element" itemprop="description"> 
        Programmer &amp; Life explorer</p>
</div>
      <nav class="site-state motion-element">
    <div class="site-state-item site-state-posts">
      <a href="http://yangchao.me/post/">
        <span class="site-state-item-count">137</span>
        <span class="site-state-item-name">Blogs</span>
      </a>
    </div>
    <div class="site-state-item site-state-categories">    
        <a href="http://yangchao.me/categories/">      
         
        <span class="site-state-item-count">48</span>
        
        <span class="site-state-item-name">Categories</span>
        
        </a>
    </div>

    <div class="site-state-item site-state-tags">
        <a href="http://yangchao.me/tags/">
         
        <span class="site-state-item-count">19</span>
        
        <span class="site-state-item-name">Tags</span>
        </a>
    </div>
</nav>
      
      
<div class="links-of-author motion-element">
    
        <span class="links-of-author-item">
        <a href="https://github.com/richdyang" target="_blank" title="GitHub">
            <i class="fa fa-fw fa-github"></i>
            GitHub
        </a>
        </span>
    
        <span class="links-of-author-item">
        <a href="https://linkedin.com/in/richdyang" target="_blank" title="Linkedin">
            <i class="fa fa-fw fa-linkedin"></i>
            Linkedin
        </a>
        </span>
    
</div>

      
      <div class="links-of-blogroll motion-element inline">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5b4f2ucxar6&amp;m=0&amp;s=220&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33&amp;bv=35" async="async"></script>
</div>

    </section>
    
  </div>
</aside>

      </div>
    </main>
   
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  <span itemprop="copyrightYear">  &copy; 
  2009 - 2018</span>
  <span class="with-love"><i class="fa fa-heart"></i></span>
  <span class="author" itemprop="copyrightHolder">Chao Yang</span>
</div>
<div class="powered-by">
  Powered by - <a class="theme-link" href="http://gohugo.io" target="_blank" title="hugo" >Hugo v0.30.2</a>
</div>
<div class="theme-info">
  Theme by - <a class="theme-link" href="https://github.com/xtfly/hugo-theme-next" target="_blank"> NexT
  </a>
</div>


      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?0b07433b4ab8d587dae7d34e71973839";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>
<script type="text/javascript" src="http://tajs.qq.com/stats?sId=58416275" charset="UTF-8"></script> 
<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
<script type="text/javascript" src="http://yangchao.me/js/vendor/jquery/index.js?v=2.1.3"></script>
<script type="text/javascript" src="http://yangchao.me/js/vendor/fastclick/lib/fastclick.min.js?v=1.0.6"></script> 
<script type="text/javascript" src="http://yangchao.me/js/vendor/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
<script type="text/javascript" src="http://yangchao.me/js/vendor/velocity/velocity.min.js?v=1.2.1"></script>
<script type="text/javascript" src="http://yangchao.me/js/vendor/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="http://yangchao.me/js/vendor/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>

<script src="http://yangchao.me/js/vendor/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>

<script type="text/javascript" src="http://yangchao.me/js/utils.js"></script>
<script type="text/javascript" src="http://yangchao.me/js/motion.js"></script>
<script type="text/javascript" src="http://yangchao.me/js/affix.js"></script>
<script type="text/javascript" src="http://yangchao.me/js/schemes/pisces.js"></script>

<script type="text/javascript" src="http://yangchao.me/js/scrollspy.js"></script>
<script type="text/javascript" src="http://yangchao.me/js/post-details.js"></script>
<script type="text/javascript" src="http://yangchao.me/js/toc.js"></script>

<script type="text/javascript" src="http://yangchao.me/js/bootstrap.js"></script>

<script type="text/javascript" src="http://yangchao.me/js/search.js"></script>
</body>
</html>