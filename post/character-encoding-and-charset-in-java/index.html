<!DOCTYPE HTML>
<html lang="en-us">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
    <title>Character encoding and charset in Java - Chao Yang</title>
    <meta name="keywords" content="Java, Programming, Android, JavaScript, Angular, Kotlin, Swift, iOS, Machine Learning, Big Data">
    
    <meta property="og:title" content="Character encoding and charset in Java">
    <meta property="og:site_name" content="Chao Yang">
    <meta property="og:image" content="/img/author.jpg"> 
    <meta name="title" content="Character encoding and charset in Java - Chao Yang" />
    <meta name="description" content="A Developer in New Zealand"> 
    
    <link rel="shortcut icon" href="http://yangchao.me/img/favicon.ico" />
    <link rel="apple-touch-icon" href="http://yangchao.me/img/apple-touch-icon.png" />
    <link rel="apple-touch-icon-precomposed" href="http://yangchao.me/img/apple-touch-icon.png" />
    <link href="http://yangchao.me/js/vendor/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />
    <link href="http://yangchao.me/js/vendor/fancybox/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />
    <link href="http://yangchao.me/css/main.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
     fancybox: true, 
    motion: true
  };
</script>
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/kotlin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/swift.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/typescript.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
<div class="container one-collumn sidebar-position-left page-home  ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-meta  custom-logo ">

  <div class="custom-logo-site-title">
    <a href="http://yangchao.me/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Chao Yang</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Nothing seek, nothing find</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
    <ul id="menu" class="menu">
      
      
        <li class="menu-item ">
          <a href="http://yangchao.me/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://yangchao.me/books" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />Minibooks
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://yangchao.me/showcase/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-code"></i> <br />Showcase
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://linkedin.com/in/richdyang" rel="section">
              <i class="menu-item-icon fa fa-fw fa-linkedin"></i> <br />Résumé
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://yangchao.me/post/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archive
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://yangchao.me/about/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />About
          </a>
        </li>
      
    </ul>
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
<section id="posts" class="posts-expand">
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://yangchao.me/post/character-encoding-and-charset-in-java/" itemprop="url">
        Character encoding and charset in Java
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">Published at:</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2015-03-16">
    2015-03-16
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">Categories:</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://yangchao.me/categories/basics" itemprop="url" rel="index">
        <span itemprop="name">Basics</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">Reading:</span>
<span class="leancloud-visitors-count">1648 words ~8min</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    

<h1 id="concepts">Concepts</h1>

<p>At the beginning, we need to distinguish some key concepts.</p>

<h2 id="character">character</h2>

<p>Character (aka. abstract character) is a textual representation of character.</p>

<h2 id="glyph">glyph</h2>

<p>glyph is the particular images representing a character or part of a character. Glyphs for the same character may have very different shapes</p>

<h2 id="abstract-character-repertoire-acr">abstract character repertoire (ACR)</h2>

<p>A <em>character repertoire</em> is the full set of unordered abstract characters that a system supports.</p>

<h2 id="coded-character-set-ccs">coded character set (CCS)</h2>

<p>A <em>coded character set</em> (CCS) specifies how to represent a repertoire of characters using a number of (typically non-negative) integer values called <span style="color: #ffffff; font-size: 20px; background-color: #000000;">code points</span>.</p>

<p>A complete set of characters and corresponding integers is a <em>coded character set</em>.</p>

<p>Multiple coded character sets may share the same repertoire.</p>

<h2 id="character-encoding-form-cef"><em>character encoding form</em> (CEF)</h2>

<p>A <em>character encoding form</em> (CEF) specifies the conversion of a coded character set&rsquo;s integer codes into a set of limited-size integer <em>code values</em> that facilitate storage in a system that represents numbers in binary form using a fixed number of bits.</p>

<p>This is what a CEF accommodates: it defines a way of mapping a <em>single</em> code <em>point to a sequences of octets.</em></p>

<h2 id="character-encoding-scheme-ces">character encoding scheme (CES)</h2>

<p>a <em>character encoding scheme</em> (CES) specifies how the fixed-size integer code values should be mapped into an octet sequence suitable for saving on an octet-based file system or transmitting over an octet-based network.</p>

<table>
<thead>
<tr>
<th>Character encoding</th>
<th>Code unit width</th>
</tr>
</thead>

<tbody>
<tr>
<td>US-ASCII</td>
<td>7</td>
</tr>

<tr>
<td>UTF-8</td>
<td>8</td>
</tr>

<tr>
<td>EBCDIC</td>
<td>8</td>
</tr>

<tr>
<td>UTF-16</td>
<td>16</td>
</tr>

<tr>
<td>UTF-32</td>
<td>32</td>
</tr>
</tbody>
</table>

<p>Notice: although UTF-8 use the eight-unit <em>code unit</em>, but it doesn&rsquo;t necessarily mean that each character is encoded as a single code unit. Actually, a character can be encoded as one or more than one <em>code units</em> in UTF-8.</p>

<p>For code unit including more thant 8 bits(byte), there is a problem named as <a href="http://en.wikipedia.org/wiki/Endianness" title="Endianness">endian</a> (byte order). BE is big-endian, while LE is little-endian.</p>

<h1 id="java-internal-string-representation">Java internal string representation</h1>

<p>Java uses UTF-16BE encoding as its internal representation.
&gt; UTF-16 developed from an earlier fixed-width 16-bit encoding known as <strong>UCS-2</strong> (for 2-byte Universal Character Set) once it became clear that a fixed-width 2-byte encoding could not encode enough characters to be truly universal.
&gt;
&gt;
&gt; The encoding is <a href="http://en.wikipedia.org/wiki/Variable-width_encoding" title="Variable-width encoding">variable-length</a>, as <a href="http://en.wikipedia.org/wiki/Code_point" title="Code point">code points</a> are encoded with one or two 16-bit <em>code units</em>.
So, in Java:</p>

<ul>
<li>a <em>code point</em> is a 32-bit <code>int</code> data type, where the lower 21 bits represent a valid code point value and the upper 11 bits are 0. (thus no negative code point)</li>
<li>a <em>code unit</em> is a 16-bit <code>char</code> value.
To express a Unicode character, the hexadecimal value is prefixed with the string U+.</li>
</ul>

<table>
<thead>
<tr>
<th>Character</th>
<th>Unicode Code Point</th>
<th>Glyph</th>
</tr>
</thead>

<tbody>
<tr>
<td>Latin A</td>
<td>U+0041</td>
<td><img src="https://docs.oracle.com/javase/tutorial/figures/i18n/000041.gif" alt="The Latin character A" /></td>
</tr>

<tr>
<td>Latin sharp S</td>
<td>U+00DF</td>
<td><img src="https://docs.oracle.com/javase/tutorial/figures/i18n/0000df.gif" alt="The Latin small letter sharp S" /></td>
</tr>

<tr>
<td>Han for East</td>
<td>U+6771</td>
<td><img src="https://docs.oracle.com/javase/tutorial/figures/i18n/006771.gif" alt="The Han character for east, eastern or eastward" /></td>
</tr>

<tr>
<td>Deseret, LONG I</td>
<td>U+10400</td>
<td><img src="https://docs.oracle.com/javase/tutorial/figures/i18n/006771.gif" alt="The Han character for east, eastern or eastward" /></td>
</tr>
</tbody>
</table>

<p>Characters that are in the range U+10000 to U+10FFFF are called supplementary characters. The set of characters from U+0000 to U+FFFF are sometimes referred to as the <em>Basic Multilingual Plane (BMP)</em>.
&gt; U+10FFFF is the current upper limit of unicode defined code points.
Obviously, supplementary characters cannot be represented by a 16-bit <code>char.</code></p>

<p>To support supplementary characters without changing the char primitive data type and causing incompatibility with previous Java programs, supplementary characters are defined by a pair of code point values that are called <em>surrogates</em>. The first code point is from the <em>high surrogates</em> range of <code>U+D800</code> to <code>U+DBFF</code>, and the second code point is from the <em>low surrogates</em> range of <code>U+DC00</code> to <code>U+DFFF</code>. You can simply think surogates ranges are the blocks reserved in BMP.</p>

<p><strong>Therefore, a unicode character can be represented by one <code>char</code> (BMP), or a surrogate pair (2 elements array of <code>char</code>).</strong></p>

<p>Until now, you shold be able to answer these questions:
- can any unicode character be represented by a Java char? No
- how do we initialize a char exceeding BMP with char literals? No</p>

<p>Simply, char ≠ unicode character</p>

<p><img src="http://yangchao.me/media/Character_encoding_and_charset_in_Java___Richard_Yang.png" alt="Character_encoding_and_charset_in_Java___Richard_Yang" />
The table above shows some of the interesting things we have to look out for.</p>

<ol>
<li><p>Stored characters can take up an inconsistent number of bytes.
A UTF-8 encoded character might take between one (LATIN_CAPITAL_LETTER_A) and four (MATHEMATICAL_FRAKTUR_CAPITAL_G) bytes.<a href="http://en.wikipedia.org/wiki/Variable-width_encoding">Variable width encoding</a> has implications for reading into and decoding from byte arrays.</p></li>

<li><p>Not all code points can be stored in a <code>char</code>.
The MATHEMATICAL_FRAKTUR_CAPITAL_G example lies in the supplementary range of characters and cannot be stored in 16 bits. It must be represented by two sequential <code>char</code> values, neither of which is meaningful by itself. The <a href="http://java.sun.com/javase/6/docs/api/java/lang/Character.html">Character</a> class provides methods for working with 32-bit code points.</p></li>
</ol>

<pre><code class="language-java">// Unicode code point to char array
char[] math_fraktur_cap_g = Character.toChars(0x1D50A);
</code></pre>

<ol>
<li>The relationship between the grapheme visible to the user and the code point type may not be 1:1.</li>
</ol>

<p>This can be seen in the combining character sequences (the e-acute example). As the Devenagari example shows, combining sequences can get quite complex.</p>

<p><img src="http://yangchao.me/media/java-utf-16be.png" alt="java-utf-16be" /></p>

<h1 id="character-and-string-api">Character and String API</h1>

<p><img src="http://yangchao.me/media/character-api.png" alt="character-api" /></p>

<p><img src="http://yangchao.me/media/string-api.png" alt="string-api" /></p>

<h2 id="how-long-is-a-string">How long is a string?</h2>

<ul>
<li><a href="http://java.sun.com/javase/6/docs/api/java/lang/String.html#length()">String.length()</a> returns the number of <code>char</code>s in the String. That&rsquo;s also the number of code units.</li>
<li><a href="http://java.sun.com/javase/6/docs/api/java/lang/String.html#codePointCount(int,%20int)">String.codePointCount(int, int)</a> returns the number of Unicode <strong>code points</strong> in the String.</li>
<li><a href="http://java.sun.com/javase/6/docs/api/java/text/BreakIterator.html#getCharacterInstance(java.util.Locale)">BreakIterator.getCharacterInstance()</a> can be used to count the number of <strong>graphemes</strong> in a String.</li>
</ul>

<p><img src="http://yangchao.me/media/how-long-string.png" alt="" /></p>

<h1 id="play-with-charsets-and-encodings-in-java">Play with charsets and encodings in Java</h1>

<p>Here, the name of charset is misleading, actually it is defined as the combination of one or more coded character sets and a character-encoding scheme. If you are a serious programmer, you should read the Javadoc of class <code>Charset</code>.</p>

<p>Many non-unicode charsets are subsets of unicode, while others use completely different mapping between a character and its code point.</p>

<h2 id="charset-charsetencoder-charsetdecoder">Charset, CharsetEncoder/CharsetDecoder</h2>

<p>Java provides a Charset class representing supported charset, by which we can encode Java string into bytes or decode bytes into Java String.</p>

<pre><code class="language-java">Charset.defaultCharset(); // underlying OS encoding, you can modified it by System.setProperty(&quot;file.encoding&quot;, &quot;your encoding here&quot;)
</code></pre>

<blockquote>
<p>The &ldquo;file.encoding&rdquo; property is not required by the J2SE platform specification; it&rsquo;s an internal detail of Sun&rsquo;s implementations and should not be examined or modified by user code. It&rsquo;s also intended to be read-only; it&rsquo;s technically impossible to support the setting of this property to arbitrary values on the command line or at any other time during program execution.
Charset can get the CharsetEncoder and CharsetDecoder, by which you can control the entire encoding/decoding process.</p>
</blockquote>

<p>Charset.encode(..) and Charset.decode(..) are just the shortcut methods of using CharsetEncoder and CharsetDecoder.</p>

<p>Any place where you need to do byte-character conversion, you should specify the charset explicitly.</p>

<p>Some cases:</p>

<ul>
<li>String.getBytes()</li>
<li>Stream</li>
<li>file I/O</li>
</ul>

<h2 id="bom-byte-order-marker">BOM (Byte Order Marker)</h2>

<p>The code point for BOM is U+FEFF.</p>

<table>
<thead>
<tr>
<th>Charset</th>
<th>BOM byte sequence</th>
</tr>
</thead>

<tbody>
<tr>
<td>UTF-8 ef</td>
<td>bb bf</td>
</tr>

<tr>
<td>UTF-16BE</td>
<td>fe ff</td>
</tr>

<tr>
<td>UTF-16LE</td>
<td>ff fe</td>
</tr>

<tr>
<td>UTF-32BE</td>
<td>00 00 fe ff</td>
</tr>

<tr>
<td>UTF-32LE</td>
<td>ff fe 00 00</td>
</tr>
</tbody>
</table>

<p><strong>Some encodings will automatically emit byte order marks on encode and read them on decode.</strong></p>

<p>let&rsquo;s test which charset insert BOM automatically:</p>

<pre><code class="language-java">public void testBOM() {
        // Encode this to get bytes
        final String bomChar = &quot;\u0041&quot;;
        // Unicode encodings
        String[] unicodeEncodings = {&quot;UTF-16&quot;, &quot;UTF-8&quot;, &quot;UTF-16BE&quot;, &quot;UTF-16LE&quot;, &quot;UTF-32BE&quot;, &quot;UTF-32LE&quot;};
        // Print the byte order marks
        for (String encName : unicodeEncodings) {
            Charset charset = Charset.forName(encName);
            byte[] byteOrderMark = bomChar.getBytes(charset);
            System.out.format(&quot;%10s encoding: &quot;, charset.toString());
            for (byte b : byteOrderMark) {
                System.out.format(&quot;%02x &quot;, b);
            }
            System.out.println();
        }
    }
</code></pre>

<p>Output:
UTF-16 encoding: fe ff 00 41
UTF-8 encoding: 41
UTF-16BE encoding: 00 41
UTF-16LE encoding: 41 00
UTF-32BE encoding: 00 00 00 41
UTF-32LE encoding: 41 00 00 00</p>

<p>You can see, UTF-16 encoding scheme inserts the UTF-16BE BOM automatically, while others don&rsquo;t.</p>

<p>UTF-16 is also called <em>UTF-16BE with BOM</em>.</p>

<h2 id="pitfalls-of-encoding-and-decoding-data-corruption">pitfalls of encoding and decoding - data corruption</h2>

<p>When decoding not on one go, the character may become corrupted as two halves.</p>

<p>When encoding incrementally, some problems may happen: the <code>UTF-16</code> encoding scheme used adds a byte order mark to encoded data. Every time a string is written, another BOM is added, littering the content with unwanted data. When the data is decoded, extra characters end up in the text. All text would need to be concatenated and encoded in one go.</p>

<h1 id="environments-and-boundaries-jvm-interacts-with">environments and boundaries JVM interacts with</h1>

<p>If all your code is just running in JVM, you are OK. Once your JVM starts to interact with outer environment through I/O or network, that&rsquo;s the boundary place that character en/decoding will happen.</p>

<h2 id="os-locale">OS locale</h2>

<p>A <strong>locale</strong> is a set of parameters that defines the user&rsquo;s language, country and any special variant preferences that the user wants to see in their user interface. Usually a locale identifier consists of at least a language identifier and a region identifier.</p>

<p>In Unix, Linux or like, the locale identifier is defined in this format: <tt>[language[_territory][.codeset][@modifier]]</tt></p>

<p>The locale settings usually include the following display (output) format settings:</p>

<ul>
<li>Number format setting</li>
<li>Character classification, case conversion settings</li>
<li>Date-time format setting</li>
<li>String <a href="http://en.wikipedia.org/wiki/Collation" title="Collation">collation</a> setting</li>
<li>Currency format setting</li>
<li>Paper size setting</li>
<li>other minor settings &hellip;
In Windows, &hellip;&hellip;</li>
</ul>

<p>//TODO</p>

<h2 id="file-encoding">File encoding</h2>

<p>We say file encoding meas its content&rsquo;s encoding (if it&rsquo;s a text file) or it&rsquo;s regarded as a storage of binary bytes.</p>

<p>Actually, file has no knowledge about its content encoding. Some tools can guess the encoding.</p>

<p>When you store the file in an encoding, and then open to show or interpret it in another encoding, I&rsquo;m sure you&rsquo;ll be frustrated with the <a href="http://en.wikipedia.org/wiki/Mojibake">Mojibake</a>.</p>

<h2 id="html-charset-with-meta">HTML charset with meta</h2>

<p>There are two ways to specify the charset using HTML meta tag:</p>

<ul>
<li><meta charset=“utf-8”></li>
<li><meta http-equiv=“Content-Type” content=“text/html; charset=utf-8”>
These two are equivalent.</li>
</ul>

<h2 id="http-charset-with-content-type">HTTP charset with Content-Type</h2>

<p>HTTP header Content-Type can be set as &ldquo;text/html; charset=UTF-8&rdquo;. This is an indicator for browsers. It tells browsers to render or interpret this response context as UTF-8 HTML text.</p>

<h2 id="servlet-jsp">Servlet/JSP</h2>

<p>You tell the browser what encoding you are using, and you also need your server to produce the response of that encoding, whatever static html file, dynamic JSP or in-memory response stream.</p>

<p>JSP uses the directive:</p>

<pre><code class="language-html">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; pageEncoding=&quot;GBK&quot; %&gt;
</code></pre>

<p>This means that this file is edited and stored using GBK encoding, but the server resonse as UTF-8 encoding.</p>

<p>So the pageEncoding attribute is for JVM to read the JSP source file content when run-time compiling.</p>

<p><img src="http://yangchao.me/media/jsp-directive-encoding.png" alt="jsp-directive-encoding" /></p>

<p>For input data, you can use</p>

<pre><code class="language-java">request.setCharacterEncoding(&quot;UTF-8&quot;);
</code></pre>

<h2 id="database-codepage-collation"> database codepage/collation</h2>

<h1 id="some-useful-sites">Some useful sites</h1>

<p><a href="https://codepoints.net">https://codepoints.net</a></p>

    </div>
    <footer class="post-footer">
     

     <div class="post-nav">
    <div class="post-nav-next post-nav-item">
    
        <a href="http://yangchao.me/post/finally-execution-in-try-catch-finnally-blocks/" rel="next" title="finally execution in try-catch-finnally blocks">
        <i class="fa fa-chevron-left"></i> finally execution in try-catch-finnally blocks
        </a>
    
    </div>

    <div class="post-nav-prev post-nav-item">
    
        <a href="http://yangchao.me/post/equals-and-hashcode-contract/" rel="prev" title="equals() / hashCode() contract, Comparable contract">
        equals() / hashCode() contract, Comparable contract <i class="fa fa-chevron-right"></i>
        </a>
    
    </div>
</div>
      
     
     
     




    </footer>
  </article>
</section>

          </div>
        </div>
        <div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>
<aside id="sidebar" class="sidebar">
  <div class="sidebar-inner">

  <ul class="sidebar-nav motion-element">
    <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
      Table of Content
    </li>
    <li class="sidebar-nav-overview" data-target="site-overview">
      Site Information
    </li>
  </ul>

    <section class="site-overview sidebar-panel ">
      <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
        src="http://yangchao.me/img/author.jpg"
        alt="Chao" />
    <p class="site-author-name" itemprop="name">Chao</p>
    <p class="site-description motion-element" itemprop="description"> 
        Programmer &amp; Life explorer</p>
</div>
      <nav class="site-state motion-element">
    <div class="site-state-item site-state-posts">
      <a href="http://yangchao.me/post/">
        <span class="site-state-item-count">133</span>
        <span class="site-state-item-name">Blogs</span>
      </a>
    </div>
    <div class="site-state-item site-state-categories">    
        <a href="http://yangchao.me/categories/">       
        <span class="site-state-item-count">46</span>
        <span class="site-state-item-name">Categories</span>
        </a>
    </div>

    <div class="site-state-item site-state-tags">
        <a href="http://yangchao.me/tags/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">Tags</span>
        </a>
    </div>
</nav>
      
      
<div class="links-of-author motion-element">
    
        <span class="links-of-author-item">
        <a href="https://github.com/richdyang" target="_blank" title="GitHub">
            <i class="fa fa-fw fa-github"></i>
            GitHub
        </a>
        </span>
    
        <span class="links-of-author-item">
        <a href="https://linkedin.com/in/richdyang" target="_blank" title="Linkedin">
            <i class="fa fa-fw fa-linkedin"></i>
            Linkedin
        </a>
        </span>
    
</div>

      
      <div class="links-of-blogroll motion-element inline">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5b4f2ucxar6&amp;m=0&amp;s=220&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33&amp;bv=35" async="async"></script>
</div>

    </section>
    
<section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
    <div class="post-toc">
        <div class="post-toc-content"><nav id="TableOfContents">
<ul>
<li><a href="#concepts">Concepts</a>
<ul>
<li><a href="#character">character</a></li>
<li><a href="#glyph">glyph</a></li>
<li><a href="#abstract-character-repertoire-acr">abstract character repertoire (ACR)</a></li>
<li><a href="#coded-character-set-ccs">coded character set (CCS)</a></li>
<li><a href="#character-encoding-form-cef"><em>character encoding form</em> (CEF)</a></li>
<li><a href="#character-encoding-scheme-ces">character encoding scheme (CES)</a></li>
</ul></li>
<li><a href="#java-internal-string-representation">Java internal string representation</a></li>
<li><a href="#character-and-string-api">Character and String API</a>
<ul>
<li><a href="#how-long-is-a-string">How long is a string?</a></li>
</ul></li>
<li><a href="#play-with-charsets-and-encodings-in-java">Play with charsets and encodings in Java</a>
<ul>
<li><a href="#charset-charsetencoder-charsetdecoder">Charset, CharsetEncoder/CharsetDecoder</a></li>
<li><a href="#bom-byte-order-marker">BOM (Byte Order Marker)</a></li>
<li><a href="#pitfalls-of-encoding-and-decoding-data-corruption">pitfalls of encoding and decoding - data corruption</a></li>
</ul></li>
<li><a href="#environments-and-boundaries-jvm-interacts-with">environments and boundaries JVM interacts with</a>
<ul>
<li><a href="#os-locale">OS locale</a></li>
<li><a href="#file-encoding">File encoding</a></li>
<li><a href="#html-charset-with-meta">HTML charset with meta</a></li>
<li><a href="#http-charset-with-content-type">HTTP charset with Content-Type</a></li>
<li><a href="#servlet-jsp">Servlet/JSP</a></li>
<li><a href="#database-codepage-collation"> database codepage/collation</a></li>
</ul></li>
<li><a href="#some-useful-sites">Some useful sites</a></li>
</ul>
</nav></div>
    </div>
</section>

  </div>
</aside>

      </div>
    </main>
   
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  <span itemprop="copyrightYear">  &copy; 
   - 2017</span>
  <span class="with-love"><i class="fa fa-heart"></i></span>
  <span class="author" itemprop="copyrightHolder">Chao Yang</span>
</div>
<div class="powered-by">
  Powered by - <a class="theme-link" href="http://gohugo.io" target="_blank" title="hugo" >Hugo</a>
</div>
<div class="theme-info">
  Theme by - <a class="theme-link" href="https://github.com/xtfly/hugo-theme-next" target="_blank"> NexT
  </a>
</div>


      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?0b07433b4ab8d587dae7d34e71973839";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>
<script type="text/javascript" src="http://tajs.qq.com/stats?sId=58416275" charset="UTF-8"></script> 
<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
<script type="text/javascript" src="http://yangchao.me/js/vendor/jquery/index.js?v=2.1.3"></script>
<script type="text/javascript" src="http://yangchao.me/js/vendor/fastclick/lib/fastclick.min.js?v=1.0.6"></script> 
<script type="text/javascript" src="http://yangchao.me/js/vendor/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
<script type="text/javascript" src="http://yangchao.me/js/vendor/velocity/velocity.min.js?v=1.2.1"></script>
<script type="text/javascript" src="http://yangchao.me/js/vendor/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="http://yangchao.me/js/vendor/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>

<script src="http://yangchao.me/js/vendor/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>

<script type="text/javascript" src="http://yangchao.me/js/utils.js"></script>
<script type="text/javascript" src="http://yangchao.me/js/motion.js"></script>
<script type="text/javascript" src="http://yangchao.me/js/affix.js"></script>
<script type="text/javascript" src="http://yangchao.me/js/schemes/pisces.js"></script>

<script type="text/javascript" src="http://yangchao.me/js/scrollspy.js"></script>
<script type="text/javascript" src="http://yangchao.me/js/post-details.js"></script>
<script type="text/javascript" src="http://yangchao.me/js/toc.js"></script>

<script type="text/javascript" src="http://yangchao.me/js/bootstrap.js"></script>

</body>
</html>